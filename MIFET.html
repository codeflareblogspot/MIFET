<!DOCTYPE html>
<html dir='ltr' lang='en'>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
<meta content='width=device-width,initial-scale=1' name='viewport'/>
<title>MIFET SOURCE CODE [1]</title>
<script src="jquery.min.js"></script>
</head>
<body>
<div id="frmEncoder" name="frmEncoder"></div>
<script>
var createStyle="#txtChkD{cursor:pointer;}.titleFormParser{font:14px Tahoma,Monospace;color:#000;padding:5px;border:1px solid #ccc;font-weight:400;border-radius:4px 4px 0 0;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.titleFormParser,.aboutMifet{background:rgb(252,255,244);background:-moz-linear-gradient(top,rgba(252,255,244,1) 0%,rgba(223,229,215,1) 40%,rgba(179,190,173,1) 100%);background:-webkit-linear-gradient(top,rgba(252,255,244,1) 0%,rgba(223,229,215,1) 40%,rgba(179,190,173,1) 100%);background:linear-gradient(to bottom,rgba(252,255,244,1) 0%,rgba(223,229,215,1) 40%,rgba(179,190,173,1) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fcfff4',endColorstr='#b3bead',GradientType=0);}.mainMenuBtn,.mainMenuImgBtn,.mainMenuInputBtn,.dropdown-content,#thumbImg div{background:rgb(252,255,244);background:-moz-linear-gradient(top,rgba(252,255,244,1) 0%,rgba(233,233,206,1)100%);background:-webkit-linear-gradient(top,rgba(252,255,244,1) 0%,rgba(233,233,206,1)100%);background:linear-gradient(to bottom,rgba(252,255,244,1) 0%,rgba(233,233,206,1)100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fcfff4',endColorstr='#e9e9ce',GradientType=0);}.mainMenuBtn{border-width:0 1px 0 1px;border-style:solid;border-color:#ccc;}.mainMenuImgBtn{margin:0;padding:0px 5px 2px 5px;border-width:0 1px 0 1px;border-style:solid;border-color:#ccc;}.mainMenuImgBtn button{border:0;padding:0;margin:0;background-repeat:no-repeat;background-size:16px 16px;background-position:center;width:24px;height:24px;}.mainMenuImgBtn button:hover{border:1px solid #ccc;cursor:pointer;}.mainMenuInputBtn{padding:2px;border-width:0 1px 0 1px;border-style:solid;border-color:#ccc;}.dropbtn{background:none;color:#000;padding:5px;font:14px Tahoma,Monospace;border:none;}.dropdown{position:relative;display:inline-block;}.dropdown-content{display:none;position:absolute;min-width:150px;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);z-index:1;}.dropdown-content a{color:black;padding:2px 15px;text-decoration:none;display:block;}.dropdown-content a:hover,.dropbtn:hover{background-color:#fff;}.dropdown:hover .dropdown-content{display:block;}.txtBottomForm{width:100%;box-sizing:border-box;border-width:0 1px 1px 1px;border-style:solid;border-color:#ccc;}div.numberedtextarea-wrapper{position:relative;}div.numberedtextarea-wrapper textarea{display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}div.numberedtextarea-line-numbers{position:absolute;top:0;left:0;right:0;bottom:0;width:50px;border:1px solid #ccc;color:#000;overflow:hidden;background:#ededd5;}div.numberedtextarea-number{padding-right:6px;text-align:right;}.txtInput{margin:0;line-height:16px;padding-top:5px;padding-left:5px;font:14px Courier New,FontAwesome,Monospace;border:1px solid #CCCCCC;width:100%;box-sizing:border-box;word-wrap:break-word;overflow-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;resize:none;}.frmBottomTxtArea{padding:2px 5px;border-width:0px 1px 1px 1px;border-style:solid;border-color:#ccc;background:#ededd5;}.frmBottomTxtArea button{background:#f4f4f4;font:12px 'Courier New',Monospace;padding:2px;border:1px solid #ccc;}#undo{background:url(https://1.bp.blogspot.com/-6F3ermi67SU/XBG1e7uiyiI/AAAAAAAAAqQ/1UcEV0fxHLQst-AhY2FVv1z6FW6GahjtQCLcBGAs/s1600/undo.png)no-repeat center center / 16px 16px;}#redo{background:url(https://3.bp.blogspot.com/-K0E5K9u0bqA/XBG1d4UeUQI/AAAAAAAAAqE/DRdCEkqsxHkx1fm4QJgyA4b97KCjept5ACLcBGAs/s1600/redo.png)no-repeat center center / 16px 16px;}#undo:disabled[disabled]{background:url(https://4.bp.blogspot.com/-GIPC-TmC4pw/XBOwuPyOuZI/AAAAAAAAAsU/tIeoIkxStV0EIKEW6hglRXeJP9L_uZQ-gCLcBGAs/s1600/not-undo.png)no-repeat center center / 16px 16px;}#redo:disabled[disabled]{background:url(https://4.bp.blogspot.com/-r7JyQoZIDQU/XBOwuDtgYeI/AAAAAAAAAsQ/DCXWsuBtVvMzch58q--hybUcqvkB6-0NwCLcBGAs/s1600/not-redo.png)no-repeat center center / 16px 16px;}#pasteclipboard{background:url(https://2.bp.blogspot.com/-GNh2GyRj2rU/XBHEyXQmfTI/AAAAAAAAArM/_-H9p0NVGqAXGL2iV4ugi8Tb81l-DmgegCLcBGAs/s1600/clipboard.png)no-repeat center center / 16px 16px;}#pasteclipboard:disabled[disabled]{background:url(https://3.bp.blogspot.com/-Be21mfSMqOo/XBOzDGG7bqI/AAAAAAAAAss/NCcuvXSpWyMAovb4aWQOtxDOIgpnZK90ACLcBGAs/s1600/no-paste.png)no-repeat center center / 16px 16px;}#thumbImg{width:200px;height:220px;overflow:hidden;border:1px solid #ccc;border-radius:4px;box-shadow:0px 0px 4px #000;position:fixed;cursor:move;padding:0;margin:0;}#thumbImg div{font-family:Arial;font-size:12px;font-weight:400;height:20px;text-align:left;padding:2px 5px;width:100%;box-sizing:border-box;cursor:pointer;color:#ccc;transition:all 0.5s ease;}#thumbImg div:hover{color:#000;}#aboutMifet{font-family:Arial;font-size:12px;font-weight:600;width:250px;border:1px solid #ccc;border-radius:4px 4px 0 0;}.aboutMifet{padding:5px;border-radius:4px 4px 0 0;}#btnCloseAbout,#btnAction{-moz-box-shadow:inset 0px 1px 0px 0px #97c4fe;-webkit-box-shadow:inset 0px 1px 0px 0px #97c4fe;box-shadow:inset 0px 1px 0px 0px #97c4fe;background:-webkit-gradient(linear,left top,left bottom,color-stop(0.05,#3d94f6),color-stop(1,#1e62d0));background:-moz-linear-gradient(top,#3d94f6 5%,#1e62d0 100%);background:-webkit-linear-gradient(top,#3d94f6 5%,#1e62d0 100%);background:-o-linear-gradient(top,#3d94f6 5%,#1e62d0 100%);background:-ms-linear-gradient(top,#3d94f6 5%,#1e62d0 100%);background:linear-gradient(to bottom,#3d94f6 5%,#1e62d0 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#3d94f6',endColorstr='#1e62d0',GradientType=0);background-color:#3d94f6;-moz-border-radius:0px;-webkit-border-radius:0px;border-radius:0px;border:1px solid #337fed;display:inline-block;cursor:pointer;color:#ffffff;font-family:Arial;font-size:12px;font-weight:600;padding:4px;margin-top:2px;text-decoration:none;text-shadow:0px 1px 0px #1570cd;}#btnAction:hover, #btnCloseAbout:hover{background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #1e62d0), color-stop(1, #3d94f6));background:-moz-linear-gradient(top, #1e62d0 5%, #3d94f6 100%);background:-webkit-linear-gradient(top, #1e62d0 5%, #3d94f6 100%);background:-o-linear-gradient(top, #1e62d0 5%, #3d94f6 100%);background:-ms-linear-gradient(top, #1e62d0 5%, #3d94f6 100%);background:linear-gradient(to bottom, #1e62d0 5%, #3d94f6 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#1e62d0', endColorstr='#3d94f6',GradientType=0);background-color:#1e62d0;}#btnAction:active, #btnCloseAbout:active{position:relative;top:1px;}#btnAction{width:100%;text-align:left;}";
$("body").append("<style>"+createStyle+"</style>");
var createFormElement = "<div id='frmEncoder1' name='frmEncoder1'>";
createFormElement += "<div id='titleFormParser' class='titleFormParser'>Multiple Function Web Tools (MIFET) V.1.02 <span id='fileNameInfo'>|</span>";
createFormElement += "<span style='float:right;'>";
createFormElement += "<img id='minimizeBtn' src='https://3.bp.blogspot.com/-k-qs7U5kvkw/XCNsReS3ZSI/AAAAAAAAAtc/u4BuIBOwWzYiGjGYZF-aF4Nf7ymCuJvywCLcBGAs/s1600/minimize.png' border='0' title='Minimize' style='cursor:pointer;margin-right:10px;' onmouseover='this.style.background=\"darkgrey\"' onmouseout='this.style.background=\"none\"' onclick='$(\".numberedtextarea-wrapper\").toggle(\"slow\")'/>";
createFormElement += "<img id='windowBtn' src='https://4.bp.blogspot.com/-gm9ZIJil980/XCNsRVQ7PoI/AAAAAAAAAtU/H3UleXFW7sk1ckZzNFkXvBOvn_AhT4_pQCLcBGAs/s1600/maximize.png' border='0' title='Window' style='cursor:pointer;margin-right:10px;' onmouseover='this.style.background=\"darkgrey\"' onmouseout='this.style.background=\"none\"'/>";
createFormElement += "<img id='closeBtn' src='https://1.bp.blogspot.com/-vUJ5p873vyo/XCNsRRfwUZI/AAAAAAAAAtY/9RB1jLzR7ZMXz1g2hBiQyd1pyGIH500egCLcBGAs/s1600/close.png' border='0' title='Hide' style='cursor:pointer;margin-right:5px;' onmouseover='this.style.background=\"red\"' onmouseout='this.style.background=\"none\"' onclick=''/>";
createFormElement += "</span></div>";
createFormElement += "<div id='mainMenuBtn' class='mainMenuBtn'>";
createFormElement += "<div class='dropdown'>";
createFormElement += "<button class='dropbtn'>File</button>";
createFormElement += "<div class='dropdown-content'>";
createFormElement += "<a href='Javascript:newFileDoc();'>New</a>";
createFormElement += "<a href='Javascript:openFile();'>Open New File</a>";
createFormElement += "<a href='Javascript:openFileURL();' style='border-bottom:1px solid #ccc;'>Open URL</a>";
createFormElement += "<a href='Javascript:saveTextAsFile();'>Save</a>";
createFormElement += "<a href='Javascript:printTextArea();' style='border-bottom:1px solid #ccc;'>Print</a>";
createFormElement += "<a href='Javascript:getFileSize();' style='border-bottom:1px solid #ccc;'>Information</a>";
createFormElement += "<a href='Javascript:makeReadOnly();' id='readOnlyBtn' style='border-bottom:1px solid #ccc;'>Read Only</a></div></div>";
createFormElement += "<div class='dropdown'>";
createFormElement += "<button class='dropbtn'>Edit</button>";
createFormElement += "<div class='dropdown-content'>";
createFormElement += "<a href='Javascript:' id='undo1'>Undo</a>";
createFormElement += "<a href='Javascript:' id='redo1' style='border-bottom:1px solid #ccc;'>Redo</a>";
createFormElement += "<a href='Javascript:' onclick='cutToClipboard()'>Cut</a>";
createFormElement += "<a href='Javascript:' onclick='copyToClipboard()'>Copy</a>";
createFormElement += "<a href='Javascript:pasteToClipboard();' id='pasteclipboard1' style='border-bottom:1px solid #ccc;color:#ccc;'>Paste</a>";
createFormElement += "<a href='Javascript:deleteTextArea();' style='border-bottom:1px solid #ccc;'>Delete</a>";
createFormElement += "<a href='Javascript:slcWord();'>Select Next</a>";
createFormElement += "<a href='Javascript:slcSingleLine();'>Select Line</a>";
createFormElement += "<a href='Javascript:document.getElementById(\"txtInput\").select()' style='border-bottom:1px solid #ccc;'>Select All</a>";
createFormElement += "</div></div>";
createFormElement += "<div class='dropdown'>";
createFormElement += "<button class='dropbtn'>Insert</button>";
createFormElement += "<div class='dropdown-content'>";
createFormElement += "<a href='#' onclick=\"insertAtCaret('txtInput', '&lt;!-- Comment-Start --&gt;\\n\\n&lt;!-- Comment-End --&gt;\\n\');return false;\">Comment Html</a>";
createFormElement += "<a href='#' onclick='insertAtCaret(\"txtInput\", \"/* Comment */\");return false;' style='border-bottom:1px solid #ccc;'>Comment Code</a>";
createFormElement += "<a href='#' onclick='insertAtCaret(\"txtInput\", \"&lt;script&gt;\\n\\n&lt;/script&gt;\\n\");return false;'>Script Tag</a>";
createFormElement += "<a href='#' onclick='insertAtCaret(\"txtInput\", \"&lt;style&gt;\\n\\n&lt;/style&gt;\\n\");return false;'>Style Tag</a>";
createFormElement += "<a href='#' onclick=\"insertAtCaret(\'txtInput\', '&lt;img src=&quot;&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;');return false;\" style='border-bottom:1px solid #ccc;'>SEO Image Tag</a>";
createFormElement += "<a href='Javascript:' onclick='createHTML()' \">Create HTML</a>";
createFormElement += "</div></div>";
createFormElement += "<div class='dropdown'>";
createFormElement += "<button class='dropbtn'>Converter</button>";
createFormElement += "<div class='dropdown-content'>";
createFormElement += "<input id='chkDouble' name='chkDouble' type='checkbox'/><span id='txtChkD' onclick='document.getElementById(\"chkDouble\").click();'>Double Encoding</span>";
createFormElement += "<a href='Javascript:HTMLEncode();'>Code Parser</a>";
createFormElement += "<a href='Javascript:HTMLDecode();' style='border-bottom:1px solid #ccc;'>Un-Parser</a>";
createFormElement += "<a href='Javascript:writeOut();'>Obfuscator</a>";
createFormElement += "<a href='Javascript:decodeJS();' style='border-bottom:1px solid #ccc;'>DeObfuscator</a>";
createFormElement += "<a href='Javascript:encodePacker();'>Packer</a>";
createFormElement += "<a href='Javascript:decodePacker();'>UnPacker</a>";
createFormElement += "</div></div>";
createFormElement += "<div class='dropdown'>";
createFormElement += "<button class='dropbtn'>Tools</button>";
createFormElement += "<div class='dropdown-content'>";
createFormElement += "<a href='Javascript:stripSpaces();'>Strip Spaces</a>";
createFormElement += "<a href='Javascript:minifyJS();' style='border-bottom:1px solid #ccc;'>Minify Code</a>";
createFormElement += "<a href='Javascript:minifyCSS();'>Minify CSS</a>";
createFormElement += "<a href='Javascript:beautifyCSS();' style='border-bottom:1px solid #ccc;'>Beautify CSS</a>";
createFormElement += "<a href='Javascript:textHex();'>Text to Hex</a>";
createFormElement += "<a href='Javascript:hexText();' style='border-bottom:1px solid #ccc;'>Hex to Text</a>";
createFormElement += "<a href='Javascript:encodeBase64();'>Text to Base64</a>";
createFormElement += "<a href='Javascript:decodeBase64();' style='border-bottom:1px solid #ccc;'>Base64 to Text</a>";
createFormElement += "<a href='Javascript:generateNTLM();'>NTLM Hash</a>";
createFormElement += "</div></div>";
createFormElement += "<div class='dropdown'>";
createFormElement += "<button class='dropbtn'>Extra</button>";
createFormElement += "<div class='dropdown-content'>";
createFormElement += "<a href='Javascript:' onclick='var _tmpURL = $(\"#txtInput\").val();$(\"#txtInput\").val(encodeURIComponent(_tmpURL))'>URL Encoder</a>";
createFormElement += "<a href='Javascript:' onclick='var _tmpURL = $(\"#txtInput\").val();$(\"#txtInput\").val(decodeURIComponent(_tmpURL))' style='border-bottom:1px solid #ccc;'>URL Decoder</a>";
createFormElement += "<a href='Javascript:rotTotext();'>ROT13 Cypher</a>";
createFormElement += "<a href='Javascript:rotTotext();' style='border-bottom:1px solid #ccc;'>ROT13 DeCrypt</a>";
createFormElement += "<a href='Javascript:decodeMorseBool=false;morseCode();'>Morse Code</a>";
createFormElement += "<a href='Javascript:decodeMorseBool=true;morseCode();' style='border-bottom:1px solid #ccc;'>Morse DeCode</a>";
createFormElement += "<a href='Javascript:generatePassword();'>Password Maker</a>";
createFormElement += "</div></div>";
createFormElement += "<div class='dropdown'>";
createFormElement += "<button class='dropbtn'>Text Effect</button>";
createFormElement += "<div class='dropdown-content'>";
createFormElement += "<a href='Javascript:reversetext();'>Reverse Text</a>";
createFormElement += "<a href='Javascript:reversewords();'>Reverse Word</a>";
createFormElement += "<a href='Javascript:reversewordletters();'>Rev Each Word</a>";
createFormElement += "<a href='Javascript:flipupsidedown();' style='border-bottom:1px solid #ccc;'>Upside Down</a>";
createFormElement += "<a href='Javascript:titleCase();' style='border-bottom:1px solid #ccc;'>Title Case</a>";
createFormElement += "<a href='Javascript:textArt();'>Text Art</a>";
createFormElement += "</div></div>";
createFormElement += "<div class='dropdown'>";
createFormElement += "<button class='dropbtn'>Run</button>";
createFormElement += "<div class='dropdown-content'>";
createFormElement += "<a href='Javascript:tryRunScript();'>Try Run Script</a>";
createFormElement += "<a href='Javascript:tryRunCode();' style='border-bottom:1px solid #ccc;'>Try Run Code</a>";
createFormElement += "<a href='Javascript:tryRunHtml();' style='border-bottom:1px solid #ccc;'>Try Run HTML</a>";
createFormElement += "<a href='Javascript:tryGlink();'>G-Drive D-Link</a>";
createFormElement += "<a href='Javascript:trySearchGoogle();'>Search Google</a>";
createFormElement += "<a href='Javascript:tryTranslate();'>Translate</a>";
createFormElement += "</div></div>";
createFormElement += "<div class='dropdown'>";
createFormElement += "<button class='dropbtn'>Help</button>";
createFormElement += "<div class='dropdown-content'>";
createFormElement += "<a href='https://codeflare.blogspot.com/2018/12/mifet.html#howToUse'>How to Use</a>";
createFormElement += "<a href='Javascript:showAboutMifet();'>About</a>";
createFormElement += "<a href='Javascript:istallMifet();' style='border-bottom:1px solid #ccc;'>Install</a>";
createFormElement += "<a href='Javascript:' onclick='lightTheme()'>Light Theme</a>";
createFormElement += "<a href='Javascript:' onclick='darkTheme()'>Dark Theme</a>";
createFormElement += "</div></div></div>";
createFormElement += "<div class='mainMenuImgBtn'>";
createFormElement += "<button style='background:url(https://1.bp.blogspot.com/-a2tiKmjtpa0/XBG1cnAzJEI/AAAAAAAAApw/iwr46N4N2iMA_sDknfJKgxqZ1Jw-i_1KwCLcBGAs/s1600/new-file.png)no-repeat center center / 16px 16px' title='New File' onclick='newFileDoc()'></button>";
createFormElement += "<button style='background:url(https://2.bp.blogspot.com/-SeihLEuLRm4/XBG1ctzuZtI/AAAAAAAAAp0/N0uoxYtIzsU4trzxgEni6nB3x3wV57jtQCLcBGAs/s1600/open-folder.png)no-repeat center center / 16px 16px' title='Open New File' onclick='openFile()'></button>";
createFormElement += "<button style='background:url(https://3.bp.blogspot.com/-JVmxpmi1Mkk/XBG1cswD19I/AAAAAAAAAp4/JHNWnW_CntYKslk54yJiTv1CQxi1EcV0gCLcBGAs/s1600/open-url.png)no-repeat center center / 16px 16px' title='Open File from URL' onclick='openFileURL()'></button>";
createFormElement += "<button style='background:url(https://2.bp.blogspot.com/-tow3_T7e8SI/XBG1eDjJHsI/AAAAAAAAAqI/oAI0dol82qsLKMppvCJ_xuKbDtIkCxLtQCLcBGAs/s1600/save-file.png)no-repeat center center / 16px 16px' title='Save File' onclick='saveTextAsFile()'></button>";
createFormElement += "<button id='copytoclipboard' style='background:url(https://4.bp.blogspot.com/-6_xG7K0YjNw/XCot-3A9GXI/AAAAAAAAAug/ZAUmha9I37wDymy-IVqd8QwCf_vBouWIACLcBGAs/s1600/copy-icon.png)no-repeat center center / 16px 16px' title='Copy to Clipboard' onclick='copyToClipboard()'></button>";
createFormElement += "<button id='pasteclipboard' disabled title='Paste' onclick='pasteToClipboard()'></button>";
createFormElement += "<button style='background:url(https://1.bp.blogspot.com/-74D4F_2ohLY/XBG1doz5_sI/AAAAAAAAAqA/rJ-9wYg9D_Q9bARWbqrEucVbJZwdIT4pACLcBGAs/s1600/print.png)no-repeat center center / 16px 16px' title='Print File' onclick='printTextArea()'></button>";
createFormElement += "<button id='undo' title='Undo'></button>";
createFormElement += "<button id='redo' title='Redo'></button>";
createFormElement += "<button style='background:url(https://1.bp.blogspot.com/-Jkvjh-JZaG4/XBG1dlJvYzI/AAAAAAAAAp8/3eC5mlIq-U4DBE7SWVG_YGDouu75Y0opACLcBGAs/s1600/parse.png)no-repeat center center / 16px 16px' title='Parse Code' onclick='HTMLEncode()'></button>";
createFormElement += "<button style='background:url(https://1.bp.blogspot.com/-wbnkpDYUZtA/XBG1fHGdlqI/AAAAAAAAAqU/SxA3fNDrX8Avo4OlEIrnAIe1M2duRMlPACLcBGAs/s1600/unparse.png)no-repeat center center / 16px 16px' title='UnParse Code' onclick='HTMLDecode()'></button>";
createFormElement += "<button style='background:url(https://2.bp.blogspot.com/-tRiIwhcSJa0/XBG1xH0NhKI/AAAAAAAAAq0/kor-FPmQOhEkrnzDkY9YyawR0-sQgvLpACLcBGAs/s1600/minify-css.png)no-repeat center center / 16px 16px' title='Minify CSS' onclick='minifyCSS()'></button>";
createFormElement += "<button style='background:url(https://2.bp.blogspot.com/-taZsvXYPONQ/XCsR-3needI/AAAAAAAAAu8/ozuBU90Z1BoL2quwqKARrSWc1zUxoDfdgCLcBGAs/s1600/css.png)no-repeat center center / 16px 16px' title='Beautify CSS' onclick='beautifyCSS()'></button>";
createFormElement += "<button id='asciiArtBtn' style='display:none;background:url(https://1.bp.blogspot.com/-vgxrtjRuHHE/XBNqTy8_Q6I/AAAAAAAAAr0/mfX6VLZ0HEYrc4mkje8l2Y3b53gzk1vdQCLcBGAs/s1600/text-art.png)no-repeat center center / 16px 16px' title='ASCII Art' onclick='asciiMode()'></button></div>";
createFormElement += "<div id='inputFileMenu' class='mainMenuInputBtn' style='display:none;'><input type='file' id='file-input'/></div>";
createFormElement += "<textarea id='txtInput' name='txtInput' class='txtInput' rows='20' onkeyup='setActionBtn();' onmouseup='this.onkeyup();' onkeydown='tabControl(this,event);'></textarea>";
createFormElement += "<div id='frmBottomTxtArea' class='frmBottomTxtArea'>";
createFormElement += "<button id='curLine' class='infoBtmBtn' onclick='slcSingleLine()' title='Select Line' style='margin-right:2px;cursor:pointer;'>CurrentLine:  <span id='lineNo'>0</span></button>";
createFormElement += "<button id='posLine' class='infoBtmBtn' onclick='slcString()' title='Select String' style='margin-right:2px;cursor:pointer;'>Position: <span id='charNo'>0</span></button>";
createFormElement += "<button id='totLine' class='infoBtmBtn' onclick='slcToLine()' title='Select to Current' style='margin-right:2px;cursor:pointer;'>TotalLine: <span id='totalLineNo'>0</span></button>";
createFormElement += "<button id='chLine' class='infoBtmBtn' onclick='slcAllWord()' title='Select All' style='margin-right:2px;cursor:pointer;'>Character: <span id='charLineNo'>0</span></button>";
createFormElement += "<button id='wordLine' class='infoBtmBtn' onclick='slcWord()' title='Select Word' style='margin-right:2px;cursor:pointer;'>Word: <span id='wordLineNo'>0</span></button>";
createFormElement += "<button id='capBtn' class='infoBtmBtn' onclick='setCapital()' title='Case Converter' style='margin-right:2px;cursor:pointer;'>Caps: <span id='capState'>Off</span></button>";
createFormElement += "<button id='numBtn' class='infoBtmBtn' onclick='textBinary()' title='Binary Converter' style='margin-right:2px;cursor:pointer;'>Nums: <span id='numState'>Off</span></button>";
createFormElement += "<button id='btnAction'>Action: <span id='actionLineNo'>Please wait ! program still loading.</span></button></div></div>";
createFormElement += "<div id='aboutMifet' style='display:none;'></div>";
createFormElement += "<div id='btmTitle' class='titleFormParser' style='width:200px;opacity:1.0;cursor:pointer;text-align:center;position:fixed;bottom:-100;left:0;display:none;' onclick='hideFormWindow()'>Multiple Function Web Tools</div>";
$("#frmEncoder").append(createFormElement);
function tabControl (element, event){
if(event.keyCode==9 || event.which==9){
event.preventDefault();
if(document.getElementById("txtInput").style.whiteSpace=="normal"){document.getElementById("txtInput").style.whiteSpace="";}
var s = element.selectionStart;
element.value = element.value.substring(0,element.selectionStart) + "\t" + element.value.substring(element.selectionEnd);
element.selectionEnd = s+1;
}}
function newFileDoc(){
var tmpText=$('#txtInput').val();
if(tmpText==null||tmpText==""){clearAll();alert("New blank document");return;}
var saveChanges=confirm("Do you want to save changes ?");
if(saveChanges==true){saveTextAsFile();}else{
var tryChanges=confirm("Do you want empty text editor ?");
if(tryChanges==false){return;}
clearAll();
}}
var tmpSelectedCopy="";
function clearAll(){
if(showInstallMifet==true){makeReadOnly();}
if(document.getElementById("btnAction").hasAttribute("onclick")){document.getElementById("btnAction").setAttribute("onclick","")}
if(document.getElementById("asciiArtBtn").style.display!="none"){document.getElementById("asciiArtBtn").style.display="none"}
if($('#thumbImg')){$('#thumbImg, #thumbImgView1').remove();}
if($("#inputFileMenu").css({"display": "block"})){$("#inputFileMenu").css({"display": "none"});}
tmpSelectedCopy="";
$("#pasteclipboard").attr("disabled",true);$("#pasteclipboard1").css({"color":"#ccc"});
$('#txtInput').css({"word-wrap": ""});$('#txtInput').css({"white-space": ""});
$('#txtInput').val("");
dataFiles="";
tmpFileName="";
fileType="";
$("#fileNameInfo").html("|");
plainTxt="";
$('#btnAction').attr('onclick','');
setSelectionRange($("#txtInput")[0],0,0);
}
function openFile(){
var elm=document.getElementById('file-input');
if(elm && document.createEvent){
if(showInstallMifet==true){makeReadOnly();}
var evt=document.createEvent("MouseEvents");
evt.initEvent("click",true,false);
elm.dispatchEvent(evt);}}
var dataFiles="";
function readSingleFile(e){
var files;
e.stopPropagation();e.preventDefault();
if(dragndrop==true){files=e.dataTransfer.files;}
else{files=e.target.files;}
if(!files){return;}
var output=[];
for(var i=0,f;f=files[i];i++){
if(f.type.match('image.*')){
var reader=new FileReader();
reader.onload=(function(theFile){return function(e){
if($('#thumbImg')){$('#thumbImg, #thumbImgView1').remove();
$('#btnAction').attr('onclick','');}
var winWidth=$("#frmEncoder").width();
var position=$(".mainMenuImgBtn").position();
var dataImg=document.createElement('div');
dataImg.id="thumbImg";
if(winWidth <= 350){dataImg.style.cssText='position:relative;width:'+winWidth+'px;height:auto;margin-top:10px;';
}else{dataImg.style.cssText = 'top:'+(position.top + 35)+'px;left:'+(position.left+55)+'px;opacity:1.0;z-index:+99999999999999999999;';}
$("#frmEncoder").append(dataImg);
dataImg.innerHTML=['<div title="Close" onclick="$(\'#thumbImg\').hide(\'slow\')">thumb Image<span style="float:right;">X</span></div><center><img id="viewImg" src="', e.target.result, '" title="', escape(theFile.name), '"/></center>'].join('');
if(winWidth <= 350){$("#viewImg").css({"width": winWidth});}
else{$("#viewImg").css({"width": "200px","height": "200px"});dragElement(document.getElementById("thumbImg"));}
var dataImg1=document.createElement("div");
dataImg1.id="thumbImgView1";
dataImg1.style.cssText="position:absolute;top:0;left:0;display:none;";
$("#frmEncoder").append(dataImg1);
dataImg1.innerHTML='<img id="viewImg1" src="'+e.target.result+'"/>';
tmpFileName=escape(theFile.name);
fileType=theFile.type;
$("#fileNameInfo").html("| "+tmpFileName);
$('#btnAction').attr('onclick','$("#thumbImg").toggle("slow");');
$('#asciiArtBtn').show();
asciiBoolean=false;
$("#asciiArtBtn").css({"background":"url(https://1.bp.blogspot.com/-vgxrtjRuHHE/XBNqTy8_Q6I/AAAAAAAAAr0/mfX6VLZ0HEYrc4mkje8l2Y3b53gzk1vdQCLcBGAs/s1600/text-art.png)no-repeat center center / 16px 16px"});
$("#asciiArtBtn").prop('title','ASCII Art Encoding');};})(f);
reader.readAsDataURL(f);
document.getElementById('actionLineNo').innerHTML = "Please wait ! try randering image to text";
var myVar = setTimeout(asciiMode, 3000);
}else{$('#asciiArtBtn').hide();
if($('#thumbImg')){$('#thumbImg, #thumbImgView1').remove();$('#btnAction').attr('onclick','');}}
var reader=new FileReader();
reader.onload=function(e){var contents=e.target.result;$("#txtInput").val(contents);}
if(f.type.match('image.*')){reader.readAsDataURL(f);}else{reader.readAsText(f);}
output.push('File Name: ', escape(f.name), '\n', 'File Type: ', f.type || 'n/a', '\n', 'File Size: ', f.size/1000, ' Kb\nLast Modified: ', f.lastModifiedDate?f.lastModifiedDate.toLocaleDateString():'n/a');
dataFiles='  +++ File Information +++\n'+output.join('');
tmpFileName=escape(f.name);
fileType=f.type;
$("#fileNameInfo").html("| "+escape(f.name));
plainTxt=$("#txtInput").val();
$('#btnAction').attr('onclick','alert(dataFiles)');
$('#txtInput').css({"word-wrap":""});
$('#txtInput').css({"white-space":""});
}
if(showInstallMifet==true){makeReadOnly();}
dragndrop=false;
}
document.getElementById('file-input').addEventListener('change',readSingleFile,false);
var tmpFileName="";
var dragndrop=false;
var dropZone=document.getElementById('txtInput');
dropZone.addEventListener('dragover',handleDragOver,false);
dropZone.addEventListener('drop',readSingleFile,false);
function handleDragOver(evt){
evt.stopPropagation();
evt.preventDefault();
evt.dataTransfer.dropEffect='copy';
dragndrop=true;}
var asciiBoolean=false;
var tmpFileName1,tmpAscii,plainTxt,fileType;
function asciiMode(){
var setOff=false;
if(tmpFileName1 != tmpFileName){
if (document.getElementById("thumbImgView1").style.display=="none"){$("#thumbImgView1").show();setOff=true;}
$('#viewImg1').abc();
tmpAscii=$("#thumbImgView1").text();
plainTxt=$("#txtInput").val();
tmpFileName1=tmpFileName;
if(setOff==true){$('#thumbImgView1').remove();}}
if(asciiBoolean == false){$("#txtInput").val(tmpAscii);
if(document.getElementById("thumbImg").style.display=="none"){$("#thumbImg").show("slow");}
$("#asciiArtBtn").css({"background": "url(https://4.bp.blogspot.com/-yc5L7Dzw4Ns/XBNqTymiSOI/AAAAAAAAAr4/PmGI4LCp6ogvdbqBzDAD6Q-zdNMXOmoOwCLcBGAs/s1600/plain-text.png)no-repeat center center / 16px 16px"});
$("#asciiArtBtn").prop('title','Plain Text Encoding');
$('#txtInput').css({"word-wrap":"pre"});
$('#txtInput').css({"white-space":"pre"});
asciiBoolean=true;
}else{
$("#txtInput").val(plainTxt);
$("#asciiArtBtn").css({"background":"url(https://1.bp.blogspot.com/-vgxrtjRuHHE/XBNqTy8_Q6I/AAAAAAAAAr0/mfX6VLZ0HEYrc4mkje8l2Y3b53gzk1vdQCLcBGAs/s1600/text-art.png)no-repeat center center / 16px 16px"});
$("#asciiArtBtn").prop('title','ASCII Art Encoding');
$('#txtInput').css({"word-wrap":"break-word"});
$('#txtInput').css({"white-space":""});
asciiBoolean=false;}
setSelectionRange($("#txtInput")[0],0,0);
$("#txtInput").focus();
setActionBtn();
}
function openFileURL(){
var fileName=prompt('Open File From URL','http://domain.com/Untitled.txt');
if(fileName==null||fileName==""||fileName=='http://domain.com/Untitled.txt')
{return;}else{filenameWithExtension = fileName.replace(/^.*[\\\/]/,'');}
var fileExtension=fileName.replace(/^.*\./,'');var mime_type;
if(fileExtension=="txt"||fileExtension=="js"){mime_type = "text/csv";}
var winWidth=$(window).width();
if(winWidth<=800){window.open(fileName,"_blank")}
else{PopupCenter(fileName, "MIFET URL Opener", "600", "400");}
}
function PopupCenter(url, title, w, h) {
var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : window.screenX;
var dualScreenTop = window.screenTop != undefined ? window.screenTop : window.screenY;
var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;
var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;
var left = ((width / 2) - (w / 2)) + dualScreenLeft;
var top = ((height / 2) - (h / 2)) + dualScreenTop;
var newWindow = window.open(url, title, 'scrollbars=yes, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left + ',resizable=no,scrollbars=no,menubar=no,toolbar=no,status=no,location=no');
}
function saveTextAsFile(){
var fileName;
if (tmpFileName==""){fileName=prompt('Do you want to save changes to untitled ?','Untitled.txt');
if(!fileName){$('#actionLineNo').html("Data file save canceled !");return;}}
else{fileName=tmpFileName;}
if('Blob' in window){if (fileName){
var textToWrite=$('#txtInput').val();
textToWrite=textToWrite.replace(/\n/g,'\r\n');
var textFileAsBlob=new Blob([textToWrite],{type:fileType});
if('msSaveOrOpenBlob' in navigator){
navigator.msSaveOrOpenBlob(textFileAsBlob,fileName);
}else{var downloadLink=document.createElement('a');
downloadLink.download=fileName;downloadLink.innerHTML='Download File';
if('webkitURL' in window){
downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);
}else{
downloadLink.href=window.URL.createObjectURL(textFileAsBlob);
downloadLink.onclick=destroyClickedElement;
downloadLink.style.display='none';
document.body.appendChild(downloadLink);
}
if(downloadLink && document.createEvent){
var evt=document.createEvent("MouseEvents");
evt.initEvent("click",true,false);
downloadLink.dispatchEvent(evt);}
}}}else{alert('Your browser does not support the HTML5 Blob.');return;}
$('#actionLineNo').html("Data file saved !");
var tmpText = setTimeout(function(){tmpFileName=fileName;$("#fileNameInfo").html("| "+tmpFileName)},3000);
}
function destroyClickedElement(evt){document.body.removeChild(evt.target);}
function printTextArea(){
childWindow=window.open('','childWindow','location=yes,menubar=yes,toolbar=yes');
childWindow.document.open();
childWindow.document.write('<html><head></head><body>');
if(asciiBoolean==true){
childWindow.document.write('<style>body{white-space:pre;word-wrap:pre;font:14px "Courier New",Monospace;line-height:16px;}</style>');
}else{childWindow.document.write('<style>body{font:14px "Courier New",Monospace;line-height:16px;}</style>');}
childWindow.document.write(document.getElementById('txtInput').value.replace(/\n/gi, '<br>'));
childWindow.document.write('</body></html>');
childWindow.print();
childWindow.document.close();
childWindow.close();}
var tmpReadonly=false;
function makeReadOnly(){
if(tmpReadonly==false) {
document.getElementById("txtInput").setAttribute("readonly",true);
if(darkThemeBool==true){document.getElementById("txtInput").style.background="#000";}
else{document.getElementById("txtInput").style.background="#e9e9ce";}
document.getElementById("actionLineNo").innerHTML="Click here! back to edit mode";
document.getElementById("btnAction").setAttribute("onclick","makeReadOnly()");
disableBottomBtn();
tmpReadonly=true;
}else{
document.getElementById("txtInput").removeAttribute("readonly");
if(darkThemeBool==true){document.getElementById("txtInput").style.background="#606060";}
else{document.getElementById("txtInput").style.background="#fff";}
if(dataFiles!=""){document.getElementById('actionLineNo').innerHTML = "Show file information";}
else{document.getElementById("actionLineNo").innerHTML="Editor ready...";}
if(showInstallMifet==true||typeof textArtString){
$('#txtInput').val(tmpSelectedCopy);tmpSelectedCopy="";showInstallMifet=false;
setSelectionRange($("#txtInput")[0],0,0);}
document.getElementById("btnAction").setAttribute("onclick","");
enableBottomBtn();tmpReadonly=false;}}
function cutToClipboard(){
var position=$("#txtInput").prop('selectionStart');
var selected=getSelectedText(document.getElementById("txtInput"));
if($('#txtInput').val()==""){return;}
try{if (selected.length > 0){
$("#txtInput").focus();
document.execCommand("cut");
tmpSelectedCopy=selected;
}else{
$("#txtInput").select();
document.execCommand("cut");
tmpSelectedCopy=$("#txtInput").val();}
$('#actionLineNo').html("Data copied to clipboard !");
$("#pasteclipboard").attr("disabled",false);
setSelectionRange($("#txtInput")[0],position,position);
}catch(e){alert('Your browser does not support the HTML5 !');}}
function deleteTextArea(){
var position=$("#txtInput").prop('selectionStart');
var selected=getSelectedText(document.getElementById("txtInput"));
var elm=document.getElementById('txtInput');
var text=elm.value;
text=text.slice(0,elm.selectionStart)+text.slice(elm.selectionEnd);
elm.value=text;
setSelectionRange($("#txtInput")[0],position,position);
}
function pasteToClipboard(){
if(tmpSelectedCopy==null||tmpSelectedCopy==""){$("#pasteclipboard").attr("disabled", true);return;}
var position=$("#txtInput").prop('selectionStart');
var selected=getSelectedText(document.getElementById("txtInput"));
try{if (selected.length > 0){
deleteTextArea();
setSelectionRange($("#txtInput")[0],position,position);
insertAtCaret('txtInput', tmpSelectedCopy);
}else{
setSelectionRange($("#txtInput")[0],position,position);
insertAtCaret('txtInput',tmpSelectedCopy);
}
}catch(e){alert(e.message);}
$('#actionLineNo').html("Data paste to editor !");
}
function setSelectionRange(input,selectionStart,selectionEnd){
if(input.setSelectionRange){
input.focus();input.setSelectionRange(selectionStart,selectionEnd);
}else if(input.createTextRange){
var range=input.createTextRange();
range.collapse(true);
range.moveEnd('character',selectionEnd);
range.moveStart('character',selectionStart);
range.select();}}

function getSelectedText(elm){
if (typeof elm.selectionStart=="number"){
return elm.value.slice(elm.selectionStart,elm.selectionEnd);
}else if(typeof document.selection != "undefined"){
var range=document.selection.createRange();
if(range.parentElement()== elm){return range.text;}}
return "";}
function copyToClipboard(){
var position=$("#txtInput").prop('selectionStart');
var selected=getSelectedText(document.getElementById("txtInput"));
if($('#txtInput').val()==""){return;}
try{if (selected.length > 0){
$("#txtInput").focus();
document.execCommand("copy");
tmpSelectedCopy=selected;
}else{
$("#txtInput").select();
document.execCommand("copy");
tmpSelectedCopy=$("#txtInput").val();
}$('#actionLineNo').html("Data copied to clipboard !");
$("#pasteclipboard").attr("disabled",false);
$("#pasteclipboard1").css({"color":"#000"});
}catch(e){alert('Your browser does not support the HTML5 !');}
}

function getFileSize(){
var tmpText="+++ MIFET Editor Information +++\n";
if(tmpFileName==null||tmpFileName==""){
alert(tmpText+"FileName: Untitled\nFileSize : "+roundNumber(countUtf8($("#txtInput").val()) / 1024, 2)+" Kilobytes\nFileType: Text/utf-8");
}
else{
alert(tmpText+"FileName: "+tmpFileName+"\nFileSize : "+roundNumber(countUtf8($("#txtInput").val()) / 1024, 2)+" Kilobytes\nFileType: Text/utf-8");
}}

function roundNumber(number, digits) {
var multiple = Math.pow(10, digits);
var rndedNum = Math.round(number * multiple) / multiple;
return rndedNum;
}

function fixedCharCodeAt(str, idx) {
idx = idx || 0;
var code = str.charCodeAt(idx);
var hi, low;
if (0xD800 <= code && code <= 0xDBFF) {
hi = code;
low = str.charCodeAt(idx + 1);
if (isNaN(low)) {
throw 'Kein gÃ¼ltiges Schriftzeichen oder Speicherfehler!';
}
return ((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000;
}if (0xDC00 <= code && code <= 0xDFFF) {
return false;
}return code;}

function countUtf8(str) {
var result = 0;
for (var n = 0; n < str.length; n++) {
var charCode = fixedCharCodeAt(str, n);
if (typeof charCode === "number") {
if (charCode < 128) {
result = result + 1;
} else if (charCode < 2048) {
result = result + 2;
} else if (charCode < 65536) {
result = result + 3;
} else if (charCode < 2097152) {
result = result + 4;
} else if (charCode < 67108864) {
result = result + 5;
} else { result = result + 6;
}}}return result;}

function setCapital(){
var confirmAction;
var position=$("#txtInput").prop('selectionStart');
var selected=getSelectedText(document.getElementById("txtInput"));
if($('#txtInput').val()==""){return;}
var text="";
try{if (selected.length > 0){
if(document.getElementById("capState").innerHTML=="ON"){text=selected.toUpperCase();}
else{text=selected.toLowerCase();}
deleteTextArea();
setSelectionRange($("#txtInput")[0],position,position);
insertAtCaret('txtInput', text);
}else{
tmpSelectedCopy=$("#txtInput").val();
$("#txtInput").select();
selected=getSelectedText(document.getElementById("txtInput"));
if(document.getElementById("capState").innerHTML=="ON"){
confirmAction=confirm("Do you want to change all text to upper case ?");
if(confirmAction==false){setSelectionRange($("#txtInput")[0],position,position);return;}
text=selected.toUpperCase();}
else{confirmAction=confirm("Do you want to change all text to lower case ?");
if(confirmAction==false){setSelectionRange($("#txtInput")[0],position,position);return;}
text=selected.toLowerCase();}
deleteTextArea();
setSelectionRange($("#txtInput")[0],0,0);
insertAtCaret('txtInput', text);
setSelectionRange($("#txtInput")[0],position,position);
}
}catch(e){alert(e.message);}}

function textHex(){
var position=$("#txtInput").prop('selectionStart');
var selected=getSelectedText(document.getElementById("txtInput"));
if($('#txtInput').val()==""){return;}
var text="";
try{if (selected.length > 0){
deleteTextArea();
for (var i = 0; i < selected.length; i++) text += "" + selected.charCodeAt(i).toString(16);
setSelectionRange($("#txtInput")[0],position,position);
insertAtCaret('txtInput', text);
}else{
confirmAction=confirm("Do you want to change all text to hex ASCII ?");
if(confirmAction==false){setSelectionRange($("#txtInput")[0],position,position);return;}
minifyJS();
selected = $('#txtInput').val();
$("#txtInput").select();
deleteTextArea();
for (var t = 0; t < selected.length; t++) text += "" + selected.charCodeAt(t).toString(16);
setSelectionRange($("#txtInput")[0],0,0);
insertAtCaret('txtInput', text);
}
}catch(e){alert(e.message);}
}

function hexText(){
var position=$("#txtInput").prop('selectionStart');
var selected=getSelectedText(document.getElementById("txtInput"));
if($('#txtInput').val()==""){return;}
var text="";
try{if (selected.length > 0){
deleteTextArea();
for (var i = 0; i < selected.length; i += 2) text += String.fromCharCode(parseInt(selected.substr(i, 2), 16));
setSelectionRange($("#txtInput")[0],position,position);
insertAtCaret('txtInput', text);
}else{
confirmAction=confirm("Do you want to change all hex ASCII to Text ?");
if(confirmAction==false){setSelectionRange($("#txtInput")[0],position,position);return;}
selected = $('#txtInput').val();
$("#txtInput").select();
deleteTextArea();
for (var i = 0; i < selected.length; i += 2) text += String.fromCharCode(parseInt(selected.substr(i, 2), 16));
setSelectionRange($("#txtInput")[0],0,0);
insertAtCaret('txtInput', text);
}
}catch(e){alert(e.message);}
}

function padding_left(e, a, t) {
if (!e || !a || e.length >= t) return e;
for (var r = (t - e.length) / a.length, i = 0; i < r; i++) e = a + e;
return e
}

function textBinary(){
var position=$("#txtInput").prop('selectionStart');
var selected=getSelectedText(document.getElementById("txtInput"));
if($('#txtInput').val()==""){return;}
var text="";
try{if (selected.length > 0){
if(document.getElementById("numState").innerHTML=="ON"){
var e, a, t = selected,r = [],text = "";
for (e = 0; e < t.length; e++) r.push(t[e].charCodeAt(0).toString(2));
for (a = 0; a < r.length; a++) {text += padding_left(r[a], "0", 8) + " "}
deleteTextArea();
setSelectionRange($("#txtInput")[0],position,position);
insertAtCaret('txtInput', text);
}else{
var e = selected,text = "";
if((e = e.replace(/\s/g, "")).length % 8 != 0){text = "???:";}
else{
for (; 0 < e.length;) {
var t = e.substring(0, 8);
e = e.substring(8);
var r = parseInt(t, 2);
text += String.fromCharCode(r)
}}
deleteTextArea();
setSelectionRange($("#txtInput")[0],position,position);
insertAtCaret('txtInput', text);
}
}else{
if(document.getElementById("numState").innerHTML=="ON"){
tmpSelectedCopy=$("#txtInput").val();
$("#txtInput").select();
selected=getSelectedText(document.getElementById("txtInput"));
var e, a, t = selected,r = [],text = "";
for (e = 0; e < t.length; e++) r.push(t[e].charCodeAt(0).toString(2));
for (a = 0; a < r.length; a++) {text += padding_left(r[a], "0", 8) + " "}
deleteTextArea();
setSelectionRange($("#txtInput")[0],0,0);
insertAtCaret('txtInput', text);
}else{
tmpSelectedCopy=$("#txtInput").val();
$("#txtInput").select();
selected=getSelectedText(document.getElementById("txtInput"));
var e = selected,text = "";
var f=e.split(/\s+/);
for (var i=0;i < f.length;i++){
if(f[i] === undefined || f[i].length == 0){text += f[i];}
else{
if(f[i].length % 8 == 0){text += String.fromCharCode(parseInt(f[i], 2));}else{text += f[i]+" ";}
}}
deleteTextArea();
setSelectionRange($("#txtInput")[0],0,0);
insertAtCaret('txtInput', text);
}}
}catch(e){alert(e.message);}}

function slcString(){
var input = document.getElementById("txtInput");
if (input.value == null || input.value == ""){alert("Document Empty !");return;}
var caret = input.selectionStart;
var text = input.value;
var begin = caret;
while (begin >= 0){
if (text.charAt(begin).match(/["']/)){break;}
else {begin--;}
}
while (caret >= begin) {
if (text.charAt(caret).match(/["']/)||caret == input.value.length){break;}
else {caret++;}
}
if(document.getElementById("txtInput").value!=""&&tmpReadonly==false){
document.getElementById('actionLineNo').innerHTML = "Select string - Click to copy";
$('#btnAction').attr('onclick','copyToClipboard()');}
setSelectionRange(input, begin+1, caret);
}
function slcWord(){
var input = document.getElementById("txtInput");
if (input.value == null || input.value == ""){alert("Document Empty !");return;}
var caret = input.selectionStart;
var text = input.value;
var begin = caret;
while (begin >= 0) {
if (text.charAt(begin).match(/[^\w\s\n]/)){break;}
else {begin--;}
}
while (caret >= begin) {
if (text.charAt(caret).match(/[^\w\s\n]/)||caret == input.value.length){break;}
else {caret++;}
}
if(document.getElementById("txtInput").value!=""&&tmpReadonly==false){
document.getElementById('actionLineNo').innerHTML = "Try search selected text ?";
$('#btnAction').attr('onclick','trySearchGoogle()');}
setSelectionRange(input, begin+1, caret);
}
function slcAllWord(){
var tmpCode=document.getElementById("txtInput").value;
if (tmpCode == null || tmpCode == ""){alert("Document Empty !");return;}
document.getElementById('actionLineNo').innerHTML = "Select all text - Click to copy";
$("#btnAction").attr("onclick","copyToClipboard()");
$("#txtInput").focus();
$("#txtInput").select();
}
function slcSingleLine(){
var tmpCode=document.getElementById("txtInput").value;
if (tmpCode == null || tmpCode == ""){alert("Document Empty !");return;}
document.getElementById('actionLineNo').innerHTML = "Select single line - Click to copy";
$("#btnAction").attr("onclick","copyToClipboard()");
var input = document.getElementById("txtInput");
selectTextareaLine(input.value.substr(0, input.selectionStart).split("\n").length);
}
function slcToLine(){
var tmpCode=document.getElementById("txtInput").value;
if (tmpCode == null || tmpCode == ""){alert("Document Empty !");return;}
document.getElementById('actionLineNo').innerHTML = "Select From Line - Click to copy";
$("#btnAction").attr("onclick","copyToClipboard()");
setSelectionRange($("#txtInput")[0],0,parseInt($("#charNo").text()));
}
function selectTextareaLine(lineNum){
input=document.getElementById("txtInput");lineNum--;
var lines=input.value.split("\n");
var startPos=0,
endPos=input.value.length;
for(var x=0;x<lines.length;x++){
if(x==lineNum){break;}
startPos+=(lines[x].length+1);}
var endPos=lines[lineNum].length+startPos;
if(typeof(input.selectionStart)!= "undefined"){
input.focus();input.selectionStart=startPos;
input.selectionEnd=endPos;return true;}
if(document.selection&&document.selection.createRange){
input.focus();input.select();
var range=document.selection.createRange();
range.collapse(true);
range.moveEnd("character",endPos);
range.moveStart("character",startPos);
range.select();return true;}
return false;}

function insertAtCaret(areaId,text){
var txtarea=document.getElementById(areaId);
if(!txtarea){return;}
var scrollPos=txtarea.scrollTop;
var strPos=0;
var br=((txtarea.selectionStart||txtarea.selectionStart=='0')?"ff":(document.selection ? "ie" : false));
if (br=="ie"){txtarea.focus();
var range=document.selection.createRange();
range.moveStart('character',-txtarea.value.length);
strPos=range.text.length;
}else if(br == "ff"){strPos = txtarea.selectionStart;}
var front=(txtarea.value).substring(0,strPos);
var back=(txtarea.value).substring(strPos,txtarea.value.length);
txtarea.value=front+text+back;
strPos=strPos+text.length;
if(br=="ie"){txtarea.focus();
var ieRange=document.selection.createRange();
ieRange.moveStart('character',-txtarea.value.length);
ieRange.moveStart('character',strPos);
ieRange.moveEnd('character',0);
ieRange.select();
}else if(br=="ff"){
txtarea.selectionStart=strPos;
txtarea.selectionEnd=strPos;
txtarea.focus();}
txtarea.scrollTop=scrollPos;}

function setActionBtn(){
var txtInfo=document.getElementById('txtInput');
document.getElementById('lineNo').innerHTML=txtInfo.value.substr(0,txtInfo.selectionStart).split("\n").length;
document.getElementById('charNo').innerHTML=txtInfo.selectionStart;
document.getElementById('totalLineNo').innerHTML=txtInfo.value.replace(/^\s*[\r\n]/gm,"").split(/\r|\r\n|\n/).length;
document.getElementById('charLineNo').innerHTML=txtInfo.value.length;
document.getElementById('wordLineNo').innerHTML=(txtInfo.value == '')?0:txtInfo.value.split(' ').length;
if(dataFiles==""&&showInstallMifet==false&&tmpReadonly==false||dataFiles!=""&&document.getElementById("txtInput").value==""&&typeof textArtString=="undefined"){
document.getElementById("btnAction").setAttribute("onclick","getFileSize()");
document.getElementById('actionLineNo').innerHTML = "Editor ready...";
}
if(dataFiles!=""&&showInstallMifet==false&&tmpReadonly==false&&document.getElementById("txtInput").value!=""&&typeof textArtString=="undefined"){
document.getElementById("btnAction").setAttribute("onclick","alert(dataFiles)");
document.getElementById("actionLineNo").innerHTML = "Show file information";
}
if(tmpReadonly==true&&typeof textArtString=="undefined"){
document.getElementById("btnAction").setAttribute("onclick","makeReadOnly()");
}
if(typeof textArtString&&tmpReadonly==true){
document.getElementById("actionLineNo").innerHTML = "Click here! back to edit mode";
document.getElementById("btnAction").setAttribute("onclick","clearTextArt()");}
}
document.addEventListener('keydown', function(event) {
var caps = event.getModifierState && event.getModifierState('CapsLock');
if(caps){document.getElementById("capState").innerHTML="ON";
document.getElementById("capBtn").style.background="red";
document.getElementById("capBtn").style.color="#fff";
}
else{document.getElementById("capState").innerHTML="Off";
if(darkThemeBool==true){
document.getElementById("capBtn").style.background="#000";
document.getElementById("capBtn").style.color="#fff";
}else{
document.getElementById("capBtn").style.background="#f4f4f4";
document.getElementById("capBtn").style.color="#000";
}} 
var nums = event.getModifierState && event.getModifierState('NumLock');
if(nums){document.getElementById("numState").innerHTML="ON";
document.getElementById("numBtn").style.background="red";
document.getElementById("numBtn").style.color="#fff";
}else{document.getElementById("numState").innerHTML="Off";
if(darkThemeBool==true){
document.getElementById("numBtn").style.background="#000";
document.getElementById("numBtn").style.color="#fff";
}else{
document.getElementById("numBtn").style.background="#f4f4f4";
document.getElementById("numBtn").style.color="#000";
}}
});
function beautifyCSS(){
var beaut_input=$('#txtInput').val();
var beaut_output=cssbeautify(beaut_input,{
indent: '    ',
openbrace: 'end-of-line',
autosemicolon: true});
$('#txtInput').css({"word-wrap": "pre"});
$('#txtInput').css({"white-space": "pre"});
$('#txtInput').val(beaut_output);}

function stripSpaces() {
var tmpCode=$("#txtInput").val();
$("#txtInput").val(tmpCode.replace(/[\r\n]\s*/g, '\n').replace(/\s*\=\s*/g, '=').replace(/\s*\;/g, ';').replace(/\s*\{\s*/g, '{').replace(/\s*\}\s*/g, '}').replace(/\s*\,\s*/g, ',').replace(/\s*\:\s*/g, ':').replace(/\s*\+\s*/g, '+').replace(/\s*\-\s*/g, '-').replace(/\s*\(\s*/g, '(').replace(/\s*\)\s*/g, ')').replace(/\s*\?\s*/g, '?').replace(/\s*\<\s*/g, '<').replace(/\s*\>\s*/g, '>'));
}

function minifyJS(){
var input=$('#txtInput').val();
var output = input.replace(/\/\*.*\*\/|\/\*[\s\S]*?\*\/|\n|\t|\v|\s{2,}/g, ' ').replace(/\s*\{\s*/g, '{').replace(/\s*\}\s*/g, '}').replace(/\s*\:\s*/g, ':').replace(/\s*\;\s*/g, ';').replace(/\s*\,\s*/g, ',').replace(/\s*\~\s*/g, '~').replace(/\s*\>\s*/g, '>').replace(/\s*\+\s*/g, '+').replace(/\s*\!\s*/g, ' !');
$('#txtInput').css({"word-wrap": "break-word"});
$('#txtInput').css({"white-space": ""});
$('#txtInput').val(output);
}

function minifyCSS(){
var input=$('#txtInput').val();
var output = input.replace(/\/\*.*\*\/|\/\*[\s\S]*?\*\/|\n|\t|\v|\s{2,}/g, '').replace(/\s*\{\s*/g, '{').replace(/\s*\}\s*/g, '}').replace(/\s*\:\s*/g, ':').replace(/\s*\;\s*/g, ';').replace(/\s*\,\s*/g, ',').replace(/\s*\~\s*/g, '~').replace(/\s*\>\s*/g, '>').replace(/\s*\+\s*/g, '+').replace(/\s*\!\s*/g, ' !');
$('#txtInput').css({"word-wrap": "break-word"});
$('#txtInput').css({"white-space": ""});
$('#txtInput').val(output);
}

(function() {'use strict';
function cssbeautify(style,opt){
var options, index = 0,
length = style.length,
blocks, formatted = '',
ch, ch2, str, state, State, depth, quote, comment,
openbracesuffix = true,
autosemicolon = false,
trimRight;
options = arguments.length > 1 ? opt : {};
if (typeof options.indent === 'undefined'){
options.indent = '    ';}
if (typeof options.openbrace === 'string'){
openbracesuffix = (options.openbrace === 'end-of-line');}
if (typeof options.autosemicolon === 'boolean'){
autosemicolon = options.autosemicolon;}
function isWhitespace(c){return (c === ' ') || (c === '\n') || (c === '\t') || (c === '\r') || (c === '\f');}
function isQuote(c){return (c === '\'') || (c === '"');}
function isName(c){return (ch >= 'a' && ch <= 'z') || (ch >= 'A' && ch <= 'Z') || (ch >= '0' && ch <= '9') || '-_*.:#[]'.indexOf(c) >= 0;}
function appendIndent(){var i;for (i = depth; i > 0; i -= 1){formatted += options.indent;}}
function openBlock(){formatted = trimRight(formatted);
if(openbracesuffix){formatted += ' {';}else{formatted += '\n';appendIndent();formatted += '{';}
if(ch2 !== '\n'){formatted += '\n';}depth += 1;}
function closeBlock(){var last;depth -= 1;formatted = trimRight(formatted);
if(formatted.length > 0 && autosemicolon){last = formatted.charAt(formatted.length - 1);
if(last !== ';' && last !== '{'){formatted += ';';}}
formatted += '\n';appendIndent();formatted += '}';blocks.push(formatted);formatted = '';}
if(String.prototype.trimRight){trimRight = function(s){return s.trimRight();};
}else{trimRight = function(s){return s.replace(/\s+$/, '');};}
State={Start: 0,AtRule: 1,Block: 2,Selector: 3,Ruleset: 4,Property: 5,Separator: 6,Expression: 7,URL: 8};
depth=0;state = State.Start;comment = false;blocks = [];style = style.replace(/\r\n/g, '\n');
while(index < length){
ch=style.charAt(index);
ch2=style.charAt(index + 1);
index+=1;
if(isQuote(quote)){formatted+=ch;if(ch===quote){quote=null;}
if(ch==='\\'&&ch2===quote){formatted+=ch2;index+=1;}continue;}
if(isQuote(ch)){formatted+=ch;quote=ch;continue;}
if(comment){formatted+=ch;if(ch==='*'&&ch2==='/'){comment=false;formatted+=ch2;index+=1;}continue;}
if(ch==='/'&&ch2==='*'){comment=true;formatted+=ch;formatted+=ch2;index+=1;continue;}
if(state===State.Start){if(blocks.length===0){
if(isWhitespace(ch)&&formatted.length===0){continue;}}
if(ch<=' '||ch.charCodeAt(0)>=128){state=State.Start;formatted+=ch;continue;}
if(isName(ch)||(ch==='@')){str=trimRight(formatted);if(str.length===0){
if(blocks.length>0){formatted='\n\n';}
}else{if(str.charAt(str.length-1)==='}'||str.charAt(str.length-1)===';'){formatted=str+'\n\n';
}else{
while(true){ch2=formatted.charAt(formatted.length-1);
if(ch2!==' '&&ch2.charCodeAt(0)!==9){break;}
formatted=formatted.substr(0,formatted.length-1);}}}
formatted+=ch;state=(ch==='@')?State.AtRule:State.Selector;continue;}}
if(state===State.AtRule){if(ch===';'){formatted+=ch;state=State.Start;continue;}
if(ch==='{'){str=trimRight(formatted);openBlock();
state=(str==='@font-face')?State.Ruleset:State.Block;continue;}
formatted+=ch;continue;}
if(state===State.Block){if(isName(ch)){
str=trimRight(formatted);
if(str.length===0){if(blocks.length>0){formatted = '\n\n';}
}else{
if(str.charAt(str.length-1)==='}'){
formatted=str+'\n\n';
}else{
while(true){
ch2=formatted.charAt(formatted.length-1);
if(ch2!==' '&&ch2.charCodeAt(0)!==9){break;}
formatted=formatted.substr(0,formatted.length-1);}}}
appendIndent();
formatted+= ch;
state=State.Selector;continue;}
if(ch==='}'){closeBlock();state=State.Start;continue;}
formatted+=ch;continue;}
if(state===State.Selector){
if(ch==='{'){openBlock();state=State.Ruleset;continue;}
if (ch === '}'){closeBlock();state = State.Start;continue;}
formatted+=ch;continue;}
if (state === State.Ruleset){if (ch === '}'){closeBlock();state = State.Start;
if (depth > 0) {state = State.Block;}continue;}
if (ch === '\n') {formatted = trimRight(formatted);formatted += '\n';continue;}
if (!isWhitespace(ch)) {formatted = trimRight(formatted);formatted += '\n';appendIndent();
formatted += ch;state = State.Property;continue;}
formatted += ch;continue;}
if (state === State.Property) {if (ch === ':') {formatted = trimRight(formatted);
formatted += ': ';state = State.Expression;if (isWhitespace(ch2)){state = State.Separator;}continue;}
if (ch === '}') {closeBlock();state = State.Start;if (depth > 0) {state = State.Block;}continue;}
formatted += ch;continue;}
if (state === State.Separator) {if (!isWhitespace(ch)) {formatted += ch;state = State.Expression;continue;}
if (isQuote(ch2)) {state = State.Expression;}continue;}
if (state === State.Expression) {if (ch === '}') {closeBlock();state = State.Start;if (depth > 0) {state = State.Block;}
continue;}
if (ch === ';') {formatted = trimRight(formatted);formatted += ';\n';state = State.Ruleset;continue;}
formatted += ch;if (ch === '(') {
if (formatted.charAt(formatted.length - 2) === 'l' && formatted.charAt(formatted.length - 3) === 'r' && formatted.charAt(formatted.length - 4) === 'u') {
state = State.URL;continue;}}continue;}
if (state === State.URL) {if (ch === ')' && formatted.charAt(formatted.length - 1 !== '\\')) {
formatted += ch;state = State.Expression;continue;}}
formatted += ch;}
formatted = blocks.join('') + formatted;return formatted;}
if (typeof exports !== 'undefined') {module.exports = exports = cssbeautify;} else if (typeof window === 'object') {
window.cssbeautify = cssbeautify;}}());

function trySearchGoogle(){
var tmpCode = $("#txtInput").val();
if (tmpCode == null || tmpCode == ""){
alert("Document Empty !");
return;}
var position = $("#txtInput").prop('selectionStart');
var selected = getSelectedText(document.getElementById("txtInput"));
try {
if (selected.length > 0) {
$("#txtInput").focus();
tmpCode = selected;
} else {
$("#txtInput").select();
tmpCode = $("#txtInput").val();
}
window.open('https://www.google.com/search?q=' + tmpCode, "_blank");
}catch(err){alert(err.message);}
}

function tryTranslate() {
var tmpCode = $("#txtInput").val();
if (tmpCode == null || tmpCode == "") {
alert("Document Empty !");
return;
}
var position = $("#txtInput").prop('selectionStart');
var selected = getSelectedText(document.getElementById("txtInput"));
try {
if (selected.length > 0) {
$("#txtInput").focus();
tmpCode = selected;
} else {
$("#txtInput").select();
tmpCode = $("#txtInput").val();
}
window.open('https://translate.google.co.id/?view=home&op=translate&sl=auto&tl=en&text=' + tmpCode, "_blank");
}catch(err){alert(err.message);}
}

function tryGlink(){
var gurl = $('#txtInput').val();
if(gurl==""){return;}
try{
var result = gurl.replace(/https:\/\/drive\.google\.com\/file\/d\/(.*?)\/.*?\?usp=sharing/g, "https://drive.google.com/uc?export=download&id=$1");
$('#txtInput').val(result);
if(result != gurl){document.getElementById("actionLineNo").innerHTML="Google drive download link converted";}
}catch(err){err.message}
}

function tryRunCode() {
var tmpCode = $("#txtInput").val();
if (tmpCode == null || tmpCode == ""){alert("Document Empty !");return;}
childWindow = window.open('', 'childWindow', 'location=yes, menubar=yes, toolbar=yes');
childWindow.document.open();
childWindow.document.write('<!DOCTYPE html>\n<html lang="en">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>\n<title>Multiple Function Web Tools (MIFET)</title>\n<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"><\/script>\n<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"><\/script>\n</head>\n<body>');
childWindow.document.write(tmpCode);
childWindow.document.write('\n</body>\n</html>');
childWindow.document.close();
}
function tryRunScript() {
var tmpCode = $("#txtInput").val();
if (tmpCode == null || tmpCode == ""){alert("Document Empty !");return;}
childWindow = window.open('', 'childWindow', 'location=yes, menubar=yes, toolbar=yes');
childWindow.document.open();
childWindow.document.write('<!DOCTYPE html>\n<html lang="en">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>\n<title>Multiple Function Web Tools (MIFET)</title>\n<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"><\/script>\n<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"><\/script>\n</head>\n<body>\n<script>');
childWindow.document.write('try {\n'+tmpCode+'\n}catch(err){alert(err.message);}');
childWindow.document.write('\n<\/script>\n</body>\n</html>');
childWindow.document.close();
}
function tryRunHtml() {
var tmpCode = $("#txtInput").val();
if (tmpCode == null || tmpCode == ""){alert("Document Empty !");return;}
childWindow = window.open('', 'childWindow', 'location=yes, menubar=yes, toolbar=yes');
childWindow.document.open();
childWindow.document.write(tmpCode);
childWindow.document.close();
}
window.addEventListener("resize", centerMifet);
function centerMifet() {
if(winChangeBool==true){
document.getElementById("frmEncoder1").onmousedown="";
$("#frmEncoder1").css({"position":"relative","top":"0","left":"0","width":"100%"});
$("#titleFormParser").css({"cursor":"default"});
$('#txtInput').css({"width":"100%"});
document.getElementById("fileNameInfo").style.display="";
winChangeBool=false;
}
var tmpWidth = $("#mainMenuBtn").width();
$("#txtInput").width(tmpWidth - 56);
}
String.prototype.swapcase = function() {
var toswap = this;
var toswaplen = toswap.length;
var uplet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
var lolet = 'abcdefghijklmnopqrstuvwxyz';
word = toswap.split('');
wordlen = word.length;
var first = word[0];
var last = word[wordlen - 1];
if (uplet.indexOf(first) == -1) upperc = 0;
else upperc = 1;
if (lolet.indexOf(last) == -1) lowerc = 0;
else lowerc = 1;
if (upperc + lowerc == 2) {
toswap = toswap.split('');
toswap = toswap.slice(1, toswaplen - 1);
toswap.unshift(first.toLowerCase());
toswap.push(last.toUpperCase());
toswap = toswap.join('');
return toswap;
} else return toswap;
}

function reversetext() {
var text = $("#txtInput").val();
text = text.replace(/\r\n/g, '\n');
text = text.replace(/\(/g, '  (  ');
text = text.replace(/\)/g, '  )  ');
text = text.replace(/\[/g, '  [  ');
text = text.replace(/\]/g, '  ]  ');
text = text.replace(/\{/g, '  {  ');
text = text.replace(/\}/g, '  }  ');
text = text.replace(/\</g, '  <  ');
text = text.replace(/\>/g, '  >  ');
text = text.split('').reverse().join('');
text = text.replace(/  \(  /g, ')');
text = text.replace(/  \)  /g, '(');
text = text.replace(/  \[  /g, ']');
text = text.replace(/  \]  /g, '[');
text = text.replace(/  \{  /g, '}');
text = text.replace(/  \}  /g, '{');
text = text.replace(/  \<  /g, '>');
text = text.replace(/  \>  /g, '<');
$("#txtInput").val(text);
}

function reversewords() {
var text = $("#txtInput").val();
text = text.replace(/\r\n/g, '\n');
text = text.replace(/\./g, '  .  ');
text = text.replace(/\,/g, '  ,  ');
text = text.replace(/\?/g, '  ?  ');
text = text.replace(/\!/g, '  !  ');
text = text.replace(/\:/g, '  :  ');
text = text.replace(/\;/g, '  ;  ');
text = text.replace(/\(/g, '  (  ');
text = text.replace(/\)/g, '  )  ');
text = text.replace(/\[/g, '  [  ');
text = text.replace(/\]/g, '  ]  ');
text = text.replace(/\{/g, '  {  ');
text = text.replace(/\}/g, '  }  ');
text = text.replace(/\</g, '  <  ');
text = text.replace(/\>/g, '  >  ');
text = text.replace(/\"/g, ' \" ');
text = text.replace(/\|/g, ' | ');
text = text.replace(/\n/g, ' \n ').split(' ').reverse().join(' ').replace(/ \n /g, '\n');
text = text.replace(/  \.  /g, '.');
text = text.replace(/  \,  /g, ',');
text = text.replace(/  \?  /g, '?');
text = text.replace(/  \!  /g, '!');
text = text.replace(/  \:  /g, ':');
text = text.replace(/  \;  /g, ';');
text = text.replace(/  \(  /g, ')');
text = text.replace(/  \)  /g, '(');
text = text.replace(/  \[  /g, ']');
text = text.replace(/  \]  /g, '[');
text = text.replace(/  \{  /g, '}');
text = text.replace(/  \}  /g, '{');
text = text.replace(/  \<  /g, '>');
text = text.replace(/  \>  /g, '<');
text = text.replace(/ \" /g, '\"');
text = text.replace(/ \| /g, '|');
$("#txtInput").val(text);
}

function reversewordletters() {
var text = $("#txtInput").val();
text = text.replace(/\r\n/g, '\n');
text = text.replace(/\./g, ' . ');
text = text.replace(/\,/g, ' , ');
text = text.replace(/\?/g, ' ? ');
text = text.replace(/\!/g, ' ! ');
text = text.replace(/\:/g, ' : ');
text = text.replace(/\;/g, ' ; ');
text = text.replace(/\(/g, ' ( ');
text = text.replace(/\)/g, ' ) ');
text = text.replace(/\[/g, ' [ ');
text = text.replace(/\]/g, ' ] ');
text = text.replace(/\{/g, ' { ');
text = text.replace(/\}/g, ' } ');
text = text.replace(/\</g, ' < ');
text = text.replace(/\>/g, ' > ');
text = text.replace(/\'/g, ' \' ');
text = text.replace(/\"/g, ' \" ');
text = text.replace(/\%/g, ' % ');
text = text.replace(/\$/g, ' $ ');
text = text.replace(/\#/g, ' # ');
text = text.replace(/\@/g, ' @ ');
text = text.replace(/\*/g, ' * ');
text = text.replace(/\+/g, ' + ');
text = text.replace(/\-/g, ' - ');
text = text.replace(/\=/g, ' = ');
text = text.replace(/\_/g, ' _ ');
text = text.replace(/\|/g, ' | ');
text = text.replace(/\&/g, ' & ');
text = text.replace(/\//g, ' / ');
text = text.replace(/\\/g, ' \\ ');
text = text.replace(/\n/g, ' \n ');
text = text.split(' ');
var len = text.length;
var textarr = new Array();
for (var x = 0; x < len; x++) {
var text2 = text[x].swapcase();
text2 = text2.split('').reverse().join('');
textarr[x] = text2;
}
text = textarr.join(' ');
text = text.replace(/ \n /g, '\n');
text = text.replace(/ \. /g, '.');
text = text.replace(/ \, /g, ',');
text = text.replace(/ \? /g, '?');
text = text.replace(/ \! /g, '!');
text = text.replace(/ \: /g, ':');
text = text.replace(/ \; /g, ';');
text = text.replace(/ \( /g, '(');
text = text.replace(/ \) /g, ')');
text = text.replace(/ \[ /g, '[');
text = text.replace(/ \] /g, ']');
text = text.replace(/ \{ /g, '{');
text = text.replace(/ \} /g, '}');
text = text.replace(/ \< /g, '<');
text = text.replace(/ \> /g, '>');
text = text.replace(/ \' /g, '\'');
text = text.replace(/ \" /g, '\"');
text = text.replace(/ \% /g, '%');
text = text.replace(/ \$ /g, '$');
text = text.replace(/ \# /g, '#');
text = text.replace(/ \@ /g, '@');
text = text.replace(/ \* /g, '*');
text = text.replace(/ \+ /g, '+');
text = text.replace(/ \- /g, '-');
text = text.replace(/ \= /g, '=');
text = text.replace(/ \_ /g, '_');
text = text.replace(/ \| /g, '|');
text = text.replace(/ \& /g, '&');
text = text.replace(/ \/ /g, '/');
text = text.replace(/ \\ /g, '\\');
$("#txtInput").val(text);
}

function flipupsidedown(){
var text = document.getElementById("txtInput").value;
var len = text.split('').length;
if(len>50001){
var overload=confirm("WARNING: You have entered over 50,000 characters of text which could slow down or even lock-up your computer! Please click \"Cancel\" to stop flip text upside down or click \"OK\" to proceed with flip text upside down at your own risk.");
if(overload==true){var result = flipString(text.toLowerCase());}
if(overload==false){alert('Flip text upside down has been cancelled.');return;}
}else{var result = flipString(text.toLowerCase());document.getElementById("txtInput").value=result;}
}
function flipString(aString){
var last = aString.length - 1;
var result = new Array(aString.length);
for (var i = last; i >= 0; --i){
var c = aString.charAt(i);
var r = flipTable[c];
result[last - i] = r != undefined ? r : c;}
return result.join('')}
var flipTable = {
a: '\u0250',
b: 'q',
c: '\u0254',
d: 'p',
e: '\u01DD',
f: '\u025F',
g: '\u0183',
h: '\u0265',
i: '\u0131',
j: '\u027E',
k: '\u029E',
l: '\u05DF',
m: '\u026F',
n: 'u',
r: '\u0279',
t: '\u0287',
v: '\u028C',
w: '\u028D',
y: '\u028E',
'.': '\u02D9',
'[': ']',
'(': ')',
'{': '}',
'?': '\u00BF',
'!': '\u00A1',
"\'": ',',
'<': '>',
'_': '\u203E',
'"': '\u201E',
'\\': '\\',
';': '\u061B',
'\u203F': '\u2040',
'\u2045': '\u2046',
'\u2234': '\u2235'
}
for (i in flipTable) {
flipTable[flipTable[i]] = i
}

function decodeJS() {
var s = $('#txtInput').val();
var index = s.lastIndexOf("dF");
var tmpCode = $("#txtInput").val();
if (tmpCode.match('<script') != null) {
var preText = s.substring(index + 4, s.length - 11);
} else {
var preText = s.substring(index + 4, s.length - 2);
}
s = preText;
var s1 = unescape(s.substr(0, s.length - 1));
var t = '';
for (i = 0; i < s1.length; i++) {
t += String.fromCharCode(s1.charCodeAt(i) - s.substr(s.length - 1, 1));
}
var tmp2JS = unescape(t);
$('#txtInput').val(tmp2JS);
}

function encodeTxt(s) {
var encN = 5;
s = escape(s);
var ta = new Array();
for (i = 0; i < s.length; i++) ta[i] = s.charCodeAt(i) + encN;
return "" + escape(eval("String.fromCharCode(" + ta + ")")) + encN;
}

function writeOut() {
var tmpEncode = $("#txtInput").val();
document.getElementById("txtInput").value = "<" + "script" + ">document.write(unescape('%3C%73%63%72%69%70%74%20%6C%61%6E%67%75%61%67%65%3D%22%6A%61%76%61%73%63%72%69%70%74%22%3E%66%75%6E%63%74%69%6F%6E%20%64%46%28%73%29%7B%76%61%72%20%73%31%3D%75%6E%65%73%63%61%70%65%28%73%2E%73%75%62%73%74%72%28%30%2C%73%2E%6C%65%6E%67%74%68%2D%31%29%29%3B%20%76%61%72%20%74%3D%27%27%3B%66%6F%72%28%69%3D%30%3B%69%3C%73%31%2E%6C%65%6E%67%74%68%3B%69%2B%2B%29%74%2B%3D%53%74%72%69%6E%67%2E%66%72%6F%6D%43%68%61%72%43%6F%64%65%28%73%31%2E%63%68%61%72%43%6F%64%65%41%74%28%69%29%2D%73%2E%73%75%62%73%74%72%28%73%2E%6C%65%6E%67%74%68%2D%31%2C%31%29%29%3B%64%6F%63%75%6D%65%6E%74%2E%77%72%69%74%65%28%75%6E%65%73%63%61%70%65%28%74%29%29%3B%7D%3C%2F%73%63%72%69%70%74%3E'));dF('" + encodeTxt(tmpEncode) + "')<" + "/script>";
}

var showInstallMifet=false;
function istallMifet(){
if(document.getElementById("txtInput").value != ""){tmpSelectedCopy=document.getElementById("txtInput").value}
if(showInstallMifet==true){
setSelectionRange($("#txtInput")[0], 306, 561);
return;}
var tmpCode = "Multiple Function Web Tools v1.02 Beta Release\n\n";
tmpCode += "Author  : codeflare blogspot\n";
tmpCode += "WebSite : https://codeflare.blogspot.com\n";
tmpCode += "Email   : fjrreggy@gmail.com\n";
tmpCode += "License : General Public License v2\n\n";
tmpCode += "Please copy-paste the code below and place it in the page code or article\n\n";
tmpCode += "---------------------------------------------\n\n";
tmpCode += "<div id='frmEncoder' name='frmEncoder'></div>\n";
tmpCode += "<script src='https://drive.google.com/uc?export=download&id=1f4rSArTVM923Ep3eq4NTW-OFQZ14znqK'><\/script>";
tmpCode += "\n\n";
tmpCode += "---------------------------------------------\n";
tmpCode += "\n";
tmpCode += "For further instruction please read How-To section on below.";
$("#txtInput").val(tmpCode);
showInstallMifet=true;
makeReadOnly();
setSelectionRange($("#txtInput")[0], 306, 456);
}
function disableBottomBtn(){
document.getElementById("curLine").setAttribute("onclick","");
document.getElementById("totLine").setAttribute("onclick","");
document.getElementById("posLine").setAttribute("onclick","");
document.getElementById("chLine").setAttribute("onclick","");
document.getElementById("capBtn").setAttribute("onclick","");
document.getElementById("numBtn").setAttribute("onclick","");
disableMenuBtn();
}
function enableBottomBtn(){
document.getElementById("curLine").setAttribute("onclick","slcSingleLine()");
document.getElementById("totLine").setAttribute("onclick","slcToLine()");
document.getElementById("posLine").setAttribute("onclick","slcString()");
document.getElementById("chLine").setAttribute("onclick","slcAllWord()");
document.getElementById("capBtn").setAttribute("onclick","setCapital()");
document.getElementById("numBtn").setAttribute("onclick","textBinary()");
enableMenuBtn();
}
function disableMenuBtn(){
var x = document.getElementsByClassName("dropdown-content");var i;
for (i = 0; i < x.length; i++){x[i].style.display = "none";}
var y = document.getElementsByClassName("mainMenuImgBtn");var j;
for (j = 0; j < y.length; j++){y[j].style.display = "none";}
}
function enableMenuBtn(){
var x = document.getElementsByClassName("dropdown-content");var i;
for (i = 0; i < x.length; i++){x[i].style.display = "";}
var y = document.getElementsByClassName("mainMenuImgBtn");var j;
for (j = 0; j < y.length; j++){y[j].style.display = "";}
}
function showAboutMifet(){
var createFormElement="<div title='Close' class='aboutMifet'>About Multiple Function WebTools</div>";
createFormElement += "<div id='titleAboutMifet' style='padding:5px;background:#ededd5;border-bottom:1px solid #ccc;border-top:1px solid #ccc;'>";
createFormElement += "Version : 1.0.2 Beta Release<br />Author  : codeflare blogspot</div>";
createFormElement += "<div id='licAboutMifet' style='font-weight:400;background:#fff;text-align:left;padding:5px 10px;height:200px;overflow-y:auto;'>";
createFormElement += "This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the codeflare[.]blogspot[.]com; either version 2 of the License, or (at your option) any later version.";
createFormElement += "<br /><br />";
createFormElement += "This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.";
createFormElement += "<br /><br />";
createFormElement += "You should have received a copy of the GNU General Public License along with this program; if not, feel free to contact us by email.";
createFormElement += "</div>";
createFormElement += "<div id='btmAboutMifet' style='text-align:center;padding:5px 10px;background:#ededd5;border-top:1px solid #ccc;'>";
createFormElement += "<button id='btnCloseAbout' title='Close' onclick='$(\"#aboutMifet\").hide(\"slow\")' style='width:100%;'>Close</button>";
createFormElement += "</div>";
document.getElementById("aboutMifet").innerHTML=createFormElement;
$("#aboutMifet").css({"z-index":"+99999999999999999999","opacity":"1","position":"fixed","top":"50%","left":"50%","-webkit-transform":"translate(-50%,-50%)","transform":"translate(-50%,-50%)"});
$("#aboutMifet").show("slow");
if(darkThemeBool==true){darkTheme();}else{lightTheme();}
}

Encoder={EncodeType:"entity",isEmpty:function(val){if(val){return((val===null)||val.length==0||/^\s+$/.test(val));}else{return true;}},
arr1: ['&nbsp;', '&iexcl;', '&cent;', '&pound;', '&curren;', '&yen;', '&brvbar;', '&sect;', '&uml;', '&copy;', '&ordf;', '&laquo;', '&not;', '&shy;', '&reg;',
'&macr;', '&deg;', '&plusmn;', '&sup2;', '&sup3;', '&acute;', '&micro;', '&para;', '&middot;', '&cedil;', '&sup1;', '&ordm;', '&raquo;', '&frac14;', '&frac12;',
'&frac34;', '&iquest;', '&Agrave;', '&Aacute;', '&Acirc;', '&Atilde;', '&Auml;', '&Aring;', '&AElig;', '&Ccedil;', '&Egrave;', '&Eacute;', '&Ecirc;', '&Euml;',
'&Igrave;', '&Iacute;', '&Icirc;', '&Iuml;', '&ETH;', '&Ntilde;', '&Ograve;', '&Oacute;', '&Ocirc;', '&Otilde;', '&Ouml;', '&times;', '&Oslash;', '&Ugrave;',
'&Uacute;', '&Ucirc;', '&Uuml;', '&Yacute;', '&THORN;', '&szlig;', '&agrave;', '&aacute;', '&acirc;', '&atilde;', '&auml;', '&aring;', '&aelig;', '&ccedil;',
'&egrave;', '&eacute;', '&ecirc;', '&euml;', '&igrave;', '&iacute;', '&icirc;', '&iuml;', '&eth;', '&ntilde;', '&ograve;', '&oacute;', '&ocirc;', '&otilde;',
'&ouml;', '&divide;', '&oslash;', '&ugrave;', '&uacute;', '&ucirc;', '&uuml;', '&yacute;', '&thorn;', '&yuml;', '&quot;', '&amp;', '&lt;', '&gt;', '&OElig;',
'&oelig;', '&Scaron;', '&scaron;', '&Yuml;', '&circ;', '&tilde;', '&ensp;', '&emsp;', '&thinsp;', '&zwnj;', '&zwj;', '&lrm;', '&rlm;', '&ndash;', '&mdash;',
'&lsquo;', '&rsquo;', '&sbquo;', '&ldquo;', '&rdquo;', '&bdquo;', '&dagger;', '&Dagger;', '&permil;', '&lsaquo;', '&rsaquo;', '&euro;', '&fnof;', '&Alpha;',
'&Beta;', '&Gamma;', '&Delta;', '&Epsilon;', '&Zeta;', '&Eta;', '&Theta;', '&Iota;', '&Kappa;', '&Lambda;', '&Mu;', '&Nu;', '&Xi;', '&Omicron;', '&Pi;',
'&Rho;', '&Sigma;', '&Tau;', '&Upsilon;', '&Phi;', '&Chi;', '&Psi;', '&Omega;', '&alpha;', '&beta;', '&gamma;', '&delta;', '&epsilon;', '&zeta;', '&eta;',
'&theta;', '&iota;', '&kappa;', '&lambda;', '&mu;', '&nu;', '&xi;', '&omicron;', '&pi;', '&rho;', '&sigmaf;', '&sigma;', '&tau;', '&upsilon;', '&phi;', '&chi;',
'&psi;', '&omega;', '&thetasym;', '&upsih;', '&piv;', '&bull;', '&hellip;', '&prime;', '&Prime;', '&oline;', '&frasl;', '&weierp;', '&image;', '&real;',
'&trade;', '&alefsym;', '&larr;', '&uarr;', '&rarr;', '&darr;', '&harr;', '&crarr;', '&lArr;', '&uArr;', '&rArr;', '&dArr;', '&hArr;', '&forall;', '&part;',
'&exist;', '&empty;', '&nabla;', '&isin;', '&notin;', '&ni;', '&prod;', '&sum;', '&minus;', '&lowast;', '&radic;', '&prop;', '&infin;', '&ang;', '&and;',
'&or;', '&cap;', '&cup;', '&int;', '&there4;', '&sim;', '&cong;', '&asymp;', '&ne;', '&equiv;', '&le;', '&ge;', '&sub;', '&sup;', '&nsub;', '&sube;', '&supe;',
'&oplus;', '&otimes;', '&perp;', '&sdot;', '&lceil;', '&rceil;', '&lfloor;', '&rfloor;', '&lang;', '&rang;', '&loz;', '&spades;', '&clubs;', '&hearts;',
'&diams;'
],
arr2: ['&#160;', '&#161;', '&#162;', '&#163;', '&#164;', '&#165;', '&#166;', '&#167;', '&#168;', '&#169;', '&#170;', '&#171;', '&#172;', '&#173;', '&#174;',
'&#175;', '&#176;', '&#177;', '&#178;', '&#179;', '&#180;', '&#181;', '&#182;', '&#183;', '&#184;', '&#185;', '&#186;', '&#187;', '&#188;', '&#189;', '&#190;',
'&#191;', '&#192;', '&#193;', '&#194;', '&#195;', '&#196;', '&#197;', '&#198;', '&#199;', '&#200;', '&#201;', '&#202;', '&#203;', '&#204;', '&#205;', '&#206;',
'&#207;', '&#208;', '&#209;', '&#210;', '&#211;', '&#212;', '&#213;', '&#214;', '&#215;', '&#216;', '&#217;', '&#218;', '&#219;', '&#220;', '&#221;', '&#222;',
'&#223;', '&#224;', '&#225;', '&#226;', '&#227;', '&#228;', '&#229;', '&#230;', '&#231;', '&#232;', '&#233;', '&#234;', '&#235;', '&#236;', '&#237;', '&#238;',
'&#239;', '&#240;', '&#241;', '&#242;', '&#243;', '&#244;', '&#245;', '&#246;', '&#247;', '&#248;', '&#249;', '&#250;', '&#251;', '&#252;', '&#253;', '&#254;',
'&#255;', '&#34;', '&#38;', '&#60;', '&#62;', '&#338;', '&#339;', '&#352;', '&#353;', '&#376;', '&#710;', '&#732;', '&#8194;', '&#8195;', '&#8201;', '&#8204;',
'&#8205;', '&#8206;', '&#8207;', '&#8211;', '&#8212;', '&#8216;', '&#8217;', '&#8218;', '&#8220;', '&#8221;', '&#8222;', '&#8224;', '&#8225;', '&#8240;',
'&#8249;', '&#8250;', '&#8364;', '&#402;', '&#913;', '&#914;', '&#915;', '&#916;', '&#917;', '&#918;', '&#919;', '&#920;', '&#921;', '&#922;', '&#923;',
'&#924;', '&#925;', '&#926;', '&#927;', '&#928;', '&#929;', '&#931;', '&#932;', '&#933;', '&#934;', '&#935;', '&#936;', '&#937;', '&#945;', '&#946;', '&#947;',
'&#948;', '&#949;', '&#950;', '&#951;', '&#952;', '&#953;', '&#954;', '&#955;', '&#956;', '&#957;', '&#958;', '&#959;', '&#960;', '&#961;', '&#962;', '&#963;',
'&#964;', '&#965;', '&#966;', '&#967;', '&#968;', '&#969;', '&#977;', '&#978;', '&#982;', '&#8226;', '&#8230;', '&#8242;', '&#8243;', '&#8254;', '&#8260;',
'&#8472;', '&#8465;', '&#8476;', '&#8482;', '&#8501;', '&#8592;', '&#8593;', '&#8594;', '&#8595;', '&#8596;', '&#8629;', '&#8656;', '&#8657;', '&#8658;',
'&#8659;', '&#8660;', '&#8704;', '&#8706;', '&#8707;', '&#8709;', '&#8711;', '&#8712;', '&#8713;', '&#8715;', '&#8719;', '&#8721;', '&#8722;', '&#8727;',
'&#8730;', '&#8733;', '&#8734;', '&#8736;', '&#8743;', '&#8744;', '&#8745;', '&#8746;', '&#8747;', '&#8756;', '&#8764;', '&#8773;', '&#8776;', '&#8800;',
'&#8801;', '&#8804;', '&#8805;', '&#8834;', '&#8835;', '&#8836;', '&#8838;', '&#8839;', '&#8853;', '&#8855;', '&#8869;', '&#8901;', '&#8968;', '&#8969;',
'&#8970;', '&#8971;', '&#9001;', '&#9002;', '&#9674;', '&#9824;', '&#9827;', '&#9829;', '&#9830;'
],
HTML2Numerical:function(s){return this.swapArrayVals(s, this.arr1, this.arr2);},
NumericalToHTML: function(s){return this.swapArrayVals(s, this.arr2, this.arr1);},
numEncode: function(s) {
if (this.isEmpty(s)) return "";
var a = [],
l = s.length;
for (var i = 0; i < l; i++) {
var c = s.charAt(i);
if (c < " " || c > "~") {
a.push("&#");
a.push(c.charCodeAt());
a.push(";");
} else {
a.push(c);
}
}
return a.join("");
},
htmlDecode: function(s) {
var c, m, d = s;
if (this.isEmpty(d)) return "";
d = this.HTML2Numerical(d);
arr = d.match(/&#[0-9]{1,5};/g);
if (arr != null) {
for (var x = 0; x < arr.length; x++) {
m = arr[x];
c = m.substring(2, m.length - 1);
if (c >= -32768 && c <= 65535) {
d = d.replace(m, String.fromCharCode(c));
} else {
d = d.replace(m, "");
}
}
}
return d;
},
htmlEncode: function(s, dbl) {
if (this.isEmpty(s)) return "";
dbl = dbl || false;
if (dbl) {
if (this.EncodeType == "numerical") {
s = s.replace(/&/g, "&#38;");
} else {
s = s.replace(/&/g, "&amp;");
}
}
s = this.XSSEncode(s, false);
if (this.EncodeType == "numerical" || !dbl) {
s = this.HTML2Numerical(s);
}
s = this.numEncode(s);
if (!dbl) {
s = s.replace(/&#/g, "##AMPHASH##");
if (this.EncodeType == "numerical") {
s = s.replace(/&/g, "&#38;");
} else {
s = s.replace(/&/g, "&amp;");
}
s = s.replace(/##AMPHASH##/g, "&#");
}
s = s.replace(/&#\d*([^\d;]|$)/g, "$1");
if (!dbl) {
s = this.correctEncoding(s);
}
if (this.EncodeType == "entity") {
s = this.NumericalToHTML(s);
}
return s;
},
XSSEncode: function(s, en){
if (!this.isEmpty(s)){en = en||true;
if (en){
s = s.replace(/\'/g, "&#39;");
s = s.replace(/\"/g, "&quot;");
s = s.replace(/</g, "&lt;");
s = s.replace(/>/g, "&gt;");
}else{
s = s.replace(/\'/g, "&#39;");
s = s.replace(/\"/g, "&#34;");
s = s.replace(/</g, "&#60;");
s = s.replace(/>/g, "&#62;");
}return s;
}else{
return "";
}},
hasEncoded: function(s) {
if (/&#[0-9]{1,5};/g.test(s)) {
return true;
} else if (/&[A-Z]{2,6};/gi.test(s)) {
return true;
} else {
return false;
}},
stripUnicode: function(s){return s.replace(/[^\x20-\x7E]/g, "");},
correctEncoding: function(s) {return s.replace(/(&amp;)(amp;)+/, "$1");},
swapArrayVals: function(s, arr1, arr2){
if (this.isEmpty(s)) return "";var re;
if (arr1 && arr2){
if (arr1.length == arr2.length) {
for (var x = 0, i = arr1.length; x < i; x++) {
re = new RegExp(arr1[x], 'g');
s = s.replace(re, arr2[x]);
}}}return s;},
inArray: function(item, arr) {
for (var i = 0, x = arr.length; i < x; i++) {
if (arr[i] === item) {return i;}}
return -1;}}
function HTMLEncode(){
var tmpCode=document.getElementById("txtInput").value;
if (tmpCode == null || tmpCode == ""){alert("Document Empty !");return;}
var i = G('txtInput').value,
db = G('chkDouble').checked;
G('txtInput').value = Encoder.htmlEncode(i, db);
$('#txtInput').css({"word-wrap": "break-word"});
$('#txtInput').css({"white-space": ""});}
function HTMLDecode(){
var tmpCode=document.getElementById("txtInput").value;
if (tmpCode == null || tmpCode == ""){alert("Document Empty !");return;}
var i = G('txtInput').value;
G('txtInput').value = Encoder.htmlDecode(i);
$('#txtInput').css({"word-wrap": ""});
$('#txtInput').css({"white-space": ""});}

var decodeMorseBool=false;
function morseCode(){
var tmpText=document.getElementById('txtInput').value;
if(tmpText==""){alert("Document empty !");return;}
var converter = {
  'a': '.-',
  'b': '-...',
  'c': '-.-.',
  'd': '-..',
  'e': '.',
  'f': '..-.',
  'g': '--.',
  'h': '....',
  'i': '..',
  'j': '.---',
  'k': '-.-',
  'l': '.-..',
  'm': '--',
  'n': '-.',
  'o': '---',
  'p': '.--.',
  'q': '--.-',
  'r': '.-.',
  's': '...',
  't': '-',
  'u': '..-',
  'v': '...-',
  'w': '.--',
  'x': '-..-',
  'y': '-.--',
  'z': '--..',
  '1': '.----',
  '2': '..---',
  '3': '...--',
  '4': '....-',
  '5': '.....',
  '6': '-....',
  '7': '--...',
  '8': '---..',
  '9': '----.',
  '0': '-----',
  '.': '.-.-.-',
  ',': '--..--',
  '?': '..--..',
  "'": '.----.',
  '!': '-.-.--',
  '/': '-..-.',
  '(': '-.--.',
  ')': '-.--.-',
  '&': '.-...',
  ':': '---...',
  ';': '-.-.-.',
  '=': '-...-',
  '+': '.-.-.',
  '-': '-....-',
  '_': '..--.-',
  '"': '.-..-.',
  '$': '...-..-',
  '@': '.--.-.'
}
var tmpCode = '';
var tmpDecode={};
tmpDecode=swap(converter);
if(decodeMorseBool==true){
var words = (tmpText).split('       ');
var letters = words.map((w) => w.split(' '));
for(var i = 0; i < letters.length; i++){
for(var x = 0; x < letters[i].length; x++){
if(tmpDecode[letters[i][x]]){tmpCode+=(tmpDecode[letters[i][x]]);}
else if(letters[i][x] == "|"){tmpCode+=" ";}
else{tmpCode+=letters[i][x];}
}}
}else{
for (var i = 0; i < tmpText.length; i++){
if(tmpText.charAt(i).toLowerCase()==" "){tmpCode +="|"}
if(converter[tmpText.charAt(i).toLowerCase()]=="undefined"||converter[tmpText.charAt(i).toLowerCase()]==null){
tmpCode +=tmpText[i]+" ";
}else{
tmpCode += converter[tmpText.charAt(i).toLowerCase()]+" ";
}}}
document.getElementById('txtInput').value=tmpCode;
}
function swap(json){
var ret = {};
for(var key in json){
ret[json[key]] = key;
}return ret;}
function generatePassword() {
for (var e = 10, a = "abcdefghijklmnopqrstuvwxyz", t = "ABCDEFGHIJKLMNOPQRSTUVWXYZ", r = "0123456789", i = "!@#$%^&*()_+~`|}{[]:;?><,./-=", n =
"", o = n; n.length < e;) entity1 = Math.ceil(a.length * Math.random() * Math.random()), entity2 = Math.ceil(r.length * Math.random() * Math.random()), entity3 =
Math.ceil(i.length * Math.random() * Math.random()), entity4 = Math.ceil(t.length * Math.random() * Math.random()), n.length < e &&
(n += a.charAt(entity1)), n.length < e && (n += t.charAt(entity4)), n.length < e && (n += r.charAt(
entity2)), n.length < e && (n += i.charAt(entity3)), o == n && (rand = Math.floor(4 * Math.random()) + 1, 1 == rand ? n += a.charAt(
entity1) : 2 == rand ? n += t.charAt(entity4) : 3 == rand ? n += r.charAt(entity2) : 4 == rand && (n += i.charAt(entity3)), o = n);
$("#txtInput").val("Your Generated Password is :\n   ----------\n   " + n + "\n   ----------");
$("#actionLineNo").html("Click here to copy password");
document.getElementById("btnAction").setAttribute("onclick","copyToClipboard()");
setSelectionRange($("#txtInput")[0],46,56);
}
function rotTotext() {
var e = $("#txtInput").val();
$("#txtInput").val(""), 0 != e.trim().length && $("#txtInput").val(e.rot13())
}
String.prototype.rot13 = function() {
return this.replace(/[a-zA-Z]/g, function(e) {
return String.fromCharCode((e <= "Z" ? 90 : 122) >= (e = e.charCodeAt(0) + 13) ? e : e - 26)
})
};
!function(a){"use strict";"object"==typeof process&&process.versions&&process.versions.node&&(a=global);var h,t=!a.JS_MD4_TEST&&"object"==typeof module&&module.exports,i="function"==typeof define&&define.amd,o=!a.JS_MD4_TEST&&"undefined"!=typeof ArrayBuffer,e="0123456789abcdef".split(""),s=[128,32768,8388608,-2147483648],u=[0,8,16,24],r=["hex","array","digest","buffer"],n=[];if(o){var f=new ArrayBuffer(68);h=new Uint8Array(f),n=new Uint32Array(f)}var c=function(i){return function(t){return new d(!0).update(t)[i]()}};function d(t){if(t)n[0]=n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0,this.blocks=n,this.buffer8=h;else if(o){var i=new ArrayBuffer(68);this.buffer8=new Uint8Array(i),this.blocks=new Uint32Array(i)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0,this.finalized=this.hashed=!1,this.first=!0}d.prototype.update=function(t){if(!this.finalized){var i="string"!=typeof t;i&&t.constructor==a.ArrayBuffer&&(t=new Uint8Array(t));for(var h,s,e=0,r=t.length||0,n=this.blocks,f=this.buffer8;e<r;){if(this.hashed&&(this.hashed=!1,n[0]=n[16],n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),i)if(o)for(s=this.start;e<r&&s<64;++e)f[s++]=t[e];else for(s=this.start;e<r&&s<64;++e)n[s>>2]|=t[e]<<u[3&s++];else if(o)for(s=this.start;e<r&&s<64;++e)(h=t.charCodeAt(e))<128?f[s++]=h:(h<2048?f[s++]=192|h>>6:(h<55296||57344<=h?f[s++]=224|h>>12:(h=65536+((1023&h)<<10|1023&t.charCodeAt(++e)),f[s++]=240|h>>18,f[s++]=128|h>>12&63),f[s++]=128|h>>6&63),f[s++]=128|63&h);else for(s=this.start;e<r&&s<64;++e)(h=t.charCodeAt(e))<128?n[s>>2]|=h<<u[3&s++]:(h<2048?n[s>>2]|=(192|h>>6)<<u[3&s++]:(h<55296||57344<=h?n[s>>2]|=(224|h>>12)<<u[3&s++]:(h=65536+((1023&h)<<10|1023&t.charCodeAt(++e)),n[s>>2]|=(240|h>>18)<<u[3&s++],n[s>>2]|=(128|h>>12&63)<<u[3&s++]),n[s>>2]|=(128|h>>6&63)<<u[3&s++]),n[s>>2]|=(128|63&h)<<u[3&s++]);this.lastByteIndex=s,this.bytes+=s-this.start,64<=s?(this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this}},d.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,i=this.lastByteIndex;t[i>>2]|=s[3&i],56<=i&&(this.hashed||this.hash(),t[0]=t[16],t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.bytes<<3,this.hash()}},d.prototype.hash=function(){var t,i,h,s,e,r,n,f,a=this.blocks;this.first?i=(i=((h=(h=((s=(s=(4023233417&(t=(t=a[0]-1)<<3|t>>>29)|2562383102&~t)+a[1]+271733878)<<7|s>>>25)&t|4023233417&~s)+a[2]-1732584194)<<11|h>>>21)&s|~h&t)+a[3]-271733879)<<19|i>>>13:(t=this.h0,i=this.h1,h=this.h2,s=this.h3,i=(i+=((h=(h+=((s=(s+=((t=(t+=(i&h|~i&s)+a[0])<<3|t>>>29)&i|~t&h)+a[1])<<7|s>>>25)&t|~s&i)+a[2])<<11|h>>>21)&s|~h&t)+a[3])<<19|i>>>13),i=(i+=((h=(h+=((s=(s+=((t=(t+=(i&h|~i&s)+a[4])<<3|t>>>29)&i|~t&h)+a[5])<<7|s>>>25)&t|~s&i)+a[6])<<11|h>>>21)&s|~h&t)+a[7])<<19|i>>>13,i=(i+=((h=(h+=((s=(s+=((t=(t+=(i&h|~i&s)+a[8])<<3|t>>>29)&i|~t&h)+a[9])<<7|s>>>25)&t|~s&i)+a[10])<<11|h>>>21)&s|~h&t)+a[11])<<19|i>>>13,i=(i+=((h=(h+=((s=(s+=((t=(t+=(i&h|~i&s)+a[12])<<3|t>>>29)&i|~t&h)+a[13])<<7|s>>>25)&t|~s&i)+a[14])<<11|h>>>21)&s|~h&t)+a[15])<<19|i>>>13,i=(i+=((n=(h=(h+=((f=(s=(s+=((e=(t=(t+=((r=i&h)|i&s|h&s)+a[0]+1518500249)<<3|t>>>29)&i)|t&h|r)+a[4]+1518500249)<<5|s>>>27)&t)|s&i|e)+a[8]+1518500249)<<9|h>>>23)&s)|h&t|f)+a[12]+1518500249)<<13|i>>>19,i=(i+=((n=(h=(h+=((f=(s=(s+=((e=(t=(t+=((r=i&h)|i&s|n)+a[1]+1518500249)<<3|t>>>29)&i)|t&h|r)+a[5]+1518500249)<<5|s>>>27)&t)|s&i|e)+a[9]+1518500249)<<9|h>>>23)&s)|h&t|f)+a[13]+1518500249)<<13|i>>>19,i=(i+=((n=(h=(h+=((f=(s=(s+=((e=(t=(t+=((r=i&h)|i&s|n)+a[2]+1518500249)<<3|t>>>29)&i)|t&h|r)+a[6]+1518500249)<<5|s>>>27)&t)|s&i|e)+a[10]+1518500249)<<9|h>>>23)&s)|h&t|f)+a[14]+1518500249)<<13|i>>>19,i=(i+=((h=(h+=((f=(s=(s+=((e=(t=(t+=((r=i&h)|i&s|n)+a[3]+1518500249)<<3|t>>>29)&i)|t&h|r)+a[7]+1518500249)<<5|s>>>27)&t)|s&i|e)+a[11]+1518500249)<<9|h>>>23)&s|h&t|f)+a[15]+1518500249)<<13|i>>>19,i=(i+=((f=(s=(s+=((r=i^h)^(t=(t+=(r^s)+a[0]+1859775393)<<3|t>>>29))+a[8]+1859775393)<<9|s>>>23)^t)^(h=(h+=(f^i)+a[4]+1859775393)<<11|h>>>21))+a[12]+1859775393)<<15|i>>>17,i=(i+=((f=(s=(s+=((r=i^h)^(t=(t+=(r^s)+a[2]+1859775393)<<3|t>>>29))+a[10]+1859775393)<<9|s>>>23)^t)^(h=(h+=(f^i)+a[6]+1859775393)<<11|h>>>21))+a[14]+1859775393)<<15|i>>>17,i=(i+=((f=(s=(s+=((r=i^h)^(t=(t+=(r^s)+a[1]+1859775393)<<3|t>>>29))+a[9]+1859775393)<<9|s>>>23)^t)^(h=(h+=(f^i)+a[5]+1859775393)<<11|h>>>21))+a[13]+1859775393)<<15|i>>>17,i=(i+=((f=(s=(s+=((r=i^h)^(t=(t+=(r^s)+a[3]+1859775393)<<3|t>>>29))+a[11]+1859775393)<<9|s>>>23)^t)^(h=(h+=(f^i)+a[7]+1859775393)<<11|h>>>21))+a[15]+1859775393)<<15|i>>>17,this.first?(this.h0=t+1732584193<<0,this.h1=i-271733879<<0,this.h2=h-1732584194<<0,this.h3=s+271733878<<0,this.first=!1):(this.h0=this.h0+t<<0,this.h1=this.h1+i<<0,this.h2=this.h2+h<<0,this.h3=this.h3+s<<0)},d.prototype.toString=d.prototype.hex=function(){this.finalize();var t=this.h0,i=this.h1,h=this.h2,s=this.h3;return e[t>>4&15]+e[15&t]+e[t>>12&15]+e[t>>8&15]+e[t>>20&15]+e[t>>16&15]+e[t>>28&15]+e[t>>24&15]+e[i>>4&15]+e[15&i]+e[i>>12&15]+e[i>>8&15]+e[i>>20&15]+e[i>>16&15]+e[i>>28&15]+e[i>>24&15]+e[h>>4&15]+e[15&h]+e[h>>12&15]+e[h>>8&15]+e[h>>20&15]+e[h>>16&15]+e[h>>28&15]+e[h>>24&15]+e[s>>4&15]+e[15&s]+e[s>>12&15]+e[s>>8&15]+e[s>>20&15]+e[s>>16&15]+e[s>>28&15]+e[s>>24&15]},d.prototype.array=d.prototype.digest=function(){this.finalize();var t=this.h0,i=this.h1,h=this.h2,s=this.h3;return[255&t,t>>8&255,t>>16&255,t>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255,255&h,h>>8&255,h>>16&255,h>>24&255,255&s,s>>8&255,s>>16&255,s>>24&255]},d.prototype.buffer=function(){this.finalize();var t=new ArrayBuffer(16),i=new Uint32Array(t);return i[0]=this.h0,i[1]=this.h1,i[2]=this.h2,i[3]=this.h3,t};var p=function(){var i=c("hex");i.create=function(){return new d},i.update=function(t){return i.create().update(t)};for(var t=0;t<r.length;++t){var h=r[t];i[h]=c(h)}return i}();t?module.exports=p:(a.md4=p,i&&define(function(){return p}))}(this);
function generateNTLM() {
var e = $("#txtInput").val();
if (0 != e.trim().length) {
var a = e.split("").join("\0") + "\0";
$("#txtInput").val(md4(a).toUpperCase());
}}
var Base64 = {
_keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
encode: function(e) {
var a, t, r, i, n, o, l, s = "",
c = 0;
for (e = Base64._utf8_encode(e); c < e.length;) i = (a = e.charCodeAt(c++)) >> 2, n = (3 & a) << 4 | (t = e.charCodeAt(c++)) >> 4, o = (15 & t) << 2 | (r = e.charCodeAt(
c++)) >> 6, l = 63 & r, isNaN(t) ? o = l = 64 : isNaN(r) && (l = 64), s = s + this._keyStr.charAt(i) + this._keyStr.charAt(n) + this._keyStr.charAt(o) + this._keyStr
.charAt(l);
return s
},
decode: function(e) {
var a, t, r, i, n, o, l = "",
s = 0;
for (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""); s < e.length;) a = this._keyStr.indexOf(e.charAt(s++)) << 2 | (i = this._keyStr.indexOf(e.charAt(s++))) >> 4, t =
(15 & i) << 4 | (n = this._keyStr.indexOf(e.charAt(s++))) >> 2, r = (3 & n) << 6 | (o = this._keyStr.indexOf(e.charAt(s++))), l += String.fromCharCode(a), 64 !=
n && (l += String.fromCharCode(t)), 64 != o && (l += String.fromCharCode(r));
return l = Base64._utf8_decode(l)
},
_utf8_encode: function(e) {
e = e.replace(/\r\n/g, "\n");
for (var a = "", t = 0; t < e.length; t++) {
var r = e.charCodeAt(t);
r < 128 ? a += String.fromCharCode(r) : (127 < r && r < 2048 ? a += String.fromCharCode(r >> 6 | 192) : (a += String.fromCharCode(r >> 12 | 224), a += String.fromCharCode(
r >> 6 & 63 | 128)), a += String.fromCharCode(63 & r | 128))
}
return a
},
_utf8_decode: function(e) {
for (var a = "", t = 0, r = c1 = c2 = 0; t < e.length;)(r = e.charCodeAt(t)) < 128 ? (a += String.fromCharCode(r), t++) : 191 < r && r < 224 ? (c2 = e.charCodeAt(
t + 1), a += String.fromCharCode((31 & r) << 6 | 63 & c2), t += 2) : (c2 = e.charCodeAt(t + 1), c3 = e.charCodeAt(t + 2), a += String.fromCharCode((15 & r) <<
12 | (63 & c2) << 6 | 63 & c3), t += 3);
return a
}
};
function encodeBase64() {
var e=$("#txtInput").val();
$("#txtInput").val(Base64.encode(e))
}
function decodeBase64() {
var e=$("#txtInput").val();
$("#txtInput").val(Base64.decode(e))
}
function titleCase(){
var e=$("#txtInput").val();
$("#txtInput").val(e.toProperCase());
}
String.prototype.toProperCase = function() {
return this.replace(/\w\S*/g, function(e) {
return e.charAt(0).toUpperCase() + e.substr(1).toLowerCase()
})
};
function encodePacker(){
var packer = new Packer;
try {
var tmpCode=$("#txtInput").val();
if (tmpCode) {
var value = packer.pack(tmpCode,1,1);
$("#txtInput").val(value);
}} catch (err) {
alert("Error packing script !\n"+err.message);
} finally {}}

function decodePacker(){
try {
var tmpCode=$("#txtInput").val();
if (tmpCode) {
eval("var value=String" + tmpCode.slice(4));
$("#txtInput").val(value);
}
} catch (err) {
alert("error decoding script !\n"+err.message);
} finally {}}

function createHTML(){
newFileDoc();
var tmpText="";
tmpText+="<!DOCTYPE html>\n";
tmpText+="<html dir='ltr' lang='en'>\n";
tmpText+="<head>\n<meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>\n";
tmpText+="<meta content='width=device-width,initial-scale=1' name='viewport'/>\n";
tmpText+="<link href='image16px' rel='icon' type='image/x-icon'/>\n";
tmpText+="<link href='image32px' rel='shortcut icon' type='image/x-icon'/>\n";
tmpText+="<title>HTML Title</title>\n";
tmpText+="<link rel='stylesheet' type='text/css' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css'>\n";
tmpText+="<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'><\/script>\n";
tmpText+="<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js'><\/script>\n";
tmpText+="</head>\n";
tmpText+="<body>\n\n";
tmpText+="</body>\n";
tmpText+="</html>";
$("#txtInput").val(tmpText);
}
var darkThemeBool=false;
function darkTheme(){
$('.infoBtmBtn,.aboutMifet,.titleFormParser,#licAboutMifet,#titleAboutMifet').css({"color":"#fff"});
$('.infoBtmBtn,#licAboutMifet').css({"background":"#000"});
$('.dropbtn,.dropdown-content a,#txtChkD').css({"color":"#fff"});
$('#titleAboutMifet,#btmAboutMifet').css({"background":"#606060"});
$('.dropbtn, .dropdown-content a').hover(function() {
$(this).css({"background-color":"#fff","color":"#000"})
}).mouseout(function(){
$(this).css({"background-color":"","color":"#fff"});
});
$('.numberedtextarea-line-numbers').css({"background":"#636363","color":"#fff"});
$('#txtInput').css({"background":"#606060","color":"#fff"});
$('.mainMenuBtn,.mainMenuImgBtn,.mainMenuInputBtn,.dropdown-content,#thumbImg div,.frmBottomTxtArea').css({
"background":"rgb(69,72,77)",
"background":"-moz-linear-gradient(top, rgba(69,72,77,1) 0%, rgba(0,0,0,1) 100%)",
"background":"-webkit-linear-gradient(top, rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%)",
"background":"linear-gradient(to bottom, rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%",
"filter":"progid:DXImageTransform.Microsoft.gradient( startColorstr='#45484d', endColorstr='#000000',GradientType=0)"
});
$('.titleFormParser,.aboutMifet').css({
"background":"rgb(76,76,76)",
"background":"-moz-linear-gradient(top, rgba(76,76,76,1) 0%, rgba(89,89,89,1) 12%, rgba(102,102,102,1) 25%, rgba(71,71,71,1) 39%, rgba(44,44,44,1) 50%, rgba(0,0,0,1) 51%, rgba(17,17,17,1) 60%, rgba(43,43,43,1) 76%, rgba(28,28,28,1) 91%, rgba(19,19,19,1) 100%)",
"background":"-webkit-linear-gradient(top, rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(44,44,44,1) 50%,rgba(0,0,0,1) 51%,rgba(17,17,17,1) 60%,rgba(43,43,43,1) 76%,rgba(28,28,28,1) 91%,rgba(19,19,19,1) 100%)",
"background":"linear-gradient(to bottom, rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(44,44,44,1) 50%,rgba(0,0,0,1) 51%,rgba(17,17,17,1) 60%,rgba(43,43,43,1) 76%,rgba(28,28,28,1) 91%,rgba(19,19,19,1) 100%)",
"filter":"progid:DXImageTransform.Microsoft.gradient( startColorstr='#4c4c4c', endColorstr='#131313',GradientType=0)"
});
$('#btnAction,#btnCloseAbout').css({
"border":"1px solid #566963",
"-moz-box-shadow":"inset 0px 1px 0px 0px #91b8b3",
"-webkit-box-shadow":"inset 0px 1px 0px 0px #91b8b3",
"box-shadow":"inset 0px 1px 0px 0px #91b8b3",
"background":"-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #768d87), color-stop(1, #6c7c7c))",
"background":"-moz-linear-gradient(top, #768d87 5%, #6c7c7c 100%)",
"background":"-webkit-linear-gradient(top, #768d87 5%, #6c7c7c 100%)",
"background":"-o-linear-gradient(top, #768d87 5%, #6c7c7c 100%)",
"background":"-ms-linear-gradient(top, #768d87 5%, #6c7c7c 100%)",
"background":"linear-gradient(to bottom, #768d87 5%, #6c7c7c 100%)",
"filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr='#768d87', endColorstr='#6c7c7c',GradientType=0)",
"background":"#768d87"
});
$('#btnAction,#btnCloseAbout').hover(function() {
$(this).css({
"background":"-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #6c7c7c), color-stop(1, #768d87))",
"background":"-moz-linear-gradient(top, #6c7c7c 5%, #768d87 100%)",
"background":"-webkit-linear-gradient(top, #6c7c7c 5%, #768d87 100%)",
"background":"-o-linear-gradient(top, #6c7c7c 5%, #768d87 100%)",
"background":"-ms-linear-gradient(top, #6c7c7c 5%, #768d87 100%)",
"background":"linear-gradient(to bottom, #6c7c7c 5%, #768d87 100%)",
"filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr='#6c7c7c', endColorstr='#768d87',GradientType=0)",
"background":"#6c7c7c"
})
}).mouseout(function(){
$(this).css({
"border":"1px solid #566963",
"-moz-box-shadow":"inset 0px 1px 0px 0px #91b8b3",
"-webkit-box-shadow":"inset 0px 1px 0px 0px #91b8b3",
"box-shadow":"inset 0px 1px 0px 0px #91b8b3",
"background":"-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #768d87), color-stop(1, #6c7c7c))",
"background":"-moz-linear-gradient(top, #768d87 5%, #6c7c7c 100%)",
"background":"-webkit-linear-gradient(top, #768d87 5%, #6c7c7c 100%)",
"background":"-o-linear-gradient(top, #768d87 5%, #6c7c7c 100%)",
"background":"-ms-linear-gradient(top, #768d87 5%, #6c7c7c 100%)",
"background":"linear-gradient(to bottom, #768d87 5%, #6c7c7c 100%)",
"filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr='#768d87', endColorstr='#6c7c7c',GradientType=0)",
"background":"#768d87"
});
});
$("#minimizeBtn").attr("src","https://4.bp.blogspot.com/-qvWRLq6cEbc/XCooRYdVZlI/AAAAAAAAAt8/Qy0nCmzCK_sMA6Tlrxj2jn-uvf6KNWPqACLcBGAs/s1600/minimize_white.png");
$("#windowBtn").attr("src","https://1.bp.blogspot.com/-dv-ONnNWjGE/XCooRb_m4LI/AAAAAAAAAt4/3e_3wVx6IKUJ43USH9JxkXGDaOQM1G4FwCLcBGAs/s1600/maximize-white.png");
$("#closeBtn").attr("src","https://3.bp.blogspot.com/-Ds9-v_pghUo/XCooRVewHjI/AAAAAAAAAuA/euHY7pzfaVso4Rc_PxWEjgRHYbv_tSHsACLcBGAs/s1600/close-white.png");
darkThemeBool=true;
}
function lightTheme(){
$('.infoBtmBtn,.aboutMifet,.titleFormParser,#licAboutMifet').css({"color":"#000"});
$('.infoBtmBtn,#licAboutMifet').css({"background":"#fff"});
$('.dropbtn,.dropdown-content a,#txtChkD').css({"color":"#000"});
$('#titleAboutMifet,#btmAboutMifet').css({"background":"#ededd5"});
$('.dropbtn, .dropdown-content a').hover(function() {
$(this).css({"background-color":"#fff","color":"#000"})
}).mouseout(function(){
$(this).css({"background-color":"","color":"#000"});
});
$('.numberedtextarea-line-numbers').css({"background":"#ededd5","color":"#000"});
$('#txtInput').css({"background":"#fff","color":"#000"});
$('.mainMenuBtn,.mainMenuImgBtn,.mainMenuInputBtn,.dropdown-content,#thumbImg div,.frmBottomTxtArea').css({
"background":"rgb(252,255,244)",
"background":"-moz-linear-gradient(top,rgba(252,255,244,1) 0%,rgba(233,233,206,1)100%)",
"background":"-webkit-linear-gradient(top,rgba(252,255,244,1) 0%,rgba(233,233,206,1)100%)",
"background":"linear-gradient(to bottom,rgba(252,255,244,1) 0%,rgba(233,233,206,1)100%)",
"filter":"progid:DXImageTransform.Microsoft.gradient( startColorstr='#45484d', endColorstr='#000000',GradientType=0)"
});
$('.titleFormParser,.aboutMifet').css({
"background":"rgb(252,255,244)",
"background":"-moz-linear-gradient(top, rgba(252,255,244,1) 0%, rgba(223,229,215,1) 40%, rgba(179,190,173,1) 100%)",
"background":"-webkit-linear-gradient(top, rgba(252,255,244,1) 0%,rgba(223,229,215,1) 40%,rgba(179,190,173,1) 100%)",
"background":"linear-gradient(to bottom, rgba(252,255,244,1) 0%,rgba(223,229,215,1) 40%,rgba(179,190,173,1) 100%)",
"filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr='#fcfff4',endColorstr='#b3bead',GradientType=0)"
});
$('#btnAction,#btnCloseAbout').css({
"border":"1px solid #337fed",
"-moz-box-shadow":"inset 0px 1px 0px 0px #97c4fe",
"-webkit-box-shadow":"inset 0px 1px 0px 0px #97c4fe",
"box-shadow":"inset 0px 1px 0px 0px #97c4fe",
"background":"#3d94f6",
"background":"-moz-linear-gradient(top, #3d94f6 5%, #1e62d0 100%)",
"background":"-webkit-linear-gradient(top, #3d94f6 5%, #1e62d0 100%)",
"background":"-webkit-gradient(linear,left top,left bottom,color-stop(0.05,#3d94f6),color-stop(1,#1e62d0))",
"background":"-o-linear-gradient(top, #3d94f6 5%, #1e62d0 100%)",
"background":"-ms-linear-gradient(top, #3d94f6 5%, #1e62d0 100%)",
"background":"linear-gradient(to bottom, #3d94f6 5%, #1e62d0 100%)",
"filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr='#3d94f6',endColorstr='#1e62d0',GradientType=0)"
});
$('#btnAction,#btnCloseAbout').hover(function() {
$(this).css({
"background":"-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #1e62d0), color-stop(1, #3d94f6))",
"background":"-moz-linear-gradient(top, #1e62d0 5%, #3d94f6 100%)",
"background":"-webkit-linear-gradient(top, #1e62d0 5%, #3d94f6 100%)",
"background":"-o-linear-gradient(top, #1e62d0 5%, #3d94f6 100%)",
"background":"-ms-linear-gradient(top, #1e62d0 5%, #3d94f6 100%)",
"background":"linear-gradient(to bottom, #1e62d0 5%, #3d94f6 100%)",
"filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr='#1e62d0',endColorstr='#3d94f6',GradientType=0)",
"background":"#1e62d0"
})
}).mouseout(function(){
$(this).css({
"border":"1px solid #337fed",
"-moz-box-shadow":"inset 0px 1px 0px 0px #97c4fe",
"-webkit-box-shadow":"inset 0px 1px 0px 0px #97c4fe",
"box-shadow":"inset 0px 1px 0px 0px #97c4fe",
"background":"#3d94f6",
"background":"-moz-linear-gradient(top, #3d94f6 5%, #1e62d0 100%)",
"background":"-webkit-linear-gradient(top, #3d94f6 5%, #1e62d0 100%)",
"background":"-webkit-gradient(linear,left top,left bottom,color-stop(0.05,#3d94f6),color-stop(1,#1e62d0))",
"background":"-o-linear-gradient(top, #3d94f6 5%, #1e62d0 100%)",
"background":"-ms-linear-gradient(top, #3d94f6 5%, #1e62d0 100%)",
"background":"linear-gradient(to bottom, #3d94f6 5%, #1e62d0 100%)",
"filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr='#3d94f6',endColorstr='#1e62d0',GradientType=0)"
});
});
$("#minimizeBtn").attr("src","https://3.bp.blogspot.com/-k-qs7U5kvkw/XCNsReS3ZSI/AAAAAAAAAtc/u4BuIBOwWzYiGjGYZF-aF4Nf7ymCuJvywCLcBGAs/s1600/minimize.png");
$("#windowBtn").attr("src","https://4.bp.blogspot.com/-gm9ZIJil980/XCNsRVQ7PoI/AAAAAAAAAtU/H3UleXFW7sk1ckZzNFkXvBOvn_AhT4_pQCLcBGAs/s1600/maximize.png");
$("#closeBtn").attr("src","https://1.bp.blogspot.com/-vUJ5p873vyo/XCNsRRfwUZI/AAAAAAAAAtY/9RB1jLzR7ZMXz1g2hBiQyd1pyGIH500egCLcBGAs/s1600/close.png");
darkThemeBool=false;
}

var winChangeBool=false;
function windowChange(){
var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : window.screenX;
var dualScreenTop = window.screenTop != undefined ? window.screenTop : window.screenY;
var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;
var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;
var left = ((width / 2) - (600 / 2)) + dualScreenLeft;
var top = ((height / 2) - (400 / 2)) + dualScreenTop;
if(width<=800){return;}
if(winChangeBool==false){
$("#frmEncoder1").css({"z-index":"+99999999","opacity":"1","width":"600px","position":"fixed","top":top,"left":left});
dragElement(document.getElementById("frmEncoder1"));
$("#titleFormParser").css({"cursor":"move"});
document.getElementById("fileNameInfo").style.display="none";
document.getElementById("frmEncoder1").style.opacity = '1.0';
$('#txtInput').css({"width":"100%"});
winChangeBool=true;
}else{
document.getElementById("frmEncoder1").onmousedown="";
$("#frmEncoder1").css({"position":"relative","top":"0","left":"0","width":"100%"});
$("#titleFormParser").css({"cursor":"default"});
$('#txtInput').css({"width":"100%"});
document.getElementById("fileNameInfo").style.display="";
winChangeBool=false;
}}

function dragElement(elmnt) {
var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
if (document.getElementById(elmnt.id + "header")) {
document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
}else{elmnt.onmousedown = dragMouseDown;}
function dragMouseDown(e) {
e = e || window.event;
pos3 = e.clientX;
pos4 = e.clientY;
document.onmouseup = closeDragElement;
document.onmousemove = elementDrag;
}
function elementDrag(e) {
e = e || window.event;
e.preventDefault();
pos1 = pos3 - e.clientX;
pos2 = pos4 - e.clientY;
pos3 = e.clientX;
pos4 = e.clientY;
elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
elmnt.style.opacity = '1.0';
}
function closeDragElement() {
document.onmouseup = null;
document.onmousemove = null;
}}
var hideFormBool=false;
function hideFormWindow(){
if(hideFormBool==false){
$('#frmEncoder1').hide('slow');
$('#btmTitle').show()
.css({'opacity': 0, 'bottom': '-100px' })
.animate( { 'opacity': '1', 'bottom' : 0 }, 1000 );
$('#btmTitle').css({'opacity':'1.0','z-index':'+999999999999999999999'});
hideFormBool=true;
}else{
$('#btmTitle').hide()
.css({'opacity': 1})
.animate( { 'opacity': '0', 'bottom' : -100 }, 1000 );
$('#frmEncoder1').css({'position':'fixed'});
$('#frmEncoder1').show('slow');
if(winChangeBool==false){
$("#frmEncoder1").css({"position":"relative","top":"0","left":"0","width":"100%"});
$("#titleFormParser").css({"cursor":"default"});
$('#txtInput').css({"width":"100%"});
document.getElementById("fileNameInfo").style.display="";
}hideFormBool=false;}}
function clearTextArt(){
tmpReadonly=true;makeReadOnly();
}
function textArt(){
if($('#txtInput').val()!=""){tmpSelectedCopy=$('#txtInput').val();}
if(typeof textArtString=="undefined"){
tmpReadonly=false;makeReadOnly();
document.getElementById("txtInput").value="Please wait... try load textart plugin !";
document.getElementById("btnAction").setAttribute("onclick","clearTextArt()");
var loadCode = document.createElement('script');
loadCode.setAttribute("src","https://drive.google.com/uc?export=download&id=1pgS03ByZXv4FxOZ3kPB7w9QqQNweLMJw");
document.body.appendChild(loadCode);
}else{
tmpReadonly=false;makeReadOnly();document.getElementById("txtInput").value=textArtString;
}}
document.getElementById("txtInput").setAttribute("readonly",true);
document.getElementById("txtInput").style.background="#e9e9ce";
document.getElementById("btnAction").setAttribute("onclick","");
disableBottomBtn();

window.onload = function(){
document.getElementById('actionLineNo').innerHTML = "Please wait ! program still loading.";
var myVar = setTimeout(callAfterLoad, 5000);
}
function callAfterLoad(){
$("#closeBtn").attr("onclick","hideFormWindow()");
$("#windowBtn").attr("onclick","windowChange()");
document.getElementById("txtInput").setAttribute("placeholder","Input text here...");
tmpReadonly=true;
makeReadOnly();
document.getElementById("txtInput").focus();
}

/* Undo and Redo Function */
(function() {
'use strict';
var SimpleUndo = function(options) {
var settings = options ? options : {};
var defaultOptions = {
provider: function() {
throw new Error("No provider!");
},
maxLength: 30,
onUpdate: function() {}
};
this.provider = (typeof settings.provider != 'undefined') ? settings.provider : defaultOptions.provider;
this.maxLength = (typeof settings.maxLength != 'undefined') ? settings.maxLength : defaultOptions.maxLength;
this.onUpdate = (typeof settings.onUpdate != 'undefined') ? settings.onUpdate : defaultOptions.onUpdate;
this.initialItem = null;
this.clear();
};

function truncate(stack, limit) {
while (stack.length > limit) {
stack.shift();
}}
SimpleUndo.prototype.initialize = function(initialItem) {
this.stack[0] = initialItem;
this.initialItem = initialItem;
};
SimpleUndo.prototype.clear = function() {
this.stack = [this.initialItem];
this.position = 0;
this.onUpdate();
};
SimpleUndo.prototype.save = function() {
this.provider(function(current) {
truncate(this.stack, this.maxLength);
this.position = Math.min(this.position, this.stack.length - 1);
this.stack = this.stack.slice(0, this.position + 1);
this.stack.push(current);
this.position++;
this.onUpdate();
}.bind(this));
};
SimpleUndo.prototype.undo = function(callback) {
if (this.canUndo()) {
var item = this.stack[--this.position];
this.onUpdate();
if (callback) {
callback(item);
}}
};
SimpleUndo.prototype.redo = function(callback) {
if (this.canRedo()) {
var item = this.stack[++this.position];
this.onUpdate();
if (callback) {
callback(item);
}}
};
SimpleUndo.prototype.canUndo = function() {
return this.position > 0;
};
SimpleUndo.prototype.canRedo = function() {
return this.position < this.count();
};
SimpleUndo.prototype.count = function() {
return this.stack.length - 1;
};
if (typeof module != 'undefined') {
module.exports = SimpleUndo;
}
if (typeof window != 'undefined') {
window.SimpleUndo = SimpleUndo;
}
})();

function updateButtons(history) {
$('#undo').attr('disabled', !history.canUndo());
$('#redo').attr('disabled', !history.canRedo());
if (!history.canUndo()) {$('#undo1').css({"color": "#ccc"});
} else {$('#undo1').css({"color": "#000"})}
if (!history.canRedo()) {
$('#redo1').css({"color": "#ccc"});} else {$('#redo1').css({"color": "#000"})}
}

function setEditorContents(contents) {$('#txtInput').val(contents);}

$(function() {
var history = new SimpleUndo({
maxLength: 200,
provider: function(done) {
done($('#txtInput').val());
},
onUpdate: function() {if (!history) return;updateButtons(history);}
});
$('#undo, #undo1').click(function() {history.undo(setEditorContents);});
$('#redo, #redo1').click(function() {history.redo(setEditorContents);});
$('#txtInput').on('input change paste', function() {history.save();});
updateButtons(history);
});

/* Numbered Text Area */
(function($) {
$.fn.numberedtextarea = function(options) {
var settings = $.extend({
color: null,
borderColor: null,
class: null,
allowTabChar: false,
}, options);
this.each(function() {
if (this.nodeName.toLowerCase() !== "textarea") {
console.log('This is not a <textarea>, so no way Jose...');
return false;
}
addWrapper(this, settings);
addLineNumbers(this, settings);
if (settings.allowTabChar) {
$(this).allowTabChar();
}
});
return this;
};
$.fn.allowTabChar = function() {
if (this.jquery) {
this.each(function() {
if (this.nodeType == 1) {
var nodeName = this.nodeName.toLowerCase();
if (nodeName == "textarea" || (nodeName == "input" && this.type == "text")) {
allowTabChar(this);
}}})}
return this;
}

function addWrapper(element, settings) {
var wrapper = $('<div class="numberedtextarea-wrapper"></div>').insertAfter(element);
$(element).detach().appendTo(wrapper);
}

function addLineNumbers(element, settings) {
element = $(element);
var wrapper = element.parents('.numberedtextarea-wrapper');
var paddingLeft = parseFloat(element.css('padding-left'));
var paddingTop = parseFloat(element.css('padding-top')) + 1;
var paddingBottom = parseFloat(element.css('padding-bottom'));
var lineNumbers = $('<div class="numberedtextarea-line-numbers"></div>').insertAfter(element);
element.css({
paddingLeft: paddingLeft + lineNumbers.width() + 'px'
}).on('change keyup mouseup paste', function() {
renderLineNumbers(element, settings);
}).on('scroll', function() {
scrollLineNumbers(element, settings);
});
lineNumbers.css({
paddingLeft: paddingLeft + 'px',
paddingTop: paddingTop + 'px',
lineHeight: element.css('line-height'),
fontFamily: element.css('font-family'),
fontSize: element.css('font-size'),
width: lineNumbers.width() - paddingLeft + 'px',
});
element.trigger('change');
}

function renderLineNumbers(element, settings) {
element = $(element);
var linesDiv = element.parent().find('.numberedtextarea-line-numbers');
var count = element.val().split("\n").length;
var paddingBottom = parseFloat(element.css('padding-bottom'));
linesDiv.find('.numberedtextarea-number').remove();
for (i = 1; i <= count; i++) {
var line = $('<div class="numberedtextarea-number numberedtextarea-number-' + i + '">' + i + '</div>').appendTo(linesDiv);
if (i === count) {
line.css('margin-bottom', paddingBottom + 'px');
}
}
}

function scrollLineNumbers(element, settings) {
element = $(element);
var linesDiv = element.parent().find('.numberedtextarea-line-numbers');
linesDiv.scrollTop(element.scrollTop());
}

function pasteIntoInput(el, text) {
el.focus();
if (typeof el.selectionStart == "number") {
var val = el.value;
var selStart = el.selectionStart;
el.value = val.slice(0, selStart) + text + val.slice(el.selectionEnd);
el.selectionEnd = el.selectionStart = selStart + text.length;
} else if (typeof document.selection != "undefined") {
var textRange = document.selection.createRange();
textRange.text = text;
textRange.collapse(false);
textRange.select();
}
}
function allowTabChar(el) {
$(el).keydown(function(e) {
if (e.which == 9) {
pasteIntoInput(this, "\t");
return false;
}
});
$(el).keypress(function(e) {
if (e.which == 9) {
return false;
}
});
}
}(jQuery));
$('#txtInput').numberedtextarea();

/* Image to ASCII Converter */
(function($) {
function _cpaToString(cpa, width, charSize, blocks, colors) {
var reducedPixelArray = [],
blockArray = [],
letters = [];
for (var b = 0, c = cpa.length; b < c; b += 4) {
reducedPixelArray.push(Math.max(cpa[b], cpa[b + 1], cpa[b + 2]));
}
for (var h = 0; h < blocks.y; h++) {
for (var i = 0; i < blocks.x; i++) {
var pixelsInBlock = [];
var baseOffset = h * charSize.y * width + i * charSize.x;
for (var j = 0; j < charSize.y; j++) {
for (var k = 0; k < charSize.x; k++) {
var currentOffset = baseOffset + (j * width + k);
pixelsInBlock.push(reducedPixelArray[currentOffset]);
}
}
blockArray.push(parseInt(pixelsInBlock.reduce(function(a, b) {
return a + b;
}) / (charSize.x * charSize.y), 10));
}
}
for (var l = 0, m = blockArray.length; l < m; l++) {
letters.push($.grep(colors, function(el) {
return (blockArray[0] <= el.top && blockArray[0] >= el.bottom);
})[0].letter);
blockArray.shift();
if ((l + 1) % blocks.x === 0) {
letters.push('\n');
}
}
return letters.join('');
}
var methods = {
init: function(options) {
var settings = $.extend({
letters: 'XMI/-.',
invert: false,
fps: 25
}, options || {});
return this.each(function() {
var letters = settings.invert ? settings.letters.split('').reverse() : settings.letters.split(''),
colors = [],
dimensions = {
width: $(this).width(),
height: $(this).height()
};
for (var a = 0; a < letters.length; a++) {
colors.push({
top: 255 / letters.length * (a + 1),
bottom: 255 / letters.length * a,
letter: letters[a]
});
}
var dummy = $('<span>').text('a').css({
'font-family': 'monospace',
'visibility': 'hidden'
}).appendTo($(this).parent());
var charSize = {
x: dummy.width(),
y: dummy.height()
};
dummy.remove();
var blocks = {
x: parseInt(dimensions.width / charSize.x, 10),
y: parseInt(dimensions.height / charSize.y, 10)
};
$(this).wrap($('<span>', {
'class': 'abc-wrapper',
'width': dimensions.width,
'height': dimensions.height
}).css({
'display': $(this).css('display'),
'overflow': 'hidden'
})).hide();
if (this.nodeName === 'IMG') {
var $img = $(this),
pic = $('<canvas>').attr(dimensions),
picCtx = pic[0].getContext('2d'),
pixelArray, art;
picCtx.drawImage($img[0], 0, 0, dimensions.width, dimensions.height);
pixelArray = picCtx.getImageData(0, 0, dimensions.width, dimensions.height).data;
art = ['<div style="line-height:', charSize.y, 'px;">', _cpaToString(pixelArray, dimensions.width, charSize, blocks, colors), '</div>'].join('');
$img.after(art);
} else if (this.nodeName === 'VIDEO') {
var $vid = $(this),
vid = $('<canvas>').attr(dimensions),
vidCtx = vid[0].getContext('2d'),
videoInterval;
$vid.after(['<div style="line-height:', charSize.y, 'px;"></div>'].join(''));
videoInterval = setInterval(function() {
vidCtx.clearRect(0, 0, dimensions.width, dimensions.height);
vidCtx.drawImage($vid[0], 0, 0, dimensions.width, dimensions.height);
var pixelArray = vidCtx.getImageData(0, 0, dimensions.width, dimensions.height).data;
$vid.next('pre').text(_cpaToString(pixelArray, dimensions.width, charSize, blocks, colors));
}, 1000 / settings.fps);
$vid.data('abcInterval', videoInterval);
} else {
$.error('.abc() can only be applied to image and video elements!');
}
});
},
undo: function() {
return this.each(function() {
$(this).show().next('pre').remove().end().unwrap();
if ($(this).data('abcInterval')) {
clearInterval($(this).data('abcInterval'));
}
});
}
};
$.fn.abc = function(method) {
if (methods[method]) {
return methods[method].apply(this, [].slice.call(arguments, 1));
} else if (typeof method === 'object' || !method) {
return methods.init.apply(this, arguments);
} else {
$.error('Method ' + method + ' does not exist on jQuery.abc');
}
};
})(jQuery);

/* Script Obfuscator */
var _w = window,
_n = navigator,
_d = document;
(function() {
version: "1.0.0";EnhanceCSSDoc: true;FlashMaxCurVersion: 10;FlashMinVersion: [6, 65];undefined,
reEmail =
/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
reWhitespace = /^\s+$/,
reInteger = /^\d+$/,
reInteger2 = /^-?\d+$/,
reReal = /^[0-9]+\.?[0-9]?[0-9]?$/,
reNumeric = /^-?\d*\.?\d+$/,
rePhone = /(?:\s|^|:)[\(\)\d\+\- ]*[^#]?\d{5}[\(\)\d\+\- ]*(?:ext|extension)?[:;]?[\(\)\d\+\- ]*(?:\s|$)/,
reGUID = /^\{?[A-Z0-9]{8}-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{12}\}?$/,
reALPHANUMERIC = /^[a-zA-Z0-9]+$/,
reALPHA = /^[a-zA-Z]+$/,
reStrategiesURL = /^(http|https):\/\/([a-zA-Z1-9-\.]{4,})\.ni\.(dev|strategiesuk\.net)$/,
reUKPostcode = /^[a-zA-Z]{1,2}\d{1,2}[a-zA-Z]?\s*\d[a-zA-Z]{2}$/,
reURL = /^[A-Za-z0-9\.\-]+\.[A-Za-z]{2,4}(:[0-9]+)?\/?.*$/,
reDate = /^[0-3]?[0-9]\/[0-1]?[0-9]\/[1-2]?[0-9]?[0-9][0-9]$/;
var _st = _w.setTimeout,
_si = _w.setInterval
_w.setTimeout = function(a, b) {
if (typeof a == "function") {
var c = Array.prototype.slice.call(arguments, 2),
f = (function() {
a.apply(null, c)
});
return _st(f, b)
};
return _st(a, b)
}
_w.setInterval = function(a, b) {
if (typeof a == "function") {
var c = Array.prototype.slice.call(arguments, 2),
f = (function() {
a.apply(null, c)
});
return _si(f, b)
};
return _si(a, b)
}
if (!_d.getElementsByTagName('*').length) {
if (_d.all) {
_d.getElementsByTagName = function(a) {
if (a == "*") {
return _d.all
} else {
return _d.all.tags(a.toUpper())
}
}
}
};
if (!Array.prototype.indexOf) {
Array.prototype.indexOf = function(a) {
var b = this.length,
c = Number(arguments[1]) || 0;
c = (c < 0) ? Math.ceil(c) : Math.floor(c);
if (c < 0) {
c += b
};
for (; c < b; c++) {
if (c in this && this[c] === a) {
return c
}
};
return -1
}
};
if (!Array.prototype.push) {
Array.prototype.push = function() {
for (var i = 0; i < arguments.length; i++) {
this[this.length] = arguments[i]
};
return this.length
}
};
if (!Array.prototype.unshift) {
Array.prototype.unshift = function() {
var i = unshift.arguments.length;
for (var j = this.length - 1; j >= 0; --j) {
this[j + i] = this[j]
};
for (j = 0; j < i; ++j) {
this[j] = unshift.argument[j]
}
}
};
if (!Array.prototype.shift) {
Array.prototype.shift = function(a) {
var b = this[0];
for (var i = 1; i < this.length; ++i) {
this[i - 1] = this[i]
};
this.length--;
return b
}
}
_d.getElementsByClassName = function(a, t) {
var b = new Array(),
t = t || "*",
c = _d.getElementsByTagName(t);
for (var i = 0; i < c.length; i++) {
if (c[i].className.indexOf(" ") >= 0) {
var d = c[i].className.split(" ");
for (var j = 0; j < d.length; j++) {
if (d[j] == a) {
b.push(c[i])
}
}
} else if (c[i].className == a) {
b.push(c[i])
}
};
return b
}
S = Strictly = {
EncodeType: "entity",
getEl: function(el, a) {
a = a || _d;
if (typeof(el) == "string") {
el = a.getElementById(el)
};
return el
},
getObj: function(el) {
return (!el) ? _d : this.isString(el) ? S.getEl(el) : el
},
getRadioVal: function(a) {
var b = "",
c = _d.getElementsByTagName('input'),
d = c.length;
for (i = 0; i < d; i++) {
if ((c[i].type == "radio") && (c[i].name == a) && (c[i].checked)) {
b = c[i].value
}
};
return b
},
setContent: function(el, a) {
el = S.getObj(el);
if (typeof(el.value) !== "undefined") {
el.value = a
} else if (el.nodeType) {
el.innerHTML = a
};
return
},
setText: function(el, a) {
el = S.getObj(el);
if (el && a) {
if (el.innerText) {
el.innerText = a
} else if (el.textContent) {
el.textContent = a
} else if (_d.createElement) {
if (el.firstChild) {
el.firstChild.nodeValue = a
} else {
el.appendChild(_d.createTextNode(a))
}
}
};
return
},
getText: function(el) {
el = S.getObj(el);
var a = "";
if (el) {
if (el.innerText) {
a = el.innerText
} else if (el.textContent) {
a = el.textContent
} else if (el.firstChild && el.firstChild.nodeType == 3) {
a = el.firstChild.nodeValue
}
};
return a
},
getFlashMovie: function(a) {
var b;
if (S.Browser.ie) {
if (_d.getElementById) {
b = G(a);
if (b) return b
};
b = (_w[a]) ? _w[a] : _d[a];
return b
} else {
b = _d[a];
if (!b && _d.embeds && _d.embeds[a]) {
b = _d.embeds[a]
};
return b
}
},
getIframe: function(id) {
var a;
if (_d.getElementById) {
return G(id)
} else if (_w.frames && _w.frames.length) {
return _w.frames[id]
}
},
getIframeWin: function(a) {
if (a) {
if (a.contentWindow) {
return a.contentWindow
} else if (a.contentDocument && S.Browser && S.Browser.opera) {
return a.contentDocument
} else {
return a
}
}
},
getIframeDoc: function(a) {
if (a) {
if (a.contentDocument) {
return a.contentDocument
} else if (a.contentWindow.document) {
return a.contentWindow.document
} else if (a.document) {
return a.document
}
}
},
getQuerystring: function() {
var a = "";
if (location.href) {
var q = _w.location.search;
if (q && q.length > 1) {
a = q.substring(1, q.length)
}
};
return a
},
getBody: function() {
return _d.getElementsByTagName("body")[0] || _d.body
},
isArray: function(o) {
return (o instanceof Array)
},
isFunction: function(o) {
return (typeof(o) == "function")
},
isNumber: function(o) {
return (typeof(o) == "number")
},
isBoolean: function(o) {
return (typeof(o) == "boolean")
},
isString: function(o) {
return (typeof(o) == "string")
},
isObject: function(o) {
return (typeof(o) == "object")
},
isDOMobj: function(o) {
if (this.isObject(o)) {
if (o.nodeType) {
return true
}
};
return false
},
makeArray: function(a) {
var c = [];
if (a != null) {
var i = a.length;
if (i == null || this.isString(a) || Strictly.isFunction(b) || (a === _w)) {
c[0] = a
} else {
while (i) {
c[--i] = b[i]
}
}
};
return c
},
inArray: function(a, b) {
for (var i = 0, x = b.length; i < x; i++) {
if (b[i] === a) {
return i
}
};
return -1
},
enc: function(a) {
if (typeof(encodeURIComponent) == "function") {
return encodeURIComponent(a)
} else {
return escape(a)
}
},
denc: function(a) {
if (typeof(decodeURIComponent) == "function") {
return decodeURIComponent(a)
} else {
return unescape(a)
}
},
isEmpty: function(a) {
if (a) {
return ((a === null) || a.length == 0 || reWhitespace.test(a))
} else {
return true
}
},
isEmail: function(val) {
if (val && reEmail.test(val)) {
return true
} else {
return false
}
},
addClass: function(e, c) {
if (e) {
if (iE(e.className)) {
e.className = c
} else {
if (!hasClass(e, c)) e.className += ' ' + c
}
}
},
delClass: function(e, c) {
if (e && !iE(e.className)) {
if (e.className.split(' ').length > 1) {
e.className = e.className.replace(new RegExp(' ' + c + '\\b'), '')
} else {
e.className = e.className.replace(new RegExp(c + '\\b'), '')
}
}
},
hasClass: function(e, c) {
if (e && e.className != '') {
cs = e.className.split(' ');
for (i = 0; i < cs.length; i++) {
if (cs[i] == c) return true
}
};
return false
},
toggleClass: function(e, c) {
if (e) {
if (hasClass(e, c)) {
delClass(e, c)
} else {
addClass(e, c)
}
}
},
convertToBool: function(v) {
v = v.toLowerCase();
if (v == "true" || v == "on" || v == "yes" || v == "1") {
return true
} else if (v == "false" || v == "off" || v == "no" || v == "0") {
return false
};
return null
},
convertFromBool: function(b) {
if (this.isBoolean(b)) {
if (b) {
return "Yes"
} else {
return "No"
}
}
},
HTML2Numerical: function(s) {
var a = new Array('&nbsp;', '&iexcl;', '&cent;', '&pound;', '&curren;', '&yen;', '&brvbar;', '&sect;', '&uml;', '&copy;', '&ordf;', '&laquo;', '&not;', '&shy;',
'&reg;', '&macr;', '&deg;', '&plusmn;', '&sup2;', '&sup3;', '&acute;', '&micro;', '&para;', '&middot;', '&cedil;', '&sup1;', '&ordm;', '&raquo;', '&frac14;',
'&frac12;', '&frac34;', '&iquest;', '&agrave;', '&aacute;', '&acirc;', '&atilde;', '&auml;', '&aring;', '&aelig;', '&ccedil;', '&egrave;', '&eacute;',
'&ecirc;', '&euml;', '&igrave;', '&iacute;', '&icirc;', '&iuml;', '&eth;', '&ntilde;', '&ograve;', '&oacute;', '&ocirc;', '&otilde;', '&ouml;', '&times;',
'&oslash;', '&ugrave;', '&uacute;', '&ucirc;', '&uuml;', '&yacute;', '&thorn;', '&szlig;', '&agrave;', '&aacute;', '&acirc;', '&atilde;', '&auml;', '&aring;',
'&aelig;', '&ccedil;', '&egrave;', '&eacute;', '&ecirc;', '&euml;', '&igrave;', '&iacute;', '&icirc;', '&iuml;', '&eth;', '&ntilde;', '&ograve;', '&oacute;',
'&ocirc;', '&otilde;', '&ouml;', '&divide;', '&oslash;', '&ugrave;', '&uacute;', '&ucirc;', '&uuml;', '&yacute;', '&thorn;', '&yuml;', '&quot;', '&amp;',
'&lt;', '&gt;', '&oelig;', '&oelig;', '&scaron;', '&scaron;', '&yuml;', '&circ;', '&tilde;', '&ensp;', '&emsp;', '&thinsp;', '&zwnj;', '&zwj;', '&lrm;',
'&rlm;', '&ndash;', '&mdash;', '&lsquo;', '&rsquo;', '&sbquo;', '&ldquo;', '&rdquo;', '&bdquo;', '&dagger;', '&dagger;', '&permil;', '&lsaquo;', '&rsaquo;',
'&euro;', '&fnof;', '&alpha;', '&beta;', '&gamma;', '&delta;', '&epsilon;', '&zeta;', '&eta;', '&theta;', '&iota;', '&kappa;', '&lambda;', '&mu;', '&nu;',
'&xi;', '&omicron;', '&pi;', '&rho;', '&sigma;', '&tau;', '&upsilon;', '&phi;', '&chi;', '&psi;', '&omega;', '&alpha;', '&beta;', '&gamma;', '&delta;',
'&epsilon;', '&zeta;', '&eta;', '&theta;', '&iota;', '&kappa;', '&lambda;', '&mu;', '&nu;', '&xi;', '&omicron;', '&pi;', '&rho;', '&sigmaf;', '&sigma;',
'&tau;', '&upsilon;', '&phi;', '&chi;', '&psi;', '&omega;', '&thetasym;', '&upsih;', '&piv;', '&bull;', '&hellip;', '&prime;', '&prime;', '&oline;', '&frasl;',
'&weierp;', '&image;', '&real;', '&trade;', '&alefsym;', '&larr;', '&uarr;', '&rarr;', '&darr;', '&harr;', '&crarr;', '&larr;', '&uarr;', '&rarr;', '&darr;',
'&harr;', '&forall;', '&part;', '&exist;', '&empty;', '&nabla;', '&isin;', '&notin;', '&ni;', '&prod;', '&sum;', '&minus;', '&lowast;', '&radic;', '&prop;',
'&infin;', '&ang;', '&and;', '&or;', '&cap;', '&cup;', '&int;', '&there4;', '&sim;', '&cong;', '&asymp;', '&ne;', '&equiv;', '&le;', '&ge;', '&sub;', '&sup;',
'&nsub;', '&sube;', '&supe;', '&oplus;', '&otimes;', '&perp;', '&sdot;', '&lceil;', '&rceil;', '&lfloor;', '&rfloor;', '&lang;', '&rang;', '&loz;', '&spades;',
'&clubs;', '&hearts;', '&diams;'),
b = new Array('&#160;', '&#161;', '&#162;', '&#163;', '&#164;', '&#165;', '&#166;', '&#167;', '&#168;', '&#169;', '&#170;', '&#171;', '&#172;', '&#173;',
'&#174;', '&#175;', '&#176;', '&#177;', '&#178;', '&#179;', '&#180;', '&#181;', '&#182;', '&#183;', '&#184;', '&#185;', '&#186;', '&#187;', '&#188;', '&#189;',
'&#190;', '&#191;', '&#192;', '&#193;', '&#194;', '&#195;', '&#196;', '&#197;', '&#198;', '&#199;', '&#200;', '&#201;', '&#202;', '&#203;', '&#204;', '&#205;',
'&#206;', '&#207;', '&#208;', '&#209;', '&#210;', '&#211;', '&#212;', '&#213;', '&#214;', '&#215;', '&#216;', '&#217;', '&#218;', '&#219;', '&#220;', '&#221;',
'&#222;', '&#223;', '&#224;', '&#225;', '&#226;', '&#227;', '&#228;', '&#229;', '&#230;', '&#231;', '&#232;', '&#233;', '&#234;', '&#235;', '&#236;', '&#237;',
'&#238;', '&#239;', '&#240;', '&#241;', '&#242;', '&#243;', '&#244;', '&#245;', '&#246;', '&#247;', '&#248;', '&#249;', '&#250;', '&#251;', '&#252;', '&#253;',
'&#254;', '&#255;', '&#34;', '&#38;', '&#60;', '&#62;', '&#338;', '&#339;', '&#352;', '&#353;', '&#376;', '&#710;', '&#732;', '&#8194;', '&#8195;', '&#8201;',
'&#8204;', '&#8205;', '&#8206;', '&#8207;', '&#8211;', '&#8212;', '&#8216;', '&#8217;', '&#8218;', '&#8220;', '&#8221;', '&#8222;', '&#8224;', '&#8225;',
'&#8240;', '&#8249;', '&#8250;', '&#8364;', '&#402;', '&#913;', '&#914;', '&#915;', '&#916;', '&#917;', '&#918;', '&#919;', '&#920;', '&#921;', '&#922;',
'&#923;', '&#924;', '&#925;', '&#926;', '&#927;', '&#928;', '&#929;', '&#931;', '&#932;', '&#933;', '&#934;', '&#935;', '&#936;', '&#937;', '&#945;', '&#946;',
'&#947;', '&#948;', '&#949;', '&#950;', '&#951;', '&#952;', '&#953;', '&#954;', '&#955;', '&#956;', '&#957;', '&#958;', '&#959;', '&#960;', '&#961;', '&#962;',
'&#963;', '&#964;', '&#965;', '&#966;', '&#967;', '&#968;', '&#969;', '&#977;', '&#978;', '&#982;', '&#8226;', '&#8230;', '&#8242;', '&#8243;', '&#8254;',
'&#8260;', '&#8472;', '&#8465;', '&#8476;', '&#8482;', '&#8501;', '&#8592;', '&#8593;', '&#8594;', '&#8595;', '&#8596;', '&#8629;', '&#8656;', '&#8657;',
'&#8658;', '&#8659;', '&#8660;', '&#8704;', '&#8706;', '&#8707;', '&#8709;', '&#8711;', '&#8712;', '&#8713;', '&#8715;', '&#8719;', '&#8721;', '&#8722;',
'&#8727;', '&#8730;', '&#8733;', '&#8734;', '&#8736;', '&#8743;', '&#8744;', '&#8745;', '&#8746;', '&#8747;', '&#8756;', '&#8764;', '&#8773;', '&#8776;',
'&#8800;', '&#8801;', '&#8804;', '&#8805;', '&#8834;', '&#8835;', '&#8836;', '&#8838;', '&#8839;', '&#8853;', '&#8855;', '&#8869;', '&#8901;', '&#8968;',
'&#8969;', '&#8970;', '&#8971;', '&#9001;', '&#9002;', '&#9674;', '&#9824;', '&#9827;', '&#9829;', '&#9830;'),
r = this.inArray('&lt;', a);
return this.swapArrayVals(s, a, b)
},
NumericalToHTML: function(s) {
var a = new Array('&#160;', '&#161;', '&#162;', '&#163;', '&#164;', '&#165;', '&#166;', '&#167;', '&#168;', '&#169;', '&#170;', '&#171;', '&#172;', '&#173;',
'&#174;', '&#175;', '&#176;', '&#177;', '&#178;', '&#179;', '&#180;', '&#181;', '&#182;', '&#183;', '&#184;', '&#185;', '&#186;', '&#187;', '&#188;', '&#189;',
'&#190;', '&#191;', '&#192;', '&#193;', '&#194;', '&#195;', '&#196;', '&#197;', '&#198;', '&#199;', '&#200;', '&#201;', '&#202;', '&#203;', '&#204;', '&#205;',
'&#206;', '&#207;', '&#208;', '&#209;', '&#210;', '&#211;', '&#212;', '&#213;', '&#214;', '&#215;', '&#216;', '&#217;', '&#218;', '&#219;', '&#220;', '&#221;',
'&#222;', '&#223;', '&#224;', '&#225;', '&#226;', '&#227;', '&#228;', '&#229;', '&#230;', '&#231;', '&#232;', '&#233;', '&#234;', '&#235;', '&#236;', '&#237;',
'&#238;', '&#239;', '&#240;', '&#241;', '&#242;', '&#243;', '&#244;', '&#245;', '&#246;', '&#247;', '&#248;', '&#249;', '&#250;', '&#251;', '&#252;', '&#253;',
'&#254;', '&#255;', '&#34;', '&#38;', '&#60;', '&#62;', '&#338;', '&#339;', '&#352;', '&#353;', '&#376;', '&#710;', '&#732;', '&#8194;', '&#8195;', '&#8201;',
'&#8204;', '&#8205;', '&#8206;', '&#8207;', '&#8211;', '&#8212;', '&#8216;', '&#8217;', '&#8218;', '&#8220;', '&#8221;', '&#8222;', '&#8224;', '&#8225;',
'&#8240;', '&#8249;', '&#8250;', '&#8364;', '&#402;', '&#913;', '&#914;', '&#915;', '&#916;', '&#917;', '&#918;', '&#919;', '&#920;', '&#921;', '&#922;',
'&#923;', '&#924;', '&#925;', '&#926;', '&#927;', '&#928;', '&#929;', '&#931;', '&#932;', '&#933;', '&#934;', '&#935;', '&#936;', '&#937;', '&#945;', '&#946;',
'&#947;', '&#948;', '&#949;', '&#950;', '&#951;', '&#952;', '&#953;', '&#954;', '&#955;', '&#956;', '&#957;', '&#958;', '&#959;', '&#960;', '&#961;', '&#962;',
'&#963;', '&#964;', '&#965;', '&#966;', '&#967;', '&#968;', '&#969;', '&#977;', '&#978;', '&#982;', '&#8226;', '&#8230;', '&#8242;', '&#8243;', '&#8254;',
'&#8260;', '&#8472;', '&#8465;', '&#8476;', '&#8482;', '&#8501;', '&#8592;', '&#8593;', '&#8594;', '&#8595;', '&#8596;', '&#8629;', '&#8656;', '&#8657;',
'&#8658;', '&#8659;', '&#8660;', '&#8704;', '&#8706;', '&#8707;', '&#8709;', '&#8711;', '&#8712;', '&#8713;', '&#8715;', '&#8719;', '&#8721;', '&#8722;',
'&#8727;', '&#8730;', '&#8733;', '&#8734;', '&#8736;', '&#8743;', '&#8744;', '&#8745;', '&#8746;', '&#8747;', '&#8756;', '&#8764;', '&#8773;', '&#8776;',
'&#8800;', '&#8801;', '&#8804;', '&#8805;', '&#8834;', '&#8835;', '&#8836;', '&#8838;', '&#8839;', '&#8853;', '&#8855;', '&#8869;', '&#8901;', '&#8968;',
'&#8969;', '&#8970;', '&#8971;', '&#9001;', '&#9002;', '&#9674;', '&#9824;', '&#9827;', '&#9829;', '&#9830;'),
b = new Array('&nbsp;', '&iexcl;', '&cent;', '&pound;', '&curren;', '&yen;', '&brvbar;', '&sect;', '&uml;', '&copy;', '&ordf;', '&laquo;', '&not;', '&shy;',
'&reg;', '&macr;', '&deg;', '&plusmn;', '&sup2;', '&sup3;', '&acute;', '&micro;', '&para;', '&middot;', '&cedil;', '&sup1;', '&ordm;', '&raquo;', '&frac14;',
'&frac12;', '&frac34;', '&iquest;', '&agrave;', '&aacute;', '&acirc;', '&atilde;', '&auml;', '&aring;', '&aelig;', '&ccedil;', '&egrave;', '&eacute;',
'&ecirc;', '&euml;', '&igrave;', '&iacute;', '&icirc;', '&iuml;', '&eth;', '&ntilde;', '&ograve;', '&oacute;', '&ocirc;', '&otilde;', '&ouml;', '&times;',
'&oslash;', '&ugrave;', '&uacute;', '&ucirc;', '&uuml;', '&yacute;', '&thorn;', '&szlig;', '&agrave;', '&aacute;', '&acirc;', '&atilde;', '&auml;', '&aring;',
'&aelig;', '&ccedil;', '&egrave;', '&eacute;', '&ecirc;', '&euml;', '&igrave;', '&iacute;', '&icirc;', '&iuml;', '&eth;', '&ntilde;', '&ograve;', '&oacute;',
'&ocirc;', '&otilde;', '&ouml;', '&divide;', '&oslash;', '&ugrave;', '&uacute;', '&ucirc;', '&uuml;', '&yacute;', '&thorn;', '&yuml;', '&quot;', '&amp;',
'&lt;', '&gt;', '&oelig;', '&oelig;', '&scaron;', '&scaron;', '&yuml;', '&circ;', '&tilde;', '&ensp;', '&emsp;', '&thinsp;', '&zwnj;', '&zwj;', '&lrm;',
'&rlm;', '&ndash;', '&mdash;', '&lsquo;', '&rsquo;', '&sbquo;', '&ldquo;', '&rdquo;', '&bdquo;', '&dagger;', '&dagger;', '&permil;', '&lsaquo;', '&rsaquo;',
'&euro;', '&fnof;', '&alpha;', '&beta;', '&gamma;', '&delta;', '&epsilon;', '&zeta;', '&eta;', '&theta;', '&iota;', '&kappa;', '&lambda;', '&mu;', '&nu;',
'&xi;', '&omicron;', '&pi;', '&rho;', '&sigma;', '&tau;', '&upsilon;', '&phi;', '&chi;', '&psi;', '&omega;', '&alpha;', '&beta;', '&gamma;', '&delta;',
'&epsilon;', '&zeta;', '&eta;', '&theta;', '&iota;', '&kappa;', '&lambda;', '&mu;', '&nu;', '&xi;', '&omicron;', '&pi;', '&rho;', '&sigmaf;', '&sigma;',
'&tau;', '&upsilon;', '&phi;', '&chi;', '&psi;', '&omega;', '&thetasym;', '&upsih;', '&piv;', '&bull;', '&hellip;', '&prime;', '&prime;', '&oline;', '&frasl;',
'&weierp;', '&image;', '&real;', '&trade;', '&alefsym;', '&larr;', '&uarr;', '&rarr;', '&darr;', '&harr;', '&crarr;', '&larr;', '&uarr;', '&rarr;', '&darr;',
'&harr;', '&forall;', '&part;', '&exist;', '&empty;', '&nabla;', '&isin;', '&notin;', '&ni;', '&prod;', '&sum;', '&minus;', '&lowast;', '&radic;', '&prop;',
'&infin;', '&ang;', '&and;', '&or;', '&cap;', '&cup;', '&int;', '&there4;', '&sim;', '&cong;', '&asymp;', '&ne;', '&equiv;', '&le;', '&ge;', '&sub;', '&sup;',
'&nsub;', '&sube;', '&supe;', '&oplus;', '&otimes;', '&perp;', '&sdot;', '&lceil;', '&rceil;', '&lfloor;', '&rfloor;', '&lang;', '&rang;', '&loz;', '&spades;',
'&clubs;', '&hearts;', '&diams;');
return this.swapArrayVals(s, a, b)
},
numEncode: function(s) {
if (this.isEmpty(s)) return "";
var e = "";
for (var i = 0; i < s.length; i++) {
var c = s.charAt(i);
if (c < " " || c > "~") {
c = "&#" + c.charCodeAt() + ";"
};
e += c
};
return e
},
htmlDecode: function(s) {
var c, m, d = s;
if (this.isEmpty(d)) return "";
d = this.HTML2Numerical(d);
arr = d.match(/&#[0-9]{1,5};/g);
if (arr != null) {
for (var x = 0; x < arr.length; x++) {
m = arr[x];
c = m.substring(2, m.length - 1);
if (c >= -32768 && c <= 65535) {
d = d.replace(m, String.fromCharCode(c))
} else {
d = d.replace(m, "")
}
}
};
return d
},
htmlEncode: function(s, a) {
if (this.isEmpty(s)) return "";
a = a | false;
if (a) {
if (this.EncodeType == "numerical") {
s = s.replace(/&/g, "&#38;")
} else {
s = s.replace(/&/g, "&amp;")
}
};
s = this.XSSEncode(s, false);
if (this.EncodeType == "numerical" || !a) {
s = this.HTML2Numerical(s)
};
s = this.numEncode(s);
if (!a) {
s = s.replace(/&#/g, "##AMPHASH##");
if (this.EncodeType == "numerical") {
s = s.replace(/&/g, "&#38;")
} else {
s = s.replace(/&/g, "&amp;")
};
s = s.replace(/##AMPHASH##/g, "&#")
};
s = s.replace(/&#\d*([^\d;]|$)/g, "$1");
if (!a) {
s = this.correctEncoding(s)
};
if (this.EncodeType == "entity") {
s = this.NumericalToHTML(s)
};
return s
},
XSSEncode: function(s, en) {
if (!this.isEmpty(s)) {
en = en || true;
if (en) {
s = s.replace(/\'/g, "&#39;");
s = s.replace(/\"/g, "&quot;");
s = s.replace(/</g, "&lt;");
s = s.replace(/>/g, "&gt;")
} else {
s = s.replace(/\'/g, "&#39;");
s = s.replace(/\"/g, "&#34;");
s = s.replace(/</g, "&#60;");
s = s.replace(/>/g, "&#62;")
};
return s
} else {
return ""
}
},
hasEncoded: function(s) {
if (/&#[0-9]{1,5}/g.test(s)) {
return true
} else if (/&[A-Z]{2,6}/gi.test(s)) {
return true
} else {
return false
}
},
stripUnicode: function(s) {
return s.replace(/[^\x20-\x7E]/g, "")
},
correctEncoding: function(s) {
return s.replace(/(&amp;)(amp;)+/, "$1")
},
swapArrayVals: function(s, a, b) {
if (this.isEmpty(s)) return "";
if (a && b) {
if (a.length == b.length) {
for (var x = 0, i = a.length; x < i; x++) {
s = s.replace(a[x], b[x])
}
}
};
return s
},
getEmailAddress: function(a, b) {
return a + '@' + b
},
enumObj: function(a) {
for (var x in a) {}
},
testHTML: function(el) {
if (el && el.nodeType) {
var k, c = el.childNodes;
for (var i = 0; i < c.length; i++) {
k = c[i]
}
}
},
Trim: function(a) {
if (this.isEmpty(a)) return "";
var x;
x = LTrim(RTrim(a));
return x
},
LTrim: function(v) {
return v.replace(/[\s\xA0]+$/, "")
},
RTrim: function(v) {
return v.replace(/^[\s\xA0]+/, "")
},
kill: function(a) {
if (a) {
try {
a = null
} catch (e) {};
try {
delete a
} catch (e) {}
};
return a
},
createCookie: function(a, b, c) {
if (c) {
var d = new d();
d.setTime(d.getTime() + (c * 24 * 60 * 60 * 1000));
var e = "; expires=" + d.toGMTString()
} else var e = "";
_d.cookie = a + "=" + escape(b) + e + "; path=/"
},
readCookie: function(a) {
var b = a + "=",
ca = _d.cookie.split(';');
for (var i = 0; i < ca.length; i++) {
var c = ca[i];
while (c.charAt(0) == ' ') {
c = c.substring(1, c.length)
};
if (c.indexOf(b) == 0) {
return unescape(c.substring(b.length, c.length))
}
};
return null
}
};
D = Strictly.Debugger = {
counter: 0,
cache: [],
debug: false,
logTo: "",
cached: false,
ready: false,
debugInterval: null,
ForceCustomDebug: false,
ForceFirebugLite: false,
setupCustomLog: function() {
var b = _p.BodyLoaded;
if (!b) {
return false
};
var a = _d.createElement("div");
a.setAttribute("id", "logwindow");
a.style.visibility = "visible";
a.style.display = "block";
a.style.zIndex = "2147483647";
a.style.position = "relative";
a.style.backgroundColor = "#fff";
a.style.border = "1px solid";
a.style.overflow = "auto";
a.style.width = "100%";
a.style.left = "0";
a.style.bottom = "0";
a.style.height = "200px";
a.style.padding = "5px";
a.style.textAlign = "left";
S.getBody().appendChild(a);
var r = G('logwindow');
if (!r) {
S.Debugger.cached = true;
return false
} else {
return true
}
},
ShowDebugMessage: function(a) {
if (!S.Debugger.debug) return;
S.Debugger.counter++;
var b = S.Debugger.counter.toString() + ": " + a;
if (!S.Debugger.CheckLogger()) {
S.Debugger.cache.push(b);
S.Debugger.cached = true;
if (S.Debugger.debugInterval == null) {
S.Debugger.debugInterval = setInterval(function() {
S.Debugger.ConsoleReady()
}, 1000)
}
} else {
if (S.Debugger.cached) {
S.Debugger.ClearCache()
};
S.Debugger.Log(b)
}
},
CheckLogger: function() {
if (S.Debugger.ready) {
return true
} else {
if (S.Debugger.ForceCustomDebug) {
if (G('logwindow')) {
S.Debugger.logTo = "logwindow";
S.Debugger.ready = true
} else {
S.Debugger.ready = S.Debugger.setupCustomLog();
if (S.Debugger.ready) {
S.Debugger.logTo = "logwindow"
}
}
} else {
if (S.Browser.name != "Firefox" && this.ForceFirebugLite) {
if ((typeof(firebug) != "undefined") && firebug.env && firebug.env.init) {
S.Debugger.logTo = "firebug-lite";
S.Debugger.ready = true
} else {
S.Debugger.ready = false
}
} else {
S.Debugger.ready = (typeof(_w.console) != "undefined");
if (S.Debugger.ready) {
S.Debugger.logTo = "console"
}
}
}
};
return S.Debugger.ready
},
ConsoleReady: function() {
if (S.Debugger.CheckLogger()) {
S.Debugger.ClearCache();
clearInterval(S.Debugger.debugInterval);
S.Debugger.debugInterval = null
}
},
ClearCache: function() {
if (S.Debugger.cache.length > 0) {
for (var c = 0; c < S.Debugger.cache.length; c++) {
S.Debugger.Log(S.Debugger.cache[c])
};
S.Debugger.cache.length = 0;
S.Debugger.cached = false
}
},
Log: function(m) {
if (S.Debugger.logTo === "logwindow") {
var s = _d.createElement("span");
s.innerHTML = m + "<br />";
var el = G("logwindow");
el.appendChild(s)
} else if (S.Debugger.logTo == "console") {
console.log(m)
} else if (S.Debugger.logTo == "firebug-lite") {
firebug.d.console.cmd.log(m)
};
return true
}
}
G = getEl = function(el, a) {
return S.getEl(el, a)
}
GC = function(c, t) {
return _d.getElementsByClassName(c, t)
}
ShowDebug = function(m) {
return D.ShowDebugMessage(m)
}
B = Strictly.Browser = {
userAgent: _n.userAgent,
platform: _n.platform,
name: null,
version: 0,
gecko: false,
khtml: false,
webkit: false,
webkitversion: 0,
opera: false,
ie: false,
ieDocMode: 5,
windows: false,
mac: false,
linux: false,
xml: false,
jscript: false,
javascript: false,
flashEnabled: false,
flashVersion: "0",
cssGradeA: null,
cssEnhanced: false,
boxModel: false,
styleFloat: "cssFloat",
opacity: false,
anchorsEnabled: false,
regexpEnabled: false,
cookieEnabled: false,
imagesEnabled: false,
formsEnabled: false,
linksEnabled: false,
framesEnabled: false,
javaEnabled: false,
AJAXEnabled: undefined,
spoof: null,
bot: null,
widgeEditor: false,
dom: _d.all ? (_d.getElementById ? 2 : 1) : (_d.getElementById ? 4 : (_d.layers ? 3 : 0)),
w3cDOM: typeof _d.getElementById != "undefined" && typeof _d.getElementsByTagName != "undefined" && typeof _d.createElement != "undefined",
BrowserName: function() {
var a = this.userAgent;
if (this.name === null) {
if (/^\s*$/.test(a)) {
this.name = "Blank Agent";
this.spoof = true
} else if (/Opera/i.test(a) || _w.opera) {
this.name = "Opera";
this.opera = true;
if (!(_w.attachEvent && _w.addEventListener)) {
this.spoof = true
} else if (_w.opera && !(/Opera/i.test(a))) {
this.spoof = true
}
} else if (/WebKit/i.test(a) || /Apple/i.test(a)) {
this.webkit = true;
if (/Chrome/i.test(a)) {
this.name = "Chrome"
} else if (/Apple.*Mobile.*Safari/i.test(a)) {
this.name = "Mobile Safari"
} else {
this.name = "Safari"
}
} else if (/msie/i.test(a) && (!_w.opera)) {
this.name = "Internet Explorer";
this.ie = true;
if (!_w.attachEvent || _w.addEventListener) {
this.spoof = true
} else if (!_w.ActiveXObject || !this.jscript) {
this.spoof = true
};
if (!this.spoof) {
this.ieDocMode = (_d.documentMode) ? _d.documentMode : (_d.compatMode && _d.compatMode == "CSS1Compat") ? 7 : 5
}
} else if (/Firefox/i.test(a) || _n.vendor == "Firefox") {
this.name = "Firefox";
this.gecko = true
} else if (/Firebird/i.test(a) || _n.vendor == "Firebird") {
this.name = "Firebird";
this.gecko = true
} else if (/konqueror/i.test(a) || /KHTML/i.test(a)) {
this.name = "Konqueror";
this.khtml = true
} else {
this.name = _n.appName;
if (_n.product && _n.product.toLowerCase() == "gecko" && a.indexOf('gecko') != -1) {
this.gecko = true
}
};
this.version = (a.match(/.+(?:ox|rv|ion|ra|ie|me)[\/: ]([\d.]+)/i) || [])[1];
if (this.webkit) {
this.webkitversion = (a.match(/AppleWebKit\/(\d+)/)[1])
};
if (!this.spoof && (this.gecko || this.khtml || this.webkit)) {
if (_w.attachEvent || !_w.addEventListener) {
this.spoof = true
} else if (_w.ActiveXObject || this.jscript) {
this.spoof = true
}
};
if (!this.spoof && (this.khtml || this.webkit)) {
if (_d.all) this.spoof = true
}
};
return this.name
},
isSpoof: function() {
if (this.spoof === null) {
if (/(?:spoof|spoofer|fake|ripper)/i.test(this.userAgent)) {
this.spoof = true
} else if (/[a-z1-9]{20,}/i.test(this.userAgent)) {
if (!this.name || this.name.length == 0) {
this.name = "Fake Agent"
};
this.spoof = true
} else {
this.spoof = false
}
};
return this.spoof
},
ScriptTest: function() {
/*@cc_on;@if(@_jscript){this.jscript=true}@else*/
;
this.javascript = true; /*@end;@*/
},
OperatingSystemTest: function() {
var p = this.platform.toLowerCase(); /*@cc_on;@if(@_win32){this.windows=true}@elif(@_win16){this.windows=true}@elif(@_win64){this.windows=true}@elif(@_mac){this.mac=true}@elif(@_alpha){this.linux=true}@else*/ ;
this.windows = p ? /win/i.test(p) : /win/.test(this.userAgent), this.mac = p ? /mac/i.test(p) : /mac/.test(this.userAgent), this.linux = p ? /linux/i.test(p) :
/linux/i.test(this.userAgent); /*@end;@*/
},
SniffFlash: function() {
var a = [0, 0],
p = _n.plugins;
if (p && typeof p["Shockwave Flash"] == "object") {
var b = p["Shockwave Flash"].description;
if (typeof b != "undefined") {
b = b.replace(/^.*\s+(\S+\s+\S+$)/, "$1");
var c = parseInt(b.replace(/^(.*)\..*$/, "$1"), 10),
d = /r/.test(b) ? parseInt(b.replace(/^.*r(.*)$/, "$1"), 10) : 0;
a = [c, d]
}
} else if (_w.ActiveXObject) {
var m = 10;
if (S.FlashMaxCurVersion && S.FlashMaxCurVersion > 9) {
m = S.FlashMaxCurVersion + 1
};
for (var ii = m; ii >= 4; ii--) {
try {
var f = eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash." + ii + "');")
} catch (e) {}
};
if (typeof(f) == "object") {
if (ii == 6) {
f.AllowScriptAccess = "always"
};
try {
var b = f.GetVariable("$version");
if (typeof(b) != "undefined") {
b = b.replace(/^\S+\s+(.*)$/, "$1").split(",");
a = [parseInt(b[0], 10), parseInt(b[2], 10)]
}
} catch (e) {
if (ii > 4) {
a = [ii, 0]
}
}
}
};
if (a[0] == 0 && a[1] == 0) {
this.flashEnabled = false
} else {
this.flashEnabled = true;
this.flashVersion = a[0].toString() + '.' + a[1].toString()
};
return
},
BrowserTest: function() {
this.anchorsEnabled = (_d.anchors) ? "true" : "false";
this.regexpEnabled = (_w.RegExp) ? "true" : "false";
_d.cookie = "cookies=true";
this.cookieEnabled = (_d.cookie) ? "true" : "false";
this.imagesEnabled = (_d.images) ? "true" : "false";
this.formsEnabled = (_d.forms) ? "true" : "false";
this.linksEnabled = (_d.links) ? "true" : "false";
this.framesEnabled = (_w.frames) ? "true" : "false";
this.javaEnabled = (_n.javaEnabled());
var m = _d.getElementsByTagName("meta");
for (var i = 0; i < m.length; i++) {
if (/content-type/i.test(m[i].getAttribute("http-equiv")) && /xml/i.test(m[i].getAttribute("content"))) {
this.xml = true;
break
}
};
return
},
CSSTest: function() {
if (this.cssGradeA === null) {
if (this.cookieEnabled) {
var ck = S.readCookie('enhanced');
if (ck === true) {
this.cssGradeA = true;
if (S.EnhanceCSSDoc) {
if (!this.cssEnhanced) {
this.enhanceDocument()
}
};
return true
} else if (ck === false) {
this.cssGradeA = false;
return true
}
}
};
var b = false;
if (this.w3cDOM) {
var c = _d.createElement('div');
c.style.display = "none";
c.innerHTML = '<a href="/a" style="color:red;float:left;opacity:.5;">a</a>';
_d.body.appendChild(c);
var a = c.getElementsByTagName("a")[0];
this.opacity = a.style.opacity === "0.5";
this.styleFloat = (!!a.style.cssFloat) ? "cssFloat" : "styleFloat";
_d.body.removeChild(c);
var c = _d.createElement('div');
_d.body.appendChild(c);
c.style.visibility = 'hidden';
c.style.padding = '10px';
c.style.width = '20px';
var e = c.offsetWidth;
if (e != 40) {
_d.body.removeChild(c);
b = true
};
if (!b) {
c.style.position = 'absolute';
c.style.left = '10px';
var f = c.offsetLeft;
if (f != 10) {
_d.body.removeChild(c);
b = true
}
};
if (!b) {
this.boxModel = true
};
var h, i, j, td, k, l, m = _d.body.style.marginTop,
c2 = _d.createElement('div');
html =
'<div style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;"><div></div></div><table style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;" cellpadding="0" cellspacing="0"><tr><td></td></tr></table>';
k = {
position: 'absolute',
top: 0,
left: 0,
margin: 0,
border: 0,
width: '1px',
height: '1px',
visibility: 'hidden'
};
for (l in k) {
c2.style[l] = k[l]
};
c2.innerHTML = html;
_d.body.insertBefore(c2, _d.body.firstChild);
h = c2.firstChild, i = h.firstChild, td = h.nextSibling.firstChild.firstChild;
this.doesNotAddBorder = (i.offsetTop !== 5);
this.doesAddBorderForTableAndCells = (td.offsetTop === 5);
h.style.overflow = 'hidden', h.style.position = 'relative';
this.subtractsBorderForOverflowNotVisible = (i.offsetTop === -5);
_d.body.style.marginTop = '1px';
this.doesNotIncludeMarginInBodyOffset = (_d.body.offsetTop === 0);
_d.body.style.marginTop = m;
_d.body.removeChild(c2);
if (!b) {
var o = _d.createElement('div');
o.style.width = '5px';
o.style.cssFloat = 'left';
o.style.styleFloat = 'left';
c.appendChild(o);
var p = o.cloneNode(true);
c.appendChild(p);
var q = o.offsetTop,
r = p.offsetTop;
if (q != r) {
_d.body.removeChild(c);
b = true
}
};
if (!b) {
c.innerHTML = '<ul><li style="width: 5px; float: left;">test</li><li style="width: 5px; float: left;clear: left;">test</li></ul>';
var t = c.getElementsByTagName('li')[0].offsetTop,
u = c.getElementsByTagName('li')[1].offsetTop;
if (t == u) {
b = true
}
};
if (!b) {
c.innerHTML = '<div style="height: 20px;"></div>';
c.style.padding = '0';
c.style.height = '10px';
c.style.overflow = 'auto';
S;
var v = c.offsetHeight;
if (v != 10) {
_d.body.removeChild(c);
b = true
}
};
if (!b) {
c.innerHTML = '<div style="line-height: 2; font-size: 10px;">Te<br />st</div>';
c.style.padding = '0';
c.style.height = 'auto';
c.style.overflow = '';
var v = c.offsetHeight;
if (v > 40) {
_d.body.removeChild(c);
b = true
}
};
if (!b) {
if (_w.onresize == false) {
_d.body.removeChild(c);
b = true
}
};
if (!b) {
if (!_w.print) {
_d.body.removeChild(c);
b = true
}
};
if (!b) {
if (_w.clientInformation && _w.opera) {
_d.body.removeChild(c);
b = true
}
};
if (!b) {
_d.body.removeChild(c);
if (S.EnhanceCSSDoc) {
if (!this.cssEnhanced) {
this.enhanceDocument()
}
};
S.createCookie('enhanced', 'true');
this.cssGradeA = true;
return true
}
};
createCookie('enhanced', 'false');
this.cssGradeA = false;
return false
},
enhanceDocument: function() {
if (!/\benhanced\b/.exec(_d.body.className)) {
_d.body.className += ' enhanced'
};
var a = _d.getElementsByTagName('link');
for (i = 0; i < a.length; i++) {
if (/\bbasicNoCascade\b/.exec(a[i].className)) {
a[i].disabled = true
};
if (/\benhanced\b/.exec(a[i].className)) {
a[i].disabled = true;
a[i].disabled = false
}
};
S.Browser.cssEnhanced = true
},
GUITest: function() {
this.CSSTest();
if (this.w3cDOM) {
if (typeof(S.getBody().contentEditable) != "undefined" || typeof(_d.designMode) != "undefined") {
if (S.Browser.ie || S.Browser.gecko) {
this.widgeEditor = true
}
}
}
},
Settings: function() {
var s = "UserAgent: " + this.userAgent + "<br />",
x = 0;
for (var p in this) {
if (typeof(this[p]) != "function" && p != "userAgent") {
x++;
s += p + ": " + this[p] + "<br />"
}
};
return s
}
};P = _p = {
DOMLoaded: false,
BodyLoaded: false,
WindowLoaded: false,
Body: [],
WinLoadArr: [],
DOMArr: [],
DOMTimer: null,
AddWindowLoadEvent: function(fn, a) {
if (typeof(fn) == "function") {
if (!a && S.inArray(this.WinLoadArr, fn) > -1) {
return false
};
if (this.WindowLoaded) {
fn()
} else {
this.WinLoadArr.push(fn)
}
};
return true
},
RunWindowLoaded: function() {
if (this.WindowLoaded) {
return
} else {
var da = this.DOMArr;
for (var i = 0; i < da.length; i++) {
if (da && S.isFunction(da)) {
try {
da[i]()
} catch (e) {}
}
};
this.WindowLoaded = true;
for (var i = 0; i < this.WinLoadArr.length; i++) {
if (S.isFunction(this.WinLoadArr[i])) {
this.WinLoadArr[i]()
}
}
};
return true
},
onBodyLoad: function(fn) {
if (S.isFunction(fn)) {
if (!this.Body[fn]) {
if (P.BodyLoaded || S.getBody()) {
fn.call();
P.Body[fn] = true;
P.BodyLoaded = true
}
} else {
setTimeout(function() {
P.onBodyLoad(fn)
}, 200)
}
}
},
AddDOMLoadEvent: function(fn) {
if (this.DOMLoaded) {
fn()
} else {
this.DOMArr.push(fn)
};
return true
},
RunDOMLoadFunctions: function() {
if (this.DOMLoaded) {
return
};
if (B.ie && B.windows) {
var s = _d.createElement("span");
try {
var t = S.getBody().appendChild(s);
t.parentNode.removeChild(t)
} catch (e) {
if (!this.DOMTimer) {
this.DOMTimer = setInterval(function() {
P.RunDOMLoadFunctions()
}, 10)
};
return
}
};
this.BodyLoaded = true;
this.DOMLoaded = true;
if (this.DOMTimer) {
clearInterval(this.DOMTimer);
this.DOMTimer = null
};
for (var i = 0; i < this.DOMArr.length; i++) {
this.DOMArr[i]();
this.DOMArr[i] = S.kill(this.DOMArr[i])
};
return true
},
onDOMLoad: function() {
if (B.w3cDOM && !B.spoof) {
if ((B.webkit && B.webkitversion < 525) || B.khtml || (B.opera && B.version < 9) && _d.readyState != "undefined") {
P.DOMTimer = setInterval(function() {
if (/loaded|complete/.test(_d.readyState)) {
P.RunDOMLoadFunctions()
}
}, 10)
} else if (_d.addEventListener) {
AD(_d, "DOMContentLoaded", function() {
RE(_d, "DOMContentLoaded", arguments.callee);
P.RunDOMLoadFunctions()
}, false)
} else if (_d.attachEvent) {
AD(_d, "onreadystatechange", function() {
if (_d.readyState === "complete") {
RE(_d, "onreadystatechange", arguments.callee);
_p.RunDOMLoadFunctions()
}
}, false);
if (_d.documentElement.doScroll && _w == _w.top)(function() {
if (this.DOMLoaded) return;
try {
_d.documentElement.doScroll("left")
} catch (e) {
setTimeout(arguments.callee, 0);
return
};
_p.RunDOMLoadFunctions()
})()
}
};
this.AddWindowLoadEvent(function() {
P.RunDOMLoadFunctions()
});
return true
}
};S.Browser.ScriptTest();S.Browser.BrowserName();S.Browser.isSpoof();S.Browser.OperatingSystemTest()
if (typeof jQuery == 'function') {
DOM = addDOMLoadEvent = function(f) {
if (B.w3cDOM) {
$(_d).ready(f)
} else {
W(f)
}
};
W = addWinLoadEvent = function(f) {
$(_w).load(f)
}
AD = addEvent = function(a, b, fn) {
$(a).bind(b, fn)
}
RE = removeEvent = function(a, b, fn) {
$(a).unbind(b, fn)
}
DOM(function() {
_p.BodyLoaded = true;
_p.DOMLoaded = true
});
W(function() {
_p.WindowLoaded = true
})
} else {
DOM = addDOMLoadEvent = function(f) {
P.AddDOMLoadEvent(f)
};
W = addWinLoadEvent = function(f) {
P.AddWindowLoadEvent(f)
}
AD = addEvent = function(a, b, fn) {
if (a) {
if (a.addEventListener) {
a.addEventListener(b, fn, false)
} else if (a.attachEvent) {
var ev = b + fn;
a['e' + ev] = fn;
a[ev] = function() {
a['e' + ev](_w.event)
};
a.attachEvent('on' + b, a[ev])
} else {
var ev = "on" + b,
c = a[ev];
if (typeof c != "function") {
a[ev] = fn
} else {
a[ev] = function() {
c();
fn()
}
}
}
}
}
RE = removeEvent = function(a, b, fn) {
if (a) {
if (a.removeEventListener) {
a.removeEventListener(b, fn, false)
} else if (a.detachEvent) {
try {
a.detachEvent('on' + b, a[b + fn]);
a[b + fn] = null
} catch (e) {}
} else {
var c = a["on" + b];
if (c == fn) {
a["on" + b] = null
}
}
}
}
P.onDOMLoad();
var obj, evType = (_w.attachEvent) ? "on" + evType : evType;
if (_w.addEventListener) {
obj = _w
} else if (_d.addEventListener) {
obj = _d
} else {
obj = _w
};
if (obj[evType]) {
inlineFunc = obj[evType];
obj[evType] = null;
if (P.WinLoadArr.length > 0) {
P.WinLoadArr.unshift(inlineFunc)
} else {
P.WinLoadArr[0] = inlineFunc
}
};
AD(obj, "load", function() {
_p.RunWindowLoaded()
})
};DOM(function() {
S.Browser.BrowserTest();
S.Browser.SniffFlash();
S.Browser.GUITest()
})
sm = function(m) {
console.log(m)
}
})();

var base2 = {
    name: "base2",
    version: "1.0.1(pre)",
    exports: "Base, Package, Abstract, Module, Enumerable, Map, Collection, RegGrp, " + "assert, assertArity, assertType, " + "assignID, copy, counter, detect, extend, forEach, format, instanceOf, match, rescape, slice, trim, " + "I, K, Undefined, Null, True, False, bind, delegate, flip, not, partial, unbind",
    global: this,
    namespace: "var global=base2.global;function base(o,a){return o.base.apply(o,a)};",
    detect: new function(_) {
        var global = _;
        var jscript /*@cc_on=@_jscript_version@*/ ;
        if(_.navigator) {
            var element = document.createElement("span");
            var userAgent = navigator.platform + " " + navigator.userAgent;
            if(!jscript) userAgent = userAgent.replace(/MSIE\s[\d.]+/, "");
            userAgent = userAgent.replace(/([a-z])[\s\/](\d)/gi, "$1$2");
        }
        return function(a) {
            var r = false;
            var b = a.charAt(0) == "!";
            if(b) a = a.slice(1);
            if(a.charAt(0) == "(") {
                try {
                    eval("r=!!" + a)
                } catch(error) {}
            } else {
                r = new RegExp("(" + a + ")", "i").test(userAgent)
            }
            return !!(b ^ r)
        }
    }(this)
};
new function(_) {
    var detect = base2.detect;
    var slice = Array.slice || (function(b) {
        return function(a) {
            return b.apply(a, b.call(arguments, 1))
        }
    })(Array.prototype.slice);
    var Undefined = K(),
        Null = K(null),
        True = K(true),
        False = K(false);
    var _0 = /%([1-9])/g;
    var _1 = /^\s\s*/;
    var _2 = /\s\s*$/;
    var _3 = /([\/()[\]{}|*+-.,^$?\\])/g;
    var _4 = /eval/.test(detect) ? /\bbase\s*\(/ : /.*/;
    var _5 = ["constructor", "toString", "valueOf"];
    var _6 = String(new RegExp);
    var _7 = 1;
    _8();
    eval(base2.namespace);
    var _9 = function(a, b) {
        base2.__prototyping = true;
        var c = new this;
        extend(c, a);
        delete base2.__prototyping;
        var d = c.constructor;

        function _10() {
            if(!base2.__prototyping) {
                if(this.constructor == arguments.callee || this.__constructing) {
                    this.__constructing = true;
                    d.apply(this, arguments);
                    delete this.__constructing
                } else {
                    return extend(arguments[0], c)
                }
            }
            return this
        };
        c.constructor = _10;
        for(var i in Base) _10[i] = this[i];
        _10.toString = K(String(d));
        _10.ancestor = this;
        _10.base = Undefined;
        _10.init = Undefined;
        extend(_10, b);
        _10.prototype = c;
        _10.init();
        return _10
    };
    var Base = _9.call(Object, {
        constructor: function() {
            if(arguments.length > 0) {
                this.extend(arguments[0])
            }
        },
        base: function() {},
        extend: delegate(extend)
    }, Base = {
        ancestorOf: delegate(_11),
        extend: _9,
        forEach: delegate(_8),
        implement: function(a) {
            if(typeof a == "function") {
                if(_11(Base, a)) {
                    a(this.prototype)
                }
            } else {
                extend(this.prototype, a)
            }
            return this
        }
    });
    var Package = Base.extend({
        constructor: function(d, e) {
            this.extend(e);
            if(this.init) this.init();
            if(this.name != "base2") {
                if(!this.parent) this.parent = base2;
                this.parent.addName(this.name, this);
                this.namespace = format("var %1=%2;", this.name, String(this).slice(1, -1))
            }
            var f = /[^\s,]+/g;
            if(d) {
                d.imports = Array2.reduce(this.imports.match(f), function(a, b) {
                    eval("var ns=base2." + b);
                    assert(ns, format("Package not found: '%1'.", b));
                    return a += ns.namespace
                }, base2.namespace + JavaScript.namespace);
                d.exports = Array2.reduce(this.exports.match(f), function(a, b) {
                    var c = this.name + "." + b;
                    this.namespace += "var " + b + "=" + c + ";";
                    return a += "if(!" + c + ")" + c + "=" + b + ";"
                }, "", this)
            }
        },
        exports: "",
        imports: "",
        name: "",
        namespace: "",
        parent: null,
        addName: function(a, b) {
            if(!this[a]) {
                this[a] = b;
                this.exports += ", " + a;
                this.namespace += format("var %1=%2.%1;", a, this.name)
            }
        },
        addPackage: function(a) {
            this.addName(a, new Package(null, {
                name: a,
                parent: this
            }))
        },
        toString: function() {
            return format("[%1]", this.parent ? String(this.parent).slice(1, -1) + "." + this.name : this.name)
        }
    });
    var Abstract = Base.extend({
        constructor: function() {
            throw new TypeError("Class cannot be instantiated.");
        }
    });
    var Module = Abstract.extend(null, {
        extend: function(a, b) {
            var c = this.base();
            _12(c, this);
            c.implement(a);
            extend(c, b);
            c.init();
            return c
        },
        implement: function(c) {
            var d = this;
            if(typeof c == "function") {
                d.base(c);
                if(_11(Module, c)) {
                    _12(d, c)
                }
            } else {
                var e = {};
                _8(Object, c, function(a, b) {
                    if(b.charAt(0) == "@") {
                        if(detect(b.slice(1))) {
                            forEach(a, arguments.callee)
                        }
                    } else if(!Module[b] && typeof a == "function" && a.call) {
                        function _13() {
                            return d[b].apply(d, [this].concat(slice(arguments)))
                        };
                        _13.__base = _4.test(a);
                        e[b] = _13
                    }
                });
                extend(d.prototype, e);
                extend(d, c)
            }
            return d
        }
    });

    function _12(a, b) {
        for(var c in b) {
            var method = b[c];
            if(!Module[c] && typeof method == "function" && method.call) {
                a[c] = method
            }
        }
    };
    var Enumerable = Module.extend({
        every: function(c, d, e) {
            var f = true;
            try {
                this.forEach(c, function(a, b) {
                    f = d.call(e, a, b, c);
                    if(!f) throw StopIteration;
                })
            } catch(error) {
                if(error != StopIteration) throw error;
            }
            return !!f
        },
        filter: function(d, e, f) {
            var i = 0;
            return this.reduce(d, function(a, b, c) {
                if(e.call(f, b, c, d)) {
                    a[i++] = b
                }
                return a
            }, [])
        },
        invoke: function(b, c) {
            var d = slice(arguments, 2);
            return this.map(b, (typeof c == "function") ? function(a) {
                return(a == null) ? undefined : c.apply(a, d)
            } : function(a) {
                return(a == null) ? undefined : a[c].apply(a, d)
            })
        },
        map: function(c, d, e) {
            var f = [],
                i = 0;
            this.forEach(c, function(a, b) {
                f[i++] = d.call(e, a, b, c)
            });
            return f
        },
        pluck: function(b, c) {
            return this.map(b, function(a) {
                return(a == null) ? undefined : a[c]
            })
        },
        reduce: function(c, d, e, f) {
            var g = arguments.length > 2;
            this.forEach(c, function(a, b) {
                if(g) {
                    e = d.call(f, e, a, b, c)
                } else {
                    e = a;
                    g = true
                }
            });
            return e
        },
        some: function(a, b, c) {
            return !this.every(a, not(b), c)
        }
    }, {
        forEach: forEach
    });
    var _14 = "#";
    var Map = Base.extend({
        constructor: function(a) {
            this.merge(a)
        },
        copy: delegate(copy),
        forEach: function(a, b) {
            for(var c in this)
                if(c.charAt(0) == _14) {
                    a.call(b, this[c], c.slice(1), this)
                }
        },
        get: function(a) {
            return this[_14 + a]
        },
        getKeys: function() {
            return this.map(flip(I))
        },
        getValues: function() {
            return this.map(I)
        },
        has: function(a) { /*@cc_on@*/ /*@if(@_jscript_version<5.5)return $Legacy.has(this,_14+a);@else@*/
            return _14 + a in this; /*@end@*/
        },
        merge: function(b) {
            var c = flip(this.put);
            forEach(arguments, function(a) {
                forEach(a, c, this)
            }, this);
            return this
        },
        remove: function(a) {
            delete this[_14 + a]
        },
        put: function(a, b) {
            if(arguments.length == 1) b = a;
            this[_14 + a] = b
        },
        size: function() {
            var a = 0;
            for(var b in this)
                if(b.charAt(0) == _14) a++;
            return a
        },
        union: function(a) {
            return this.merge.apply(this.copy(), arguments)
        }
    });
    Map.implement(Enumerable);
    var _15 = "~";
    var Collection = Map.extend({
        constructor: function(a) {
            this[_15] = new Array2;
            this.base(a)
        },
        add: function(a, b) {
            assert(!this.has(a), "Duplicate key '" + a + "'.");
            this.put.apply(this, arguments)
        },
        copy: function() {
            var a = this.base();
            a[_15] = this[_15].copy();
            return a
        },
        forEach: function(a, b) {
            var c = this[_15];
            var d = c.length;
            for(var i = 0; i < d; i++) {
                a.call(b, this[_14 + c[i]], c[i], this)
            }
        },
        getAt: function(a) {
            if(a < 0) a += this[_15].length;
            var b = this[_15][a];
            return(b === undefined) ? undefined : this[_14 + b]
        },
        getKeys: function() {
            return this[_15].concat()
        },
        indexOf: function(a) {
            return this[_15].indexOf(String(a))
        },
        insertAt: function(a, b, c) {
            assert(Math.abs(a) < this[_15].length, "Index out of bounds.");
            assert(!this.has(b), "Duplicate key '" + b + "'.");
            this[_15].insertAt(a, String(b));
            this.put.apply(this, slice(arguments, 1))
        },
        item: Undefined,
        put: function(a, b) {
            if(arguments.length == 1) b = a;
            if(!this.has(a)) {
                this[_15].push(String(a))
            }
            var c = this.constructor;
            if(c.Item && !instanceOf(b, c.Item)) {
                b = c.create.apply(c, arguments)
            }
            this[_14 + a] = b
        },
        putAt: function(a, b) {
            assert(Math.abs(a) < this[_15].length, "Index out of bounds.");
            arguments[0] = this[_15].item(a);
            this.put.apply(this, arguments)
        },
        remove: function(a) {
            if(this.has(a)) {
                this[_15].remove(String(a));
                delete this[_14 + a]
            }
        },
        removeAt: function(a) {
            this[_15].removeAt(a);
            delete this[_14 + key]
        },
        reverse: function() {
            this[_15].reverse();
            return this
        },
        size: function() {
            return this[_15].length
        },
        sort: function(c) {
            if(c) {
                var d = this;
                this[_15].sort(function(a, b) {
                    return c(d[_14 + a], d[_14 + b], a, b)
                })
            } else this[_15].sort();
            return this
        },
        toString: function() {
            return String(this[_15])
        }
    }, {
        Item: null,
        init: function() {
            this.prototype.item = this.prototype.getAt
        },
        create: function(a, b) {
            return this.Item ? new this.Item(a, b) : b
        },
        extend: function(a, b) {
            var c = this.base(a);
            c.create = this.create;
            extend(c, b);
            if(!c.Item) {
                c.Item = this.Item
            } else if(typeof c.Item != "function") {
                c.Item = (this.Item || Base).extend(c.Item)
            }
            c.init();
            return c
        }
    });
    var _16 = /\\(\d+)/g,
        _17 = /\\./g,
        _18 = /\(\?[:=!]|\[[^\]]+\]/g,
        _19 = /\(/g,
        _20 = /\$(\d+)/,
        _21 = /^\$\d+$/;
    var RegGrp = Collection.extend({
        constructor: function(a, b) {
            this.base(a);
            if(typeof b == "string") {
                this.global = /g/.test(b);
                this.ignoreCase = /i/.test(b)
            }
        },
        global: true,
        ignoreCase: false,
        exec: function(h, j) {
            var k = (this.global ? "g" : "") + (this.ignoreCase ? "i" : "");
            h = String(h) + "";
            if(arguments.length == 1) {
                var l = this;
                var m = this[_15];
                j = function(a) {
                    if(a) {
                        var b, c = 1,
                            i = 0;
                        while((b = l[_14 + m[i++]])) {
                            var d = c + b.length + 1;
                            if(arguments[c]) {
                                var e = b.replacement;
                                switch(typeof e) {
                                    case "function":
                                        var f = slice(arguments, c, d);
                                        var g = arguments[arguments.length - 2];
                                        return e.apply(l, f.concat(g, h));
                                    case "number":
                                        return arguments[c + e];
                                    default:
                                        return e
                                }
                            }
                            c = d
                        }
                    }
                    return ""
                }
            }
            return h.replace(new RegExp(this, k), j)
        },
        insertAt: function(a, b, c) {
            if(instanceOf(b, RegExp)) {
                arguments[1] = b.source
            }
            return base(this, arguments)
        },
        test: function(a) {
            return this.exec(a) != a
        },
        toString: function() {
            var e = 0;
            return "(" + this.map(function(c) {
                var d = String(c).replace(_16, function(a, b) {
                    return "\\" + (1 + Number(b) + e)
                });
                e += c.length + 1;
                return d
            }).join(")|(") + ")"
        }
    }, {
        IGNORE: "$0",
        init: function() {
            forEach("add,get,has,put,remove".split(","), function(b) {
                _22(this, b, function(a) {
                    if(a && a.source) {
                        arguments[0] = a.source
                    }
                    return base(this, arguments)
                })
            }, this.prototype)
        },
        Item: {
            constructor: function(a, b) {
                a = (a && a.source) ? a.source : String(a);
                if(typeof b == "number") b = String(b);
                else if(b == null) b = "";
                if(typeof b == "string" && _20.test(b)) {
                    if(_21.test(b)) {
                        b = parseInt(b.slice(1))
                    } else {
                        var Q = /'/.test(b.replace(/\\./g, "")) ? '"' : "'";
                        b = b.replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/\$(\d+)/g, Q + "+(arguments[$1]||" + Q + Q + ")+" + Q);
                        b = new Function("return " + Q + b.replace(/(['"])\1\+(.*)\+\1\1$/, "$1") + Q)
                    }
                }
                this.length = RegGrp.count(a);
                this.replacement = b;
                this.toString = K(a)
            },
            length: 0,
            replacement: ""
        },
        count: function(a) {
            a = String(a).replace(_17, "").replace(_18, "");
            return match(a, _19).length
        }
    });
    var JavaScript = {
        name: "JavaScript",
        version: base2.version,
        exports: "Array2, Date2, String2",
        namespace: "",
        bind: function(c) {
            forEach(this.exports.match(/\w+/g), function(a) {
                var b = a.slice(0, -1);
                extend(c[b], this[a]);
                this[a](c[b].prototype)
            }, this)
        }
    };
    if((new Date).getYear() > 1900) {
        Date.prototype.getYear = function() {
            return this.getFullYear() - 1900
        };
        Date.prototype.setYear = function(a) {
            return this.setFullYear(a + 1900)
        }
    }
    Function.prototype.prototype = {};
    if("".replace(/^/, K("$$")) == "$") {
        extend(String.prototype, "replace", function(a, b) {
            if(typeof b == "function") {
                var c = b;
                b = function() {
                    return String(c.apply(null, arguments)).split("$").join("$$")
                }
            }
            return this.base(a, b)
        })
    }
    var Array2 = _23(Array, Array, "concat,join,pop,push,reverse,shift,slice,sort,splice,unshift", [Enumerable, {
        combine: function(d, e) {
            if(!e) e = d;
            return this.reduce(d, function(a, b, c) {
                a[b] = e[c];
                return a
            }, {})
        },
        contains: function(a, b) {
            return this.indexOf(a, b) != -1
        },
        copy: function(a) {
            var b = this.slice(a);
            if(!b.swap) this(b);
            return b
        },
        flatten: function(c) {
            return this.reduce(c, function(a, b) {
                if(this.like(b)) {
                    this.reduce(b, arguments.callee, a, this)
                } else {
                    a.push(b)
                }
                return a
            }, [], this)
        },
        forEach: _24,
        indexOf: function(a, b, c) {
            var d = a.length;
            if(c == null) {
                c = 0
            } else if(c < 0) {
                c = Math.max(0, d + c)
            }
            for(var i = c; i < d; i++) {
                if(a[i] === b) return i
            }
            return -1
        },
        insertAt: function(a, b, c) {
            this.splice(a, b, 0, c);
            return c
        },
        item: function(a, b) {
            if(b < 0) b += a.length;
            return a[b]
        },
        lastIndexOf: function(a, b, c) {
            var d = a.length;
            if(c == null) {
                c = d - 1
            } else if(from < 0) {
                c = Math.max(0, d + c)
            }
            for(var i = c; i >= 0; i--) {
                if(a[i] === b) return i
            }
            return -1
        },
        map: function(c, d, e) {
            var f = [];
            this.forEach(c, function(a, b) {
                f[b] = d.call(e, a, b, c)
            });
            return f
        },
        remove: function(a, b) {
            var c = this.indexOf(a, b);
            if(c != -1) this.removeAt(a, c);
            return b
        },
        removeAt: function(a, b) {
            return this.splice(a, b, 1)
        },
        swap: function(a, b, c) {
            var d = a[b];
            a[b] = a[c];
            a[c] = d;
            return a
        }
    }]);
    Array2.reduce = Enumerable.reduce;
    Array2.like = function(a) {
        return !!(a && typeof a == "object" && typeof a.length == "number")
    };
    var _25 = /^((-\d+|\d{4,})(-(\d{2})(-(\d{2}))?)?)?T((\d{2})(:(\d{2})(:(\d{2})(\.(\d{1,3})(\d)?\d*)?)?)?)?(([+-])(\d{2})(:(\d{2}))?|Z)?$/;
    var _26 = {
        FullYear: 2,
        Month: 4,
        Date: 6,
        Hours: 8,
        Minutes: 10,
        Seconds: 12,
        Milliseconds: 14
    };
    var _27 = {
        Hectomicroseconds: 15,
        UTC: 16,
        Sign: 17,
        Hours: 18,
        Minutes: 20
    };
    var _28 = /(((00)?:0+)?:0+)?\.0+$/;
    var _29 = /(T[0-9:.]+)$/;
    var Date2 = _23(Date, function(a, b, c, h, m, s, d) {
        switch(arguments.length) {
            case 0:
                return new Date;
            case 1:
                return new Date(a);
            default:
                return new Date(a, b, arguments.length == 2 ? 1 : c, h || 0, m || 0, s || 0, d || 0)
        }
    }, "", [{
        toISOString: function(c) {
            var d = "####-##-##T##:##:##.###";
            for(var e in _26) {
                d = d.replace(/#+/, function(a) {
                    var b = c["getUTC" + e]();
                    if(e == "Month") b++;
                    return("000" + b).slice(-a.length)
                })
            }
            return d.replace(_28, "").replace(_29, "$1Z")
        }
    }]);
    Date2.now = function() {
        return(new Date).valueOf()
    };
    Date2.parse = function(a, b) {
        if(arguments.length > 1) {
            assertType(b, "number", "defaultDate should be of type 'number'.")
        }
        var c = String(a).match(_25);
        if(c) {
            if(c[_26.Month]) c[_26.Month]--;
            if(c[_27.Hectomicroseconds] >= 5) c[_26.Milliseconds]++;
            var d = new Date(b || 0);
            var e = c[_27.UTC] || c[_27.Hours] ? "UTC" : "";
            for(var f in _26) {
                var value = c[_26[f]];
                if(!value) continue;
                d["set" + e + f](value);
                if(d["get" + e + f]() != c[_26[f]]) {
                    return NaN
                }
            }
            if(c[_27.Hours]) {
                var g = Number(c[_27.Sign] + c[_27.Hours]);
                var h = Number(c[_27.Sign] + (c[_27.Minutes] || 0));
                d.setUTCMinutes(d.getUTCMinutes() + (g * 60) + h)
            }
            return d.valueOf()
        } else {
            return Date.parse(a)
        }
    };
    var String2 = _23(String, function(a) {
        return new String(arguments.length == 0 ? "" : a)
    }, "charAt,charCodeAt,concat,indexOf,lastIndexOf,match,replace,search,slice,split,substr,substring,toLowerCase,toUpperCase", [{
        trim: trim
    }]);

    function _23(c, d, e, f) {
        var g = Module.extend();
        forEach(e.match(/\w+/g), function(a) {
            g[a] = unbind(c.prototype[a])
        });
        forEach(f, g.implement, g);
        var h = function() {
            return g(this.constructor == g ? d.apply(null, arguments) : arguments[0])
        };
        h.prototype = g.prototype;
        forEach(g, function(a, b) {
            if(c[b]) {
                delete g.prototype[b]
            }
            h[b] = g[b]
        });
        h.ancestor = Object;
        delete h.extend;
        if(c != Array) delete h.forEach;
        return h
    };

    function extend(a, b) {
        if(a && b) {
            if(arguments.length > 2) {
                var c = b;
                b = {};
                b[c] = arguments[2]
            }
            var d = (typeof b == "function" ? Function : Object).prototype;
            var i = _5.length,
                c;
            if(base2.__prototyping) {
                while((c = _5[--i])) {
                    var f = b[c];
                    if(f != d[c]) {
                        if(_4.test(f)) {
                            _22(a, c, f)
                        } else {
                            a[c] = f
                        }
                    }
                }
            }
            for(c in b) {
                if(d[c] === undefined) {
                    var f = b[c];
                    if(c.charAt(0) == "@" && detect(c.slice(1))) {
                        arguments.callee(a, f);
                        continue
                    }
                    var h = a[c];
                    if(h && typeof f == "function") {
                        if(f != h && (!h.method || !_11(f, h))) {
                            if(f.__base || _4.test(f)) {
                                _22(a, c, f)
                            } else {
                                a[c] = f
                            }
                        }
                    } else {
                        a[c] = f
                    }
                }
            }
        }
        return a
    };

    function _11(a, b) {
        while(b) {
            if(!b.ancestor) return false;
            b = b.ancestor;
            if(b == a) return true
        }
        return false
    };

    function _22(c, d, e) {
        var f = c[d];

        function _30() {
            var a = this.base;
            this.base = f;
            var b = e.apply(this, arguments);
            this.base = a;
            return b
        };
        _30.ancestor = f;
        _30.method = e;
        _30.toString = function() {
            return String(e)
        };
        c[d] = _30
    };
    if(typeof StopIteration == "undefined") {
        StopIteration = new Error("StopIteration")
    }

    function forEach(a, b, c, d) {
        if(a == null) return;
        if(!d) {
            if(typeof a == "function" && a.call) {
                d = Function
            } else if(typeof a.forEach == "function" && a.forEach != arguments.callee) {
                a.forEach(b, c);
                return
            } else if(typeof a.length == "number") {
                _24(a, b, c);
                return
            }
        }
        _8(d || Object, a, b, c)
    };

    function _24(a, b, c) {
        if(a == null) return;
        var d = a.length,
            i;
        if(typeof a == "string") {
            for(i = 0; i < d; i++) {
                b.call(c, a.charAt(i), i, a)
            }
        } else {
            for(i = 0; i < d; i++) { /*@cc_on@*/ /*@if(@_jscript_version<5.2)if(a[i]!==undefined||$Legacy.has(a,i))@else@*/
                if(i in a) /*@end@*/ b.call(c, a[i], i, a)
            }
        }
    };

    function _8(g, h, j, k) {
        var l = function() {
            this.i = 1
        };
        l.prototype = {
            i: 1
        };
        var m = 0;
        for(var i in new l) m++;
        _8 = (m > 1) ? function(a, b, c, d) {
            var e = {};
            for(var f in b) {
                if(!e[f] && a.prototype[f] === undefined) {
                    e[f] = true;
                    c.call(d, b[f], f, b)
                }
            }
        } : function(a, b, c, d) {
            for(var e in b) {
                if(a.prototype[e] === undefined) {
                    c.call(d, b[e], e, b)
                }
            }
        };
        _8(g, h, j, k)
    };

    function instanceOf(a, b) {
        if(typeof b != "function") {
            throw new TypeError("Invalid 'instanceOf' operand.");
        }
        if(a == null) return false; /*@cc_on@*/ /*@if(@_jscript_version<5.1)if($Legacy.instanceOf(a,b))return true;@else@*/
        if(a instanceof b) return true; /*@end@*/
        if(Base.ancestorOf == b.ancestorOf) return false;
        var c = a.constructor;
        if(typeof c != "function") return false;
        if(Base.ancestorOf == c.ancestorOf) return b == Object;
        switch(b) {
            case Array:
                return !!(typeof a == "object" && a.join && a.splice);
            case Function:
                return !!(typeof a == "function" && a.call);
            case RegExp:
                return c.prototype.toString() == _6;
            case Date:
                return !!a.getTimezoneOffset;
            case String:
            case Number:
            case Boolean:
                return typeof a == typeof b.prototype.valueOf();
            case Object:
                return true
        }
        return false
    };

    function assert(a, b, c) {
        if(!a) {
            throw new(c || Error)(b || "Assertion failed.");
        }
    };

    function assertArity(a, b, c) {
        if(b == null) b = a.callee.length;
        if(a.length < b) {
            throw new SyntaxError(c || "Not enough arguments.");
        }
    };

    function assertType(a, b, c) {
        if(b && (typeof b == "function" ? !instanceOf(a, b) : typeof a != b)) {
            throw new TypeError(c || "Invalid type.");
        }
    };

    function assignID(a) {
        if(!a.base2ID) a.base2ID = "b2_" + counter();
        return a.base2ID
    };

    function counter() {
        return _7++
    };

    function copy(a) {
        var b = function() {};
        b.prototype = a;
        return new b
    };

    function format(c) {
        var d = arguments;
        var e = new RegExp("%([1-" + arguments.length + "])", "g");
        return String(c).replace(e, function(a, b) {
            return b < d.length ? d[b] : a
        })
    };

    function match(a, b) {
        return String(a).match(b) || []
    };

    function rescape(a) {
        return String(a).replace(_3, "\\$1")
    };

    function trim(a) {
        return String(a).replace(_1, "").replace(_2, "")
    };

    function I(i) {
        return i
    };

    function K(k) {
        return function() {
            return k
        }
    };

    function bind(a, b) {
        var c = slice(arguments, 2);
        var d = function() {
            return a.apply(b, c.concat(slice(arguments)))
        };
        d._31 = assignID(a);
        return d
    };

    function delegate(a, b) {
        return function() {
            return a.apply(b, [this].concat(slice(arguments)))
        }
    };

    function flip(a) {
        return function() {
            return a.apply(this, Array2.swap(arguments, 0, 1))
        }
    };

    function not(a) {
        return function() {
            return !a.apply(this, arguments)
        }
    };

    function partial(a) {
        var b = slice.call(arguments, 1);
        return function() {
            return a.apply(this, b.concat(slice(arguments)))
        }
    };

    function unbind(b) {
        return function(a) {
            return b.apply(a, slice(arguments, 1))
        }
    };
    base2 = new Package(this, base2);
    eval(this.exports);
    base2.extend = extend;
    forEach(Enumerable, function(a, b) {
        if(!Module[b]) base2.addName(b, bind(a, Enumerable))
    });
    JavaScript = new Package(this, JavaScript);
    eval(this.exports)
};
new function(_) {
    var DOM = new base2.Package(this, {
        name: "DOM",
        version: "1.0 (beta 1)",
        exports: "Interface, Binding, Node, Document, Element, AbstractView, Event, EventTarget, DocumentEvent, " + "NodeSelector, DocumentSelector, ElementSelector, StaticNodeList, " + "ViewCSS, HTMLDocument, HTMLElement, Selector, Traversal, XPathParser",
        bind: function(a) {
            if(a && a.nodeType) {
                var b = assignID(a);
                if(!arguments.callee[b]) {
                    switch(a.nodeType) {
                        case 1:
                            if(typeof a.className == "string") {
                                (HTMLElement.bindings[a.tagName] || HTMLElement).bind(a)
                            } else {
                                Element.bind(a)
                            }
                            break;
                        case 9:
                            if(a.writeln) {
                                HTMLDocument.bind(a)
                            } else {
                                Document.bind(a)
                            }
                            break;
                        default:
                            Node.bind(a)
                    }
                    arguments.callee[b] = true
                }
            }
            return a
        },
        "@MSIE5.+win": {
            bind: function(a) {
                if(a && a.writeln) {
                    a.nodeType = 9
                }
                return this.base(a)
            }
        }
    });
    eval(this.imports);
    var _32 = detect("MSIE");
    var _33 = detect("MSIE5");
    if(detect("MSIE[56].+win") && !detect("SV1")) {
        var closures = {};
        extend(base2, "bind", function(b, c) {
            if(!c || c.nodeType != 1) {
                return this.base(b, c)
            }
            var d = c.uniqueID;
            var e = assignID(b);
            closures[e] = b;
            b = null;
            c = null;
            if(!closures[d]) closures[d] = {};
            var f = closures[d][e];
            if(f) return f;
            var g = function() {
                var a = document.all[d];
                return a ? closures[e].apply(a, arguments) : undefined
            };
            g._31 = e;
            closures[d][e] = g;
            return g
        });
        attachEvent("onunload", function() {
            closures = null
        })
    }
    var Interface = Module.extend(null, {
        implement: function(c) {
            if(typeof c == "object") {
                forEach(c, function(a, b) {
                    if(b.charAt(0) == "@") {
                        forEach(a, arguments.callee, this)
                    } else if(!this[b] && typeof a == "function") {
                        this.createDelegate(b, a.length)
                    }
                }, this)
            }
            return this.base(c)
        },
        createDelegate: function(a, b) {
            if(!this[a]) {
                var c = "var fn=function _%1(%2){%3.base=%3.%1.ancestor;var m=%3.base?'base':'%1';return %3[m](%4)}";
                var d = "abcdefghij".split("").slice(-b);
                eval(format(c, a, d, d[0], d.slice(1)));
                this[a] = fn
            }
        }
    });
    var Binding = Interface.extend(null, {
        extend: function(d, a) {
            if(a && a.bind != Function.bind) {
                var c = a.bind;
                delete a.bind
            }
            var b = this.base(d, a);
            b.bind = this.bind;
            if(c) extend(b, "bind", c);
            return b
        },
        bind: function(b) {
            return extend(b, this.prototype)
        }
    });
    var Node = Binding.extend({
        "@!(element.compareDocumentPosition)": {
            compareDocumentPosition: function(a, b) {
                if(Traversal.contains(a, b)) {
                    return 4 | 16
                } else if(Traversal.contains(b, a)) {
                    return 2 | 8
                }
                var c = _34(a);
                var d = _34(b);
                if(c < d) {
                    return 4
                } else if(c > d) {
                    return 2
                }
                return 0
            }
        }
    });
    var _34 = document.documentElement.sourceIndex ? function(a) {
        return a.sourceIndex
    } : function(a) {
        var b = 0;
        while(a) {
            b = Traversal.getNodeIndex(a) + "." + b;
            a = a.parentNode
        }
        return b
    };
    var Document = Node.extend(null, {
        bind: function(b) {
            extend(b, "createElement", function(a) {
                return DOM.bind(this.base(a))
            });
            AbstractView.bind(b.defaultView);
            if(b != window.document) new DOMContentLoadedEvent(b);
            return this.base(b)
        },
        "@!(document.defaultView)": {
            bind: function(a) {
                a.defaultView = Traversal.getDefaultView(a);
                return this.base(a)
            }
        }
    });
    var _35 = /^(href|src|type|value)$/;
    var _36 = {
        "class": "className",
        "for": "htmlFor"
    };
    var Element = Node.extend({
        "@MSIE.+win": {
            getAttribute: function(a, b, c) {
                if(a.className === undefined) {
                    return this.base(a, b)
                }
                var d = _37(a, b);
                if(d && d.specified) {
                    if(_35.test(b)) {
                        return this.base(a, b, 2)
                    } else if(b == "style") {
                        return a.style.cssText
                    } else {
                        return d.nodeValue
                    }
                }
                return null
            },
            setAttribute: function(a, b, c) {
                if(a.className === undefined) {
                    this.base(a, b, c)
                } else if(b == "style") {
                    a.style.cssText = c
                } else {
                    this.base(a, _36[b] || b, String(c))
                }
            }
        },
        "@!(element.hasAttribute)": {
            hasAttribute: function(a, b) {
                return this.getAttribute(a, b) != null
            }
        }
    });
    extend(Element.prototype, "cloneNode", function(a) {
        var b = this.base(a || false);
        b.base2ID = undefined;
        return b
    });
    if(_32) {
        var names = "colSpan,rowSpan,vAlign,dateTime,accessKey,tabIndex,encType,maxLength,readOnly,longDesc";
        extend(_36, Array2.combine(names.toLowerCase().split(","), names.split(",")));
        var _37 = _33 ? function(a, b) {
            return a.attributes[b] || a.attributes[_36[b.toLowerCase()]]
        } : function(a, b) {
            return a.getAttributeNode(b)
        }
    }
    var TEXT = _32 ? "innerText" : "textContent";
    var Traversal = Module.extend({
        getDefaultView: function(a) {
            return this.getDocument(a).defaultView
        },
        getNextElementSibling: function(a) {
            while(a && (a = a.nextSibling) && !this.isElement(a)) continue;
            return a
        },
        getNodeIndex: function(a) {
            var b = 0;
            while(a && (a = a.previousSibling)) b++;
            return b
        },
        getOwnerDocument: function(a) {
            return a.ownerDocument
        },
        getPreviousElementSibling: function(a) {
            while(a && (a = a.previousSibling) && !this.isElement(a)) continue;
            return a
        },
        getTextContent: function(a) {
            return a[TEXT]
        },
        isEmpty: function(a) {
            a = a.firstChild;
            while(a) {
                if(a.nodeType == 3 || this.isElement(a)) return false;
                a = a.nextSibling
            }
            return true
        },
        setTextContent: function(a, b) {
            return a[TEXT] = b
        },
        "@MSIE": {
            getDefaultView: function(a) {
                return this.getDocument(a).parentWindow
            },
            "@MSIE5": {
                getOwnerDocument: function(a) {
                    return a.ownerDocument || a.document
                }
            }
        }
    }, {
        contains: function(a, b) {
            while(b && (b = b.parentNode) && a != b) continue;
            return !!b
        },
        getDocument: function(a) {
            return this.isDocument(a) ? a : this.getOwnerDocument(a)
        },
        isDocument: function(a) {
            return !!(a && a.documentElement)
        },
        isElement: function(a) {
            return !!(a && a.nodeType == 1)
        },
        "@(element.contains)": {
            contains: function(a, b) {
                return a != b && (this.isDocument(a) ? a == this.getOwnerDocument(b) : a.contains(b))
            }
        },
        "@MSIE5": {
            isElement: function(a) {
                return !!(a && a.nodeType == 1 && a.tagName != "!")
            }
        }
    });
    var AbstractView = Binding.extend();
    var Event = Binding.extend({
        "@!(document.createEvent)": {
            initEvent: function(a, b, c, d) {
                a.type = b;
                a.bubbles = c;
                a.cancelable = d;
                a.timeStamp = new Date().valueOf()
            },
            "@MSIE": {
                initEvent: function(a, b, c, d) {
                    this.base(a, b, c, d);
                    a.cancelBubble = !a.bubbles
                },
                preventDefault: function(a) {
                    if(a.cancelable !== false) {
                        a.returnValue = false
                    }
                },
                stopPropagation: function(a) {
                    a.cancelBubble = true
                }
            }
        }
    }, {
        "@!(document.createEvent)": {
            "@MSIE": {
                "@Mac": {
                    bind: function(a) {
                        return this.base(extend(copy(a), {
                            preventDefault: function() {
                                if(this.cancelable !== false) {
                                    this.returnValue = false
                                }
                            }
                        }))
                    }
                },
                "@Windows": {
                    bind: function(a) {
                        if(!a.timeStamp) {
                            a.bubbles = !!_38[a.type];
                            a.cancelable = !!_39[a.type];
                            a.timeStamp = new Date().valueOf()
                        }
                        if(!a.target) {
                            a.target = a.srcElement
                        }
                        a.relatedTarget = a[(a.type == "mouseout" ? "to" : "from") + "Element"];
                        return this.base(a)
                    }
                }
            }
        }
    });
    if(_32) {
        var _38 = "abort,error,select,change,resize,scroll";
        var _39 = "click,mousedown,mouseup,mouseover,mousemove,mouseout,keydown,keyup,submit,reset";
        _38 = Array2.combine((_38 + "," + _39).split(","));
        _39 = Array2.combine(_39.split(","))
    }
    var EventTarget = Interface.extend({
        "@!(element.addEventListener)": {
            addEventListener: function(a, b, c, d) {
                var e = assignID(a);
                var f = c._31 || assignID(c);
                var g = _40[e];
                if(!g) g = _40[e] = {};
                var h = g[b];
                var i = a["on" + b];
                if(!h) {
                    h = g[b] = {};
                    if(i) h[0] = i
                }
                h[f] = c;
                if(i !== undefined) {
                    a["on" + b] = delegate(_40.handleEvent)
                }
            },
            dispatchEvent: function(a, b) {
                return _40.handleEvent(a, b)
            },
            removeEventListener: function(a, b, c, d) {
                var e = _40[a.base2ID];
                if(e && e[b]) {
                    delete e[b][c.base2ID]
                }
            },
            "@MSIE.+win": {
                addEventListener: function(a, b, c, d) {
                    if(typeof c == "function") {
                        c = bind(c, a)
                    }
                    this.base(a, b, c, d)
                },
                dispatchEvent: function(a, b) {
                    b.target = a;
                    try {
                        return a.fireEvent(b.type, b)
                    } catch(error) {
                        return this.base(a, b)
                    }
                }
            }
        }
    });
    var _40 = new Base({
        handleEvent: function(a, b) {
            var c = true;
            var d = _40[a.base2ID];
            if(d) {
                b = Event.bind(b);
                var e = d[b.type];
                for(var i in e) {
                    var listener = e[i];
                    if(listener.handleEvent) {
                        var result = listener.handleEvent(b)
                    } else {
                        result = listener.call(a, b)
                    }
                    if(result === false || b.returnValue === false) c = false
                }
            }
            return c
        },
        "@MSIE": {
            handleEvent: function(a, b) {
                if(a.Infinity) {
                    a = a.document.parentWindow;
                    if(!b) b = a.event
                }
                return this.base(a, b || Traversal.getDefaultView(a).event)
            }
        }
    });
    var DocumentEvent = Interface.extend({
        "@!(document.createEvent)": {
            createEvent: function(a, b) {
                return Event.bind({})
            },
            "@(document.createEventObject)": {
                createEvent: function(a, b) {
                    return Event.bind(a.createEventObject())
                }
            }
        },
        "@(document.createEvent)": {
            "@!(document.createEvent('Events'))": {
                createEvent: function(a, b) {
                    return this.base(a, b == "Events" ? "UIEvents" : b)
                }
            }
        }
    });
    var DOMContentLoadedEvent = Base.extend({
        constructor: function(b) {
            var c = false;
            this.fire = function() {
                if(!c) {
                    c = true;
                    setTimeout(function() {
                        var a = DocumentEvent.createEvent(b, "Events");
                        Event.initEvent(a, "DOMContentLoaded", false, false);
                        EventTarget.dispatchEvent(b, a)
                    }, 1)
                }
            };
            EventTarget.addEventListener(b, "DOMContentLoaded", function() {
                c = true
            }, false);
            EventTarget.addEventListener(Traversal.getDefaultView(b), "load", this.fire, false)
        },
        "@(attachEvent)": {
            constructor: function() {
                this.base(document);
                Traversal.getDefaultView(document).attachEvent("onload", this.fire)
            }
        },
        "@MSIE.+win": {
            constructor: function(a) {
                this.base(a);
                if(a.readyState != "complete") {
                    var b = this;
                    a.write("<script id=__ready defer src=//:><\/script>");
                    a.all.__ready.onreadystatechange = function() {
                        if(this.readyState == "complete") {
                            this.removeNode();
                            b.fire()
                        }
                    }
                }
            }
        },
        "@KHTML": {
            constructor: function(a) {
                this.base(a);
                if(a.readyState != "complete") {
                    var b = this;
                    var c = setInterval(function() {
                        if(/loaded|complete/.test(a.readyState)) {
                            clearInterval(c);
                            b.fire()
                        }
                    }, 100)
                }
            }
        }
    });
    new DOMContentLoadedEvent(document);
    Document.implement(DocumentEvent);
    Document.implement(EventTarget);
    Element.implement(EventTarget);
    var _41 = /^\d+(px)?$/i;
    var _42 = /(width|height|top|bottom|left|right|fontSize)$/;
    var _43 = /^(color|backgroundColor)$/;
    var ViewCSS = Interface.extend({
        "@!(document.defaultView.getComputedStyle)": {
            "@MSIE": {
                getComputedStyle: function(b, c, d) {
                    var e = c.currentStyle;
                    var f = {
                        getPropertyValue: function(a) {
                            return this[ViewCSS.toCamelCase(a)]
                        }
                    };
                    for(var i in e) {
                        if(_42.test(i)) {
                            f[i] = _44(c, f[i]) + "px"
                        } else if(_43.test(i)) {
                            f[i] = _45(c, i == "color" ? "ForeColor" : "BackColor")
                        } else {
                            f[i] = e[i]
                        }
                    }
                    return f
                }
            }
        }
    }, {
        toCamelCase: function(c) {
            return c.replace(/\-([a-z])/g, function(a, b) {
                return b.toUpperCase()
            })
        }
    });

    function _44(a, b) {
        if(_41.test(b)) return parseInt(b);
        var c = a.style.left;
        var d = a.runtimeStyle.left;
        a.runtimeStyle.left = a.currentStyle.left;
        a.style.left = b || 0;
        b = a.style.pixelLeft;
        a.style.left = c;
        a.runtimeStyle.left = d;
        return b
    };

    function _45(a, b) {
        var c = a.document.body.createTextRange();
        c.moveToElementText(a);
        var d = c.queryCommandValue(b);
        return format("rgb(%1,%2,%3)", d & 0xff, (d & 0xff00) >> 8, (d & 0xff0000) >> 16)
    };
    AbstractView.implement(ViewCSS);
    var NodeSelector = Interface.extend({
        "@!(element.querySelector)": {
            querySelector: function(a, b) {
                return new Selector(b).exec(a, 1)
            },
            querySelectorAll: function(a, b) {
                return new Selector(b).exec(a)
            }
        }
    });
    extend(NodeSelector.prototype, {
        querySelector: function(a) {
            return DOM.bind(this.base(a))
        },
        querySelectorAll: function(b) {
            return extend(this.base(b), "item", function(a) {
                return DOM.bind(this.base(a))
            })
        }
    });
    var DocumentSelector = NodeSelector.extend();
    var ElementSelector = NodeSelector.extend({
        "@!(element.matchesSelector)": {
            matchesSelector: function(a, b) {
                return new Selector(b).test(a)
            }
        }
    });
    var StaticNodeList = Base.extend({
        constructor: function(b) {
            b = b || [];
            this.length = b.length;
            this.item = function(a) {
                return b[a]
            }
        },
        length: 0,
        forEach: function(a, b) {
            for(var i = 0; i < this.length; i++) {
                a.call(b, this.item(i), i, this)
            }
        },
        item: Undefined,
        "@(XPathResult)": {
            constructor: function(b) {
                if(b && b.snapshotItem) {
                    this.length = b.snapshotLength;
                    this.item = function(a) {
                        return b.snapshotItem(a)
                    }
                } else this.base(b)
            }
        }
    });
    StaticNodeList.implement(Enumerable);
    var CSSParser = RegGrp.extend({
        constructor: function(a) {
            this.base(a);
            this.cache = {};
            this.sorter = new RegGrp;
            this.sorter.add(/:not\([^)]*\)/, RegGrp.IGNORE);
            this.sorter.add(/([ >](\*|[\w-]+))([^: >+~]*)(:\w+-child(\([^)]+\))?)([^: >+~]*)/, "$1$3$6$4")
        },
        cache: null,
        ignoreCase: true,
        escape: function(b) {
            var c = /'/g;
            var d = this._46 = [];
            return this.optimise(this.format(String(b).replace(CSSParser.ESCAPE, function(a) {
                d.push(a.slice(1, -1).replace(c, "\\'"));
                return "\x01" + d.length
            })))
        },
        format: function(a) {
            return a.replace(CSSParser.WHITESPACE, "$1").replace(CSSParser.IMPLIED_SPACE, "$1 $2").replace(CSSParser.IMPLIED_ASTERISK, "$1*$2")
        },
        optimise: function(a) {
            return this.sorter.exec(a.replace(CSSParser.WILD_CARD, ">* "))
        },
        parse: function(a) {
            return this.cache[a] || (this.cache[a] = this.unescape(this.exec(this.escape(a))))
        },
        unescape: function(c) {
            var d = this._46;
            return c.replace(/\x01(\d+)/g, function(a, b) {
                return d[b - 1]
            })
        }
    }, {
        ESCAPE: /'(\\.|[^'\\])*'|"(\\.|[^"\\])*"/g,
        IMPLIED_ASTERISK: /([\s>+~,]|[^(]\+|^)([#.:@])/g,
        IMPLIED_SPACE: /(^|,)([^\s>+~])/g,
        WHITESPACE: /\s*([\s>+~(),]|^|$)\s*/g,
        WILD_CARD: /\s\*\s/g,
        _47: function(c, d, e, f, g, h, i, j) {
            f = /last/i.test(c) ? f + "+1-" : "";
            if(!isNaN(d)) d = "0n+" + d;
            else if(d == "even") d = "2n";
            else if(d == "odd") d = "2n+1";
            d = d.split(/n\+?/);
            var a = d[0] ? (d[0] == "-") ? -1 : parseInt(d[0]) : 1;
            var b = parseInt(d[1]) || 0;
            var k = a < 0;
            if(k) {
                a = -a;
                if(a == 1) b++
            }
            var l = format(a == 0 ? "%3%7" + (f + b) : "(%4%3-%2)%6%1%70%5%4%3>=%2", a, b, e, f, h, i, j);
            if(k) l = g + "(" + l + ")";
            return l
        }
    });
    var XPathParser = CSSParser.extend({
        constructor: function() {
            this.base(XPathParser.rules);
            this.sorter.putAt(1, "$1$4$3$6")
        },
        escape: function(a) {
            return this.base(a).replace(/,/g, "\x02")
        },
        unescape: function(a) {
            return this.base(a.replace(/\[self::\*\]/g, "").replace(/(^|\x02)\//g, "$1./").replace(/\x02/g, " | "))
        },
        "@opera": {
            unescape: function(a) {
                return this.base(a.replace(/last\(\)/g, "count(preceding-sibling::*)+count(following-sibling::*)+1"))
            }
        }
    }, {
        init: function() {
            this.values.attributes[""] = "[@$1]";
            forEach(this.types, function(a, b) {
                forEach(this.values[b], a, this.rules)
            }, this)
        },
        optimised: {
            pseudoClasses: {
                "first-child": "[1]",
                "last-child": "[last()]",
                "only-child": "[last()=1]"
            }
        },
        rules: extend({}, {
            "@!KHTML": {
                "(^|\\x02) (\\*|[\\w-]+)#([\\w-]+)": "$1id('$3')[self::$2]",
                "([ >])(\\*|[\\w-]+):([\\w-]+-child(\\(([^)]+)\\))?)": function(a, b, c, d, e, f) {
                    var g = (b == " ") ? "//*" : "/*";
                    if(/^nth/i.test(d)) {
                        g += _47(d, f, "position()")
                    } else {
                        g += XPathParser.optimised.pseudoClasses[d]
                    }
                    return g + "[self::" + c + "]"
                }
            }
        }),
        types: {
            identifiers: function(a, b) {
                this[rescape(b) + "([\\w-]+)"] = a
            },
            combinators: function(a, b) {
                this[rescape(b) + "(\\*|[\\w-]+)"] = a
            },
            attributes: function(a, b) {
                this["\\[([\\w-]+)\\s*" + rescape(b) + "\\s*([^\\]]*)\\]"] = a
            },
            pseudoClasses: function(a, b) {
                this[":" + b.replace(/\(\)$/, "\\(([^)]+)\\)")] = a
            }
        },
        values: {
            identifiers: {
                "#": "[@id='$1'][1]",
                ".": "[contains(concat(' ',@class,' '),' $1 ')]"
            },
            combinators: {
                " ": "/descendant::$1",
                ">": "/child::$1",
                "+": "/following-sibling::*[1][self::$1]",
                "~": "/following-sibling::$1"
            },
            attributes: {
                "*=": "[contains(@$1,'$2')]",
                "^=": "[starts-with(@$1,'$2')]",
                "$=": "[substring(@$1,string-length(@$1)-string-length('$2')+1)='$2']",
                "~=": "[contains(concat(' ',@$1,' '),' $2 ')]",
                "|=": "[contains(concat('-',@$1,'-'),'-$2-')]",
                "!=": "[not(@$1='$2')]",
                "=": "[@$1='$2']"
            },
            pseudoClasses: {
                "empty": "[not(child::*) and not(text())]",
                "first-child": "[not(preceding-sibling::*)]",
                "last-child": "[not(following-sibling::*)]",
                "not()": _48,
                "nth-child()": _47,
                "nth-last-child()": _47,
                "only-child": "[not(preceding-sibling::*) and not(following-sibling::*)]",
                "root": "[not(parent::*)]"
            }
        },
        "@opera": {
            init: function() {
                this.optimised.pseudoClasses["last-child"] = this.values.pseudoClasses["last-child"];
                this.optimised.pseudoClasses["only-child"] = this.values.pseudoClasses["only-child"];
                this.base()
            }
        }
    });
    var _49 = new XPathParser;

    function _48(a, b) {
        return "[not(" + _49.exec(trim(b)).replace(/\[1\]/g, "").replace(/^(\*|[\w-]+)/, "[self::$1]").replace(/\]\[/g, " and ").slice(1, -1) + ")]"
    };

    function _47(a, b, c) {
        return "[" + CSSParser._47(a, b, c || "count(preceding-sibling::*)+1", "last()", "not", " and ", " mod ", "=") + "]"
    };
    var _50 = ":(checked|disabled|enabled|contains)|^(#[\\w-]+\\s*)?\\w+$";
    if(detect("KHTML")) {
        if(detect("WebKit5")) {
            _50 += "|nth\\-|,"
        } else {
            _50 = "."
        }
    }
    _50 = new RegExp(_50);
    var _51;
    var Selector = Base.extend({
        constructor: function(a) {
            this.toString = K(trim(a))
        },
        exec: function(a, b) {
            return Selector.parse(this)(a, b)
        },
        test: function(a) {
            var b = new Selector(this + "[-base2-test]");
            a.setAttribute("-base2-test", true);
            var c = b.exec(Traversal.getOwnerDocument(a), true);
            a.removeAttribute("-base2-test");
            return c == a
        },
        toXPath: function() {
            return Selector.toXPath(this)
        },
        "@(XPathResult)": {
            exec: function(a, b) {
                if(_50.test(this)) {
                    return this.base(a, b)
                }
                var c = Traversal.getDocument(a);
                var d = b ? 9 : 7;
                var e = c.evaluate(this.toXPath(), a, null, d, null);
                return b ? e.singleNodeValue : e
            }
        },
        "@MSIE": {
            exec: function(a, b) {
                if(typeof a.selectNodes != "undefined" && !_50.test(this)) {
                    var c = b ? "selectSingleNode" : "selectNodes";
                    return a[c](this.toXPath())
                }
                return this.base(a, b)
            }
        },
        "@(true)": {
            exec: function(a, b) {
                try {
                    var c = this.base(a || document, b)
                } catch(error) {
                    throw new SyntaxError(format("'%1' is not a valid CSS selector.", this));
                }
                return b ? c : new StaticNodeList(c)
            }
        }
    }, {
        toXPath: function(a) {
            if(!_51) _51 = new XPathParser;
            return _51.parse(a)
        }
    });
    new function(_) {
        var _52 = {
            "=": "%1=='%2'",
            "!=": "%1!='%2'",
            "~=": /(^| )%1( |$)/,
            "|=": /^%1(-|$)/,
            "^=": /^%1/,
            "$=": /%1$/,
            "*=": /%1/
        };
        _52[""] = "%1!=null";
        var _53 = {
            "checked": "e%1.checked",
            "contains": "e%1[TEXT].indexOf('%2')!=-1",
            "disabled": "e%1.disabled",
            "empty": "Traversal.isEmpty(e%1)",
            "enabled": "e%1.disabled===false",
            "first-child": "!Traversal.getPreviousElementSibling(e%1)",
            "last-child": "!Traversal.getNextElementSibling(e%1)",
            "only-child": "!Traversal.getPreviousElementSibling(e%1)&&!Traversal.getNextElementSibling(e%1)",
            "root": "e%1==Traversal.getDocument(e%1).documentElement"
        };
        var _54 = detect("(element.sourceIndex)");
        var _55 = "var p%2=0,i%2,e%2,n%2=e%1.";
        var _56 = _54 ? "e%1.sourceIndex" : "assignID(e%1)";
        var _57 = "var g=" + _56 + ";if(!p[g]){p[g]=1;";
        var _58 = "r[r.length]=e%1;if(s)return e%1;";
        var _59 = "r.sort(sorter);";
        var _60 = "fn=function(e0,s){indexed++;var r=[],p={},reg=[%1]," + "d=Traversal.getDocument(e0),c=d.body?'toUpperCase':'toString';";
        var byId = _32 ? function(a, b) {
            var c = a.all[b] || null;
            if(!c || c.id == b) return c;
            for(var i = 0; i < c.length; i++) {
                if(c[i].id == b) return c[i]
            }
            return null
        } : function(a, b) {
            return a.getElementById(b)
        };
        var indexed = 1;

        function register(a) {
            if(a.rows) {
                a.b2_length = a.rows.length;
                a.b2_lookup = "rowIndex"
            } else if(a.cells) {
                a.b2_length = a.cells.length;
                a.b2_lookup = "cellIndex"
            } else if(a.b2_indexed != indexed) {
                var b = 0;
                var c = a.firstChild;
                while(c) {
                    if(c.nodeType == 1 && c.nodeName != "!") {
                        c.b2_index = ++b
                    }
                    c = c.nextSibling
                }
                a.b2_length = b;
                a.b2_lookup = "b2_index"
            }
            a.b2_indexed = indexed;
            return a
        };
        var sorter = _54 ? function(a, b) {
            return a.sourceIndex - b.sourceIndex
        } : Node.compareDocumentPosition;
        var fn;
        var reg;
        var _61;
        var _62;
        var _63;
        var _64;
        var _65 = {};
        var parser = new CSSParser({
            "^ \\*:root": function(a) {
                _62 = false;
                var b = "e%2=d.documentElement;if(Traversal.contains(e%1,e%2)){";
                return format(b, _61++, _61)
            },
            " (\\*|[\\w-]+)#([\\w-]+)": function(a, b, c) {
                _62 = false;
                var d = "var e%2=byId(d,'%4');if(e%2&&";
                if(b != "*") d += "e%2.nodeName=='%3'[c]()&&";
                d += "Traversal.contains(e%1,e%2)){";
                if(_63) d += format("i%1=n%1.length;", _63);
                return format(d, _61++, _61, b, c)
            },
            " (\\*|[\\w-]+)": function(a, b) {
                _64++;
                _62 = b == "*";
                var c = _55;
                c += (_62 && _33) ? "all" : "getElementsByTagName('%3')";
                c += ";for(i%2=0;(e%2=n%2[i%2]);i%2++){";
                return format(c, _61++, _63 = _61, b)
            },
            ">(\\*|[\\w-]+)": function(a, b) {
                var c = _32 && _63;
                _62 = b == "*";
                var d = _55;
                d += c ? "children" : "childNodes";
                if(!_62 && c) d += ".tags('%3')";
                d += ";for(i%2=0;(e%2=n%2[i%2]);i%2++){";
                if(_62) {
                    d += "if(e%2.nodeType==1){";
                    _62 = _33
                } else {
                    if(!c) d += "if(e%2.nodeName=='%3'[c]()){"
                }
                return format(d, _61++, _63 = _61, b)
            },
            "\\+(\\*|[\\w-]+)": function(a, b) {
                var c = "";
                if(_62 && _32) c += "if(e%1.tagName!='!'){";
                _62 = false;
                c += "e%1=Traversal.getNextElementSibling(e%1);if(e%1";
                if(b != "*") c += "&&e%1.nodeName=='%2'[c]()";
                c += "){";
                return format(c, _61, b)
            },
            "~(\\*|[\\w-]+)": function(a, b) {
                var c = "";
                if(_62 && _32) c += "if(e%1.tagName!='!'){";
                _62 = false;
                _64 = 2;
                c += "while(e%1=e%1.nextSibling){if(e%1.b2_adjacent==indexed)break;if(";
                if(b == "*") {
                    c += "e%1.nodeType==1";
                    if(_33) c += "&&e%1.tagName!='!'"
                } else c += "e%1.nodeName=='%2'[c]()";
                c += "){e%1.b2_adjacent=indexed;";
                return format(c, _61, b)
            },
            "#([\\w-]+)": function(a, b) {
                _62 = false;
                var c = "if(e%1.id=='%2'){";
                if(_63) c += format("i%1=n%1.length;", _63);
                return format(c, _61, b)
            },
            "\\.([\\w-]+)": function(a, b) {
                _62 = false;
                reg.push(new RegExp("(^|\\s)" + rescape(b) + "(\\s|$)"));
                return format("if(e%1.className&&reg[%2].test(e%1.className)){", _61, reg.length - 1)
            },
            ":not\\((\\*|[\\w-]+)?([^)]*)\\)": function(a, b, c) {
                var d = (b && b != "*") ? format("if(e%1.nodeName=='%2'[c]()){", _61, b) : "";
                d += parser.exec(c);
                return "if(!" + d.slice(2, -1).replace(/\)\{if\(/g, "&&") + "){"
            },
            ":nth(-last)?-child\\(([^)]+)\\)": function(a, b, c) {
                _62 = false;
                b = format("e%1.parentNode.b2_length", _61);
                var d = "if(p%1!==e%1.parentNode)p%1=register(e%1.parentNode);";
                d += "var i=e%1[p%1.b2_lookup];if(";
                return format(d, _61) + CSSParser._47(a, c, "i", b, "!", "&&", "%", "==") + "){"
            },
            ":([\\w-]+)(\\(([^)]+)\\))?": function(a, b, c, d) {
                return "if(" + format(_53[b] || "throw", _61, d || "") + "){"
            },
            "\\[([\\w-]+)\\s*([^=]?=)?\\s*([^\\]]*)\\]": function(a, b, c, d) {
                var e = _36[b] || b;
                if(c) {
                    var f = "e%1.getAttribute('%2',2)";
                    if(!_35.test(b)) {
                        f = "e%1.%3||" + f
                    }
                    b = format("(" + f + ")", _61, b, e)
                } else {
                    b = format("Element.getAttribute(e%1,'%2')", _61, b)
                }
                var g = _52[c || ""];
                if(instanceOf(g, RegExp)) {
                    reg.push(new RegExp(format(g.source, rescape(parser.unescape(d)))));
                    g = "reg[%2].test(%1)";
                    d = reg.length - 1
                }
                return "if(" + format(g, b, d) + "){"
            }
        });
        Selector.parse = function(a) {
            if(!_65[a]) {
                reg = [];
                fn = "";
                var b = parser.escape(a).split(",");
                for(var i = 0; i < b.length; i++) {
                    _62 = _61 = _63 = 0;
                    _64 = b.length > 1 ? 2 : 0;
                    var c = parser.exec(b[i]) || "throw;";
                    if(_62 && _32) {
                        c += format("if(e%1.tagName!='!'){", _61)
                    }
                    var d = (_64 > 1) ? _57 : "";
                    c += format(d + _58, _61);
                    c += Array(match(c, /\{/g).length + 1).join("}");
                    fn += c
                }
                if(b.length > 1) fn += _59;
                eval(format(_60, reg) + parser.unescape(fn) + "return s?null:r}");
                _65[a] = fn
            }
            return _65[a]
        }
    };
    Document.implement(DocumentSelector);
    Element.implement(ElementSelector);
    var HTMLDocument = Document.extend(null, {
        "@(document.activeElement===undefined)": {
            bind: function(b) {
                b.activeElement = null;
                EventTarget.addEventListener(b, "focus", function(a) {
                    b.activeElement = a.target
                }, false);
                return this.base(b)
            }
        }
    });
    var HTMLElement = Element.extend({
        addClass: function(a, b) {
            if(!this.hasClass(a, b)) {
                a.className += (a.className ? " " : "") + b
            }
        },
        hasClass: function(a, b) {
            var c = new RegExp("(^|\\s)" + b + "(\\s|$)");
            return c.test(a.className)
        },
        removeClass: function(a, b) {
            var c = new RegExp("(^|\\s)" + b + "(\\s|$)", "g");
            a.className = a.className.replace(c, "$2")
        },
        toggleClass: function(a, b) {
            if(this.hasClass(a, b)) {
                this.removeClass(a, b)
            } else {
                this.addClass(a, b)
            }
        }
    }, {
        bindings: {},
        tags: "*",
        extend: function() {
            var b = base(this, arguments);
            var c = (b.tags || "").toUpperCase().split(",");
            forEach(c, function(a) {
                HTMLElement.bindings[a] = b
            });
            return b
        },
        "@!(element.ownerDocument)": {
            bind: function(a) {
                a.ownerDocument = Traversal.getOwnerDocument(a);
                return this.base(a)
            }
        }
    });
    eval(this.exports)
};
new function(_) {
    var JSB = new base2.Package(this, {
        name: "JSB",
        version: "0.7",
        imports: "DOM",
        exports: "Behavior, Rule, RuleList"
    });
    eval(this.imports);
    var Behavior = Abstract.extend();
    var Call = Base.extend({
        constructor: function(a, b, c, d) {
            this.release = function() {
                b.apply(a, c)
            };
            this.rank = d || (100 + Call.list.length)
        }
    }, {
        list: [],
        defer: function(a, b) {
            return function() {
                if(Call.list) {
                    Call.list.push(new Call(this, a, arguments, b))
                } else {
                    a.apply(this, arguments)
                }
            }
        },
        init: function() {
            EventTarget.addEventListener(document, "DOMContentLoaded", function() {
                if(Call.list) {
                    DOM.bind(document);
                    Call.list.sort(function(a, b) {
                        return a.rank - b.rank
                    });
                    invoke(Call.list, "release");
                    delete Call.list;
                    setTimeout(function() {
                        var a = DocumentEvent.createEvent(document, "Events");
                        Event.initEvent(a, "ready", false, false);
                        EventTarget.dispatchEvent(document, a)
                    }, 1)
                }
            }, false)
        }
    });
    var _66 = /^on[a-z]+$/;
    var Rule = Base.extend({
        constructor: function(e, f) {
            e = new Selector(e);
            if(Behavior.ancestorOf(f)) {
                f = f.prototype
            }
            var g = {},
                h = {},
                i = f.style,
                j = {};
            forEach(f, function(a, b) {
                if(b.charAt(0) == "@") {
                    if(detect(b.slice(1))) {
                        forEach(a, arguments.callee)
                    }
                } else if(typeof a == "function" && _66.test(b)) {
                    h[b.slice(2)] = a
                } else if(b != "style") {
                    g[b] = a
                }
            });

            function addBehavior(a) {
                var b = assignID(a);
                if(!j[b]) {
                    j[b] = true;
                    DOM.bind(a);
                    extend(a, g);
                    extend(a.style, i);
                    for(var c in h) {
                        var target = a;
                        var d = h[c];
                        if(c.indexOf("document") == 0) {
                            target = document;
                            c = c.slice(8);
                            d = bind(d, a)
                        }
                        target.addEventListener(c, d, false)
                    }
                }
            };
            this.refresh = Call.defer(function() {
                e.exec(document).forEach(addBehavior)
            });
            this.toString = K(String(e));
            this.refresh()
        },
        refresh: Undefined
    });
    var RuleList = Collection.extend({
        constructor: function(a) {
            this.base(a);
            this.globalize()
        },
        globalize: Call.defer(function() {
            var e = /[^\s,]+/g;
            var f = /^#[\w-]+$/;
            forEach(this, function(c, d) {
                forEach(match(d, e), function(a) {
                    if(f.test(a)) {
                        var b = ViewCSS.toCamelCase(a.slice(1));
                        window[b] = Document.querySelector(document, a)
                    }
                })
            })
        }, 10),
        refresh: function() {
            this.invoke("refresh")
        }
    }, {
        Item: Rule
    });
    eval(this.exports)
};
eval(base2.namespace);
var DEFAULT = "@0";
var IGNORE = RegGrp.IGNORE;
var Colorizer = RegGrp.extend({
    constructor: function(c, d, e) {
        this.extend(e);
        this.patterns = c || {};
        var f = {},
            i;
        forEach(c, function(a, b) {
            f[b] = d[b] || DEFAULT
        });
        forEach(d, function(a, b) {
            f[b] = d[b]
        });
        this.base(f)
    },
    patterns: null,
    tabStop: 4,
    urls: true,
    copy: function() {
        var a = this.base();
        a.patterns = copy(this.patterns);
        return a
    },
    exec: function(a, b) {
        a = this.base(this.escape(a));
        if(!b) {
            a = this._67(a);
            if(this.urls) a = Colorizer.urls.exec(a)
        }
        return this.unescape(a)
    },
    escape: function(a) {
        return String(a).replace(/</g, "\x01").replace(/&/g, "\x02")
    },
    put: function(c, d) {
        if(!instanceOf(c, RegGrp.Item)) {
            if(typeof d == "string") {
                d = d.replace(/@(\d)/, function(a, b) {
                    return format(Colorizer.FORMAT, c, b)
                })
            }
            c = this.patterns[c] || Colorizer.patterns[c] || c;
            if(instanceOf(c, RegExp)) c = c.source;
            c = this.escape(c)
        }
        return this.base(c, d)
    },
    unescape: function(a) {
        return a.replace(/\x01/g, "&lt;").replace(/\x02/g, "&amp;")
    },
    _67: function(c) {
        var d = this.tabStop;
        if(d > 0) {
            var e = Array(d + 1).join(" ");
            return c.replace(Colorizer.TABS, function(a) {
                a = a.replace(Colorizer.TAB, e);
                if(d > 1) {
                    var b = (a.length - 1) % d;
                    if(b) a = a.slice(0, -b)
                }
                return a.replace(/ /g, "&nbsp;")
            })
        }
        return c
    },
    "@MSIE": {
        _67: function(a) {
            return this.base(a).replace(/\r?\n/g, "<br>")
        }
    }
}, {
    version: "0.8",
    FORMAT: '<span class="%1">$%2</span>',
    DEFAULT: DEFAULT,
    IGNORE: IGNORE,
    TAB: /\t/g,
    TABS: /\n([\t \xa0]+)/g,
    init: function() {
        forEach(this.patterns, function(c, d, e) {
            if(instanceOf(c, Array)) {
                e[d] = reduce(c, function(a, b) {
                    a.add(e[b]);
                    return a
                }, new RegGrp)
            }
        });
        this.urls = this.patterns.urls.copy();
        this.urls.putAt(0, '<a href="mailto:$0">$0</a>');
        this.urls.putAt(1, '<a href="$0">$0</a>')
    },
    addScheme: function(a, b, c, d) {
        this[a] = new this(b, c, d)
    },
    patterns: {
        block_comment: /\/\*[^*]*\*+([^\/][^*]*\*+)*\//,
        email: /([\w.+-]+@[\w.-]+\.\w+)/,
        line_comment: /\/\/[^\r\n]*/,
        number: /\b\-?(0|[1-9]\d*)(\.\d+)?([eE][-+]?\d+)?\b/,
        string1: /'(\\.|[^'\\])*'/,
        string2: /"(\\.|[^"\\])*"/,
        url: /(http:\/\/+[\w\/\-%&#=.,?+$]+)/,
        comment: ["block_comment", "line_comment"],
        string: ["string1", "string2"],
        urls: ["email", "url"]
    },
    urls: null
});
base2.addPackage("code");
base2.code.addName("Colorizer", Colorizer);
with(base2.code.Colorizer) addScheme("xml", {
    attribute: /(\w+)=("[^"]*"|'[^']*')/,
    cdata: /<!\[CDATA\[([^\]]|\][^\]]|\]\][^>])*\]\]>/,
    comment: /<!\s*(--([^-]|[\r\n]|-[^-])*--\s*)>/,
    entity: /&#?\w+;/,
    "processing-instruction": /<\?[\w-]+[^>]+>/,
    tag: /(<\/?)([\w:-]+)/,
    text: /[>;][^<>&]*/
}, {
    cdata: IGNORE,
    tag: "$1@2",
    attribute: '@1=<span class="attribute value">$2</span>',
    text: IGNORE
}, {
    tabStop: 1
});
with(base2) code.Colorizer.addScheme("html", {
    conditional: /<!(--)?\[[^\]]*\]>|<!\[endif\](--)?>/,
    doctype: /<!(DOCTYPE|doctype)[^>]+>/,
    inline: /<(script|style)([^>]*)>((\\.|[^\\])*)<\/\1>/
}, {
    inline: function(a, b, c, d) {
        return format(this.INLINE, b, this.exec(c, true), d)
    }
}, {
    INLINE: '&lt;<span class="tag">%1</span>%2&gt;%3&lt;/<span class="tag">%1</span>&gt;',
    tabStop: 1
});
with(base2.code.Colorizer) html.merge(xml);
with(base2.code.Colorizer) addScheme("css", {
    at_rule: /@[\w\s]+/,
    bracketed: /\([^'\x22)]*\)/,
    comment: patterns.block_comment,
    property: /(\w[\w-]*\s*):([^;}]+)/,
    special: /(\-[\w-]*\s*):/,
    selector: /([\w-:\[.#][^{};]*)\{/
}, {
    bracketed: IGNORE,
    selector: "@1{",
    special: "@1:",
    property: '@1:<span class="property value">$2</span>'
});
with(base2.code.Colorizer) addScheme("javascript", {
    conditional: /\/\*@if\s*\([^\)]*\)|\/\*@[\s\w]*|@\*\/|\/\/@\w+|@else[\s\w]*/,
    global: /\b(clearInterval|clearTimeout|constructor|document|escape|hasOwnProperty|Infinity|isNaN|NaN|parseFloat|parseInt|prototype|setInterval|setTimeout|toString|unescape|valueOf|window)\b/,
    keyword: /\b(&&|\|\||arguments|break|case|continue|default|delete|do|else|false|for|function|if|in|instanceof|new|null|return|switch|this|true|typeof|var|void|while|with|undefined)\b/,
    regexp: /([\[(\^=,{}:;&|!*?]\s*)(\/(\\\/|[^\/*])(\\.|[^\/\n\\])*\/[mgi]*)/,
    special: /\b(assert\w*|alert|catch|confirm|console|debug|debugger|eval|finally|prompt|throw|try)\b/
}, {
    comment: DEFAULT,
    string: DEFAULT,
    regexp: "$1@2",
    number: DEFAULT
});
with(base2) with(code) Colorizer["html-multi"] = Colorizer.html.union({
    inline: function(a, b, c, d) {
        var e = b == "style" ? "css" : "javascript";
        d = Colorizer[e].exec(d, true);
        d = format('<span class="%1">%2</span>', e, d);
        return format(this.INLINE, b, this.exec(c, true), d)
    }
});
with(base2.code.Colorizer.javascript) {
    add("\\b(" + (base2.exports + ",base,base2,merge,union,implement,Array2,Date2,String2").match(/[^\s,]+/g).join("|") + ")\\b", '<span class="base2">$0</span>');
    insertAt(0, /("@[^"]+"):/, '<span class="special">$1</span>:');
    tabStop = 2
}
eval(base2.namespace);
eval(DOM.namespace);
eval(JSB.namespace);
var bindings = new RuleList;
bindings.add("pre", {
    ondocumentready: function() {
        if(this.hasClass("js")) {
            this.addClass("javascript")
        }
        var a = this.className.split(/\s+/);
        for(var i = 0; i < a.length; i++) {
            var b = a[i];
            var c = Colorizer[b];
            if(c instanceof Colorizer) {
                var d = Traversal.getTextContent(this);
                this.innerHTML = c.exec(d);
                this.addClass("highlight");
                if(b == "html-multi") this.addClass("html");
                break
            }
        }
    }
});

function updateFlag() {
    this.nextSibling.style.color = this.value ? "#898E79" : "#A03333"
};
bindings.add("input.required,textarea.required", {
    ondocumentready: updateFlag,
    ondocumentmouseup: updateFlag,
    ondocumentkeyup: updateFlag
});

eval(base2.namespace);
eval(JavaScript.namespace);

var IGNORE = RegGrp.IGNORE;
var REMOVE = "";
var SPACE = " ";
var WORDS = /\w+/g;

var Packer = Base.extend({
    minify: function(script) {
        script = script.replace(Packer.CONTINUE, "");
        script = Packer.data.exec(script);
        script = Packer.whitespace.exec(script);
        script = Packer.clean.exec(script);
        return script;
    },

    pack: function(script, base62, shrink) {
        script = this.minify(script + "\n");
        if(shrink) script = this._shrinkVariables(script);
        if(base62) script = this._base62Encode(script);
        return script;
    },

    _base62Encode: function(script) {
        var words = new Words(script);
        var encode = function(word) {
            return words.get(word).encoded;
        };

        /* build the packed script */

        var p = this._escape(script.replace(WORDS, encode));
        var a = Math.min(Math.max(words.size(), 2), 62);
        var c = words.size();
        var k = words;
        var e = Packer["ENCODE" + (a > 10 ? a > 36 ? 62 : 36 : 10)];
        var r = a > 10 ? "e(c)" : "c";

        // the whole thing
        return format(Packer.UNPACK, p, a, c, k, e, r);
    },

    _escape: function(script) {
        // single quotes wrap the final string so escape them
        // also escape new lines required by conditional comments
        return script.replace(/([\\'])/g, "\\$1").replace(/[\r\n]+/g, "\\n");
    },

    _shrinkVariables: function(script) {
        // Windows Scripting Host cannot do regexp.test() on global regexps.
        var global = function(regexp) {
            // This function creates a global version of the passed regexp.
            return new RegExp(regexp.source, "g");
        };

        var data = []; // encoded strings and regular expressions
        var REGEXP = /^[^'"]\//;
        var store = function(string) {
            var replacement = "#" + data.length;
            if(REGEXP.test(string)) {
                replacement = string.charAt(0) + replacement;
                string = string.slice(1);
            }
            data.push(string);
            return replacement;
        };

        // Base52 encoding (a-Z)
        var encode52 = function(c) {
            return(c < 52 ? '' : arguments.callee(parseInt(c / 52))) +
                ((c = c % 52) > 25 ? String.fromCharCode(c + 39) : String.fromCharCode(c + 97));
        };

        // identify blocks, particularly identify function blocks (which define scope)
        var BLOCK = /(function\s*[\w$]*\s*\(\s*([^\)]*)\s*\)\s*)?(\{([^{}]*)\})/;
        var VAR_ = /var\s+/g;
        var VAR_NAME = /var\s+[\w$]+/g;
        var COMMA = /\s*,\s*/;
        var blocks = []; // store program blocks (anything between braces {})
        // encoder for program blocks
        var encode = function(block, func, args) {
            if(func) { // the block is a function block

                // decode the function block (THIS IS THE IMPORTANT BIT)
                // We are retrieving all sub-blocks and will re-parse them in light
                // of newly shrunk variables
                block = decode(block);

                // create the list of variable and argument names 
                var vars = match(block, VAR_NAME).join(",").replace(VAR_, "");
                var ids = Array2.combine(args.split(COMMA).concat(vars.split(COMMA)));

                // process each identifier
                var count = 0,
                    shortId;
                forEach(ids, function(id) {
                    id = trim(id);
                    if(id && id.length > 1) { // > 1 char
                        id = rescape(id);
                        // find the next free short name (check everything in the current scope)
                        do shortId = encode52(count++);
                        while (new RegExp("[^\\w$.]" + shortId + "[^\\w$:]").test(block));
                        // replace the long name with the short name
                        var reg = new RegExp("([^\\w$.])" + id + "([^\\w$:])");
                        while(reg.test(block)) block = block.replace(global(reg), "$1" + shortId + "$2");
                        var reg = new RegExp("([^{,\\w$.])" + id + ":", "g");
                        block = block.replace(reg, "$1" + shortId + ":");
                    }
                });
            }
            var replacement = "~" + blocks.length + "~";
            blocks.push(block);
            return replacement;
        };

        // decoder for program blocks
        var ENCODED = /~(\d+)~/;
        var decode = function(script) {
            while(ENCODED.test(script)) {
                script = script.replace(global(ENCODED), function(match, index) {
                    return blocks[index];
                });
            }
            return script;
        };

        // encode strings and regular expressions
        script = Packer.data.exec(script, store);

        // remove closures (this is for base2 namespaces only)
        script = script.replace(/new function\(_\)\s*\{/g, "{;#;");

        // encode blocks, as we encode we replace variable and argument names
        while(BLOCK.test(script)) {
            script = script.replace(global(BLOCK), encode);
        }

        // put the blocks back
        script = decode(script);

        // put back the closure (for base2 namespaces only)
        script = script.replace(/\{;#;/g, "new function(_){");

        // put strings and regular expressions back
        script = script.replace(/#(\d+)/g, function(match, index) {
            return data[index];
        });

        return script;
    }
}, {
    CONTINUE: /\\\r?\n/g,

    ENCODE10: "String",
    ENCODE36: "function(c){return c.toString(a)}",
    ENCODE62: "function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))}",

    UNPACK: "eval(function(p,a,c,k,e,r){e=%5;if(!''.replace(/^/,String)){while(c--)r[%6]=k[c]" +
        "||%6;k=[function(e){return r[e]}];e=function(){return'\\\\w+'};c=1};while(c--)if(k[c])p=p." +
        "replace(new RegExp('\\\\b'+e(c)+'\\\\b','g'),k[c]);return p}('%1',%2,%3,'%4'.split('|'),0,{}))",

    init: function() {
        this.data = reduce(this.data, function(data, replacement, expression) {
            data.put(this.javascript.exec(expression), replacement);
            return data;
        }, new RegGrp, this);
        this.clean = this.data.union(this.clean);
        this.whitespace = this.data.union(this.whitespace);
    },

    clean: {
        "\\(\\s*;\\s*;\\s*\\)": "(;;)", // for (;;) loops
        "throw[^};]+[};]": IGNORE, // a safari 1.3 bug
        ";+\\s*([};])": "$1"
    },

    data: {
        // strings
        "STRING1": IGNORE,
        'STRING2': IGNORE,
        "CONDITIONAL": IGNORE, // conditional comments
        "(COMMENT1)\\n\\s*(REGEXP)?": "\n$3",
        "(COMMENT2)\\s*(REGEXP)?": " $3",
        "([\\[(\\^=,{}:;&|!*?])\\s*(REGEXP)": "$1$2"
    },

    javascript: new RegGrp({
        COMMENT1: /(\/\/|;;;)[^\n]*/.source,
        COMMENT2: /\/\*[^*]*\*+([^\/][^*]*\*+)*\//.source,
        CONDITIONAL: /\/\*@|@\*\/|\/\/@[^\n]*\n/.source,
        REGEXP: /\/(\\[\/\\]|[^*\/])(\\.|[^\/\n\\])*\/[gim]*/.source,
        STRING1: /'(\\.|[^'\\])*'/.source,
        STRING2: /"(\\.|[^"\\])*"/.source
    }),

    whitespace: {
        "(\\d)\\s+(\\.\\s*[a-z\\$_\\[(])": "$1 $2", // http://dean.edwards.name/weblog/2007/04/packer3/#comment84066
        "([+-])\\s+([+-])": "$1 $2", // c = a++ +b;
        "\\b\\s+\\$\\s+\\b": " $ ", // var $ in
        "\\$\\s+\\b": "$ ", // object$ in
        "\\b\\s+\\$": " $", // return $object
        "\\b\\s+\\b": SPACE,
        "\\s+": REMOVE
    }
});

var Words = Collection.extend({
    constructor: function(script) {
        this.base();
        forEach(script.match(WORDS), this.add, this);
        this.encode();
    },

    add: function(word) {
        if(!this.has(word)) this.base(word);
        word = this.get(word);
        word.count++;
        return word;
    },

    encode: function() {
        // sort by frequency
        this.sort(function(word1, word2) {
            return word2.count - word1.count;
        });

        eval("var a=62,e=" + Packer.ENCODE62);
        var encode = e;
        var encoded = new Collection; // a dictionary of base62 -> base10
        var count = this.size();
        for(var i = 0; i < count; i++) {
            encoded.put(encode(i), i);
        }

        var empty = function() {
            return ""
        };
        var index = 0;
        forEach(this, function(word) {
            if(encoded.has(word)) {
                word.index = encoded.get(word);
                word.toString = empty;
            } else {
                while(this.has(encode(index))) index++;
                word.index = index++;
            }
            word.encoded = encode(word.index);
        }, this);

        // sort by encoding
        this.sort(function(word1, word2) {
            return word1.index - word2.index;
        });
    },

    toString: function() {
        return this.getValues().join("|");
    }
}, {
    Item: {
        constructor: function(word) {
            this.toString = function() {
                return word
            };
        },

        count: 0,
        encoded: "",
        index: -1
    }
});
</script>
</body>
</html>